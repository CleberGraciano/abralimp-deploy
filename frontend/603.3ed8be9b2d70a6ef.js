"use strict";(self.webpackChunkfrontend=self.webpackChunkfrontend||[]).push([[603],{6603:(Fe,he,R)=>{R.r(he),R.d(he,{PAGE_BUILDER_API_URL:()=>oe.R,PAGE_BUILDER_AUTH_ADAPTER:()=>oe.N,PAGE_BUILDER_CONFIG:()=>Le.$,PAGE_BUILDER_EXTENSIONS_INITIALIZER:()=>Te,PAGE_VIEWER_CONFIG:()=>Ne.E,PageBuilderComponent:()=>xe,PageBuilderExtensionsService:()=>ce.S,PageBuilderLicenseModule:()=>ye.g,PageBuilderLicenseService:()=>Ie.b,PageBuilderModule:()=>ze,PageViewerComponent:()=>Be.X,PageViewerModule:()=>De.w,initializePageBuilderExtensions:()=>ve,pageBuilderLicenseInitializer:()=>ye.G});var de=R(177),X=R(9417),me=R(1626),Ce=R(4662),H=R(467),ge=R(9437),be=R(7673),oe=R(9413),l=R(2598),we=R(4412),ce=R(8063);let fe=(()=>{class S{constructor(e){this.extensionsService=e,this.registeredComponents=new we.t([]),this.registeredComponents$=this.registeredComponents.asObservable(),this.componentsCache=[],this.extensionsService.components$.subscribe(t=>{0===this.componentsCache.length?(this.componentsCache=t.map(o=>({...o})),this.loadFromLocalStorage()):t.forEach(o=>{this.componentsCache.find(r=>r.id===o.id)||this.componentsCache.push({...o})}),this.registeredComponents.next([...this.componentsCache])})}getAllComponents(){return this.extensionsService.getAllComponents()}getActiveComponents(){return this.getAllComponents().filter(e=>e.active)}getAvailableComponents(){return this.getAllComponents().filter(e=>e.available)}getVisibleComponents(){return this.getAllComponents().filter(e=>e.active&&e.available)}getComponentById(e){return this.getAllComponents().find(t=>t.id===e)}getComponentsByCategory(e){return this.getAllComponents().filter(t=>t.category===e)}activateComponent(e){const t=this.componentsCache.find(o=>o.id===e);t&&(t.active=!0,this.registeredComponents.next([...this.componentsCache]))}deactivateComponent(e){const t=this.componentsCache.find(o=>o.id===e);t&&(t.active=!1,this.registeredComponents.next([...this.componentsCache]))}setComponentAvailability(e,t){const o=this.componentsCache.find(n=>n.id===e);o&&(o.available=t,this.registeredComponents.next([...this.componentsCache]))}exportComponentsConfig(){return[...this.componentsCache]}saveToLocalStorage(){const e=this.componentsCache.map(t=>({id:t.id,active:t.active,available:t.available}));localStorage.setItem("pageBuilderComponentsConfig",JSON.stringify(e))}loadFromLocalStorage(){const e=localStorage.getItem("pageBuilderComponentsConfig");if(e)try{JSON.parse(e).forEach(o=>{const n=this.componentsCache.find(r=>r.id===o.id);n&&(n.active=o.active,n.available=o.available)}),this.registeredComponents.next([...this.componentsCache])}catch{}}static{this.\u0275fac=function(t){return new(t||S)(l.KVO(ce.S))}}static{this.\u0275prov=l.jDH({token:S,factory:S.\u0275fac,providedIn:"root"})}}return S})();function Pe(S,ne){1&S&&(l.j41(0,"div",18)(1,"span",19),l.EFF(2,"\u{1f4e6}"),l.k0s(),l.j41(3,"p"),l.EFF(4,"Nenhum componente encontrado"),l.k0s()())}function Me(S,ne){if(1&S){const e=l.RV6();l.j41(0,"div",20)(1,"div",21)(2,"span",22),l.EFF(3),l.k0s(),l.j41(4,"div",23)(5,"h4",24),l.EFF(6),l.k0s(),l.j41(7,"p",25),l.EFF(8),l.k0s(),l.j41(9,"span",26),l.EFF(10),l.k0s()()(),l.j41(11,"div",27)(12,"label",28)(13,"input",29),l.bIt("change",function(){const n=l.eBV(e).$implicit,r=l.XpG();return l.Njj(r.toggleActive(n))}),l.k0s(),l.nrm(14,"span",30),l.j41(15,"span",31),l.EFF(16),l.k0s()(),l.j41(17,"label",28)(18,"input",29),l.bIt("change",function(){const n=l.eBV(e).$implicit,r=l.XpG();return l.Njj(r.toggleAvailability(n))}),l.k0s(),l.nrm(19,"span",30),l.j41(20,"span",31),l.EFF(21),l.k0s()()()()}if(2&S){const e=ne.$implicit;l.R7$(3),l.JRh(e.icon),l.R7$(3),l.JRh(e.name),l.R7$(2),l.JRh(e.description),l.R7$(2),l.JRh(e.category),l.R7$(3),l.Y8G("checked",e.active),l.R7$(3),l.JRh(e.active?"Ativo":"Inativo"),l.R7$(2),l.Y8G("checked",e.available),l.R7$(3),l.JRh(e.available?"Vis\xedvel":"Oculto")}}let Ee=(()=>{class S{constructor(e){this.advancedComponentsService=e,this.components=[],this.filteredComponents=[],this.searchTerm="",this.filterCategory="all"}ngOnInit(){this.loadComponents()}loadComponents(){this.advancedComponentsService.registeredComponents$.subscribe(e=>{this.components=e,this.applyFilters()})}applyFilters(){let e=[...this.components];if(this.searchTerm){const t=this.searchTerm.toLowerCase();e=e.filter(o=>o.name.toLowerCase().includes(t)||o.description?.toLowerCase().includes(t))}"all"!==this.filterCategory&&(e=e.filter(t=>t.category===this.filterCategory)),this.filteredComponents=e}toggleActive(e){e.active?this.advancedComponentsService.deactivateComponent(e.id):this.advancedComponentsService.activateComponent(e.id)}toggleAvailability(e){this.advancedComponentsService.setComponentAvailability(e.id,!e.available)}saveConfiguration(){this.advancedComponentsService.saveToLocalStorage(),alert("Configura\xe7\xe3o salva com sucesso!")}exportConfiguration(){const e=this.advancedComponentsService.exportComponentsConfig(),t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download="page-builder-components-config.json",r.click(),URL.revokeObjectURL(n)}resetToDefault(){confirm("Tem certeza que deseja resetar para a configura\xe7\xe3o padr\xe3o?")&&(localStorage.removeItem("pageBuilderAdvancedComponents"),window.location.reload())}static{this.\u0275fac=function(t){return new(t||S)(l.rXU(fe))}}static{this.\u0275cmp=l.VBU({type:S,selectors:[["app-advanced-components-manager"]],decls:28,vars:4,consts:[[1,"pb-modal-header"],[1,"pb-modal-title"],[2,"margin-right","8px"],[1,"pb-modal-subtitle"],[1,"pb-modal-body"],[1,"pb-manager-toolbar"],[1,"pb-search-box"],["type","text","placeholder","\u{1f50d} Buscar componentes...",1,"pb-input",3,"ngModel","ngModelChange","input"],[1,"pb-select",3,"ngModel","ngModelChange","change"],["value","all"],["value","advanced"],["value","custom"],[1,"pb-components-list"],["class","pb-empty-state",4,"ngIf"],["class","pb-component-card",4,"ngFor","ngForOf"],[1,"pb-modal-footer"],[1,"pb-btn","pb-btn-secondary",3,"click"],[1,"pb-btn","pb-btn-primary",3,"click"],[1,"pb-empty-state"],[2,"font-size","48px","opacity","0.3"],[1,"pb-component-card"],[1,"pb-card-left"],[1,"pb-component-icon"],[1,"pb-component-info"],[1,"pb-component-name"],[1,"pb-component-description"],[1,"pb-badge"],[1,"pb-card-right"],[1,"pb-toggle"],["type","checkbox",3,"checked","change"],[1,"pb-toggle-slider"],[1,"pb-toggle-label"]],template:function(t,o){1&t&&(l.j41(0,"div",0)(1,"h3",1)(2,"span",2),l.EFF(3,"\u2699\ufe0f"),l.k0s(),l.EFF(4," Gerenciar Componentes Avan\xe7ados "),l.k0s(),l.j41(5,"p",3),l.EFF(6," Configure quais componentes est\xe3o dispon\xedveis na sidebar "),l.k0s()(),l.j41(7,"div",4)(8,"div",5)(9,"div",6)(10,"input",7),l.bIt("ngModelChange",function(r){return o.searchTerm=r})("input",function(){return o.applyFilters()}),l.k0s()(),l.j41(11,"select",8),l.bIt("ngModelChange",function(r){return o.filterCategory=r})("change",function(){return o.applyFilters()}),l.j41(12,"option",9),l.EFF(13,"Todas as categorias"),l.k0s(),l.j41(14,"option",10),l.EFF(15,"Avan\xe7ados"),l.k0s(),l.j41(16,"option",11),l.EFF(17,"Personalizados"),l.k0s()()(),l.j41(18,"div",12),l.DNE(19,Pe,5,0,"div",13),l.DNE(20,Me,22,8,"div",14),l.k0s()(),l.j41(21,"div",15)(22,"button",16),l.bIt("click",function(){return o.resetToDefault()}),l.EFF(23," \u{1f504} Resetar "),l.k0s(),l.j41(24,"button",16),l.bIt("click",function(){return o.exportConfiguration()}),l.EFF(25," \u{1f4e5} Exportar "),l.k0s(),l.j41(26,"button",17),l.bIt("click",function(){return o.saveConfiguration()}),l.EFF(27," \u{1f4be} Salvar "),l.k0s()()),2&t&&(l.R7$(10),l.Y8G("ngModel",o.searchTerm),l.R7$(1),l.Y8G("ngModel",o.filterCategory),l.R7$(8),l.Y8G("ngIf",0===o.filteredComponents.length),l.R7$(1),l.Y8G("ngForOf",o.filteredComponents))},dependencies:[de.Sq,de.bT,X.xH,X.y7,X.me,X.wz,X.BC,X.vS],styles:['.pb-modal-header[_ngcontent-%COMP%]{padding:20px 24px;border-bottom:1px solid #e5e7eb;background:#f9fafb}.pb-modal-header[_ngcontent-%COMP%]   .pb-modal-title[_ngcontent-%COMP%]{font-size:20px;font-weight:600;color:#111827;margin:0 0 8px;display:flex;align-items:center}.pb-modal-header[_ngcontent-%COMP%]   .pb-modal-subtitle[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;margin:0}.pb-modal-body[_ngcontent-%COMP%]{padding:24px;max-height:60vh;overflow-y:auto}.pb-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.pb-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#f3f4f6}.pb-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:4px}.pb-modal-body[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#9ca3af}.pb-modal-footer[_ngcontent-%COMP%]{padding:16px 24px;border-top:1px solid #e5e7eb;background:#f9fafb;display:flex;justify-content:flex-end;gap:12px}.pb-manager-toolbar[_ngcontent-%COMP%]{display:flex;gap:12px;margin-bottom:20px;flex-wrap:wrap}.pb-manager-toolbar[_ngcontent-%COMP%]   .pb-search-box[_ngcontent-%COMP%]{flex:1;min-width:250px}.pb-manager-toolbar[_ngcontent-%COMP%]   .pb-input[_ngcontent-%COMP%]{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;transition:all .2s}.pb-manager-toolbar[_ngcontent-%COMP%]   .pb-input[_ngcontent-%COMP%]:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}.pb-manager-toolbar[_ngcontent-%COMP%]   .pb-input[_ngcontent-%COMP%]::placeholder{color:#9ca3af}.pb-manager-toolbar[_ngcontent-%COMP%]   .pb-select[_ngcontent-%COMP%]{padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;background:white;cursor:pointer;transition:all .2s}.pb-manager-toolbar[_ngcontent-%COMP%]   .pb-select[_ngcontent-%COMP%]:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}.pb-components-list[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px}.pb-empty-state[_ngcontent-%COMP%]{text-align:center;padding:60px 20px;color:#9ca3af}.pb-empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:12px;font-size:16px}.pb-component-card[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;padding:16px;background:white;border:1px solid #e5e7eb;border-radius:8px;transition:all .2s}.pb-component-card[_ngcontent-%COMP%]:hover{border-color:#d1d5db;box-shadow:0 2px 8px #0000000d}.pb-component-card[_ngcontent-%COMP%]   .pb-card-left[_ngcontent-%COMP%]{display:flex;align-items:center;gap:12px;flex:1}.pb-component-card[_ngcontent-%COMP%]   .pb-card-left[_ngcontent-%COMP%]   .pb-component-icon[_ngcontent-%COMP%]{font-size:32px;width:48px;height:48px;display:flex;align-items:center;justify-content:center;background:#f3f4f6;border-radius:8px}.pb-component-card[_ngcontent-%COMP%]   .pb-card-left[_ngcontent-%COMP%]   .pb-component-info[_ngcontent-%COMP%]{flex:1}.pb-component-card[_ngcontent-%COMP%]   .pb-card-left[_ngcontent-%COMP%]   .pb-component-info[_ngcontent-%COMP%]   .pb-component-name[_ngcontent-%COMP%]{font-size:16px;font-weight:600;color:#111827;margin:0 0 4px}.pb-component-card[_ngcontent-%COMP%]   .pb-card-left[_ngcontent-%COMP%]   .pb-component-info[_ngcontent-%COMP%]   .pb-component-description[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;margin:0 0 6px}.pb-component-card[_ngcontent-%COMP%]   .pb-card-left[_ngcontent-%COMP%]   .pb-component-info[_ngcontent-%COMP%]   .pb-badge[_ngcontent-%COMP%]{display:inline-block;padding:2px 8px;background:#eef2ff;color:#6366f1;font-size:11px;font-weight:600;border-radius:4px;text-transform:uppercase}.pb-component-card[_ngcontent-%COMP%]   .pb-card-right[_ngcontent-%COMP%]{display:flex;gap:16px;align-items:center}.pb-toggle[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;cursor:pointer;-webkit-user-select:none;user-select:none}.pb-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{display:none}.pb-toggle[_ngcontent-%COMP%]   .pb-toggle-slider[_ngcontent-%COMP%]{position:relative;width:44px;height:24px;background:#d1d5db;border-radius:12px;transition:background .3s}.pb-toggle[_ngcontent-%COMP%]   .pb-toggle-slider[_ngcontent-%COMP%]:after{content:"";position:absolute;top:2px;left:2px;width:20px;height:20px;background:white;border-radius:50%;transition:transform .3s}.pb-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .pb-toggle-slider[_ngcontent-%COMP%]{background:#6366f1}.pb-toggle[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .pb-toggle-slider[_ngcontent-%COMP%]:after{transform:translate(20px)}.pb-toggle[_ngcontent-%COMP%]   .pb-toggle-label[_ngcontent-%COMP%]{font-size:13px;color:#6b7280;font-weight:500;min-width:70px}.pb-btn[_ngcontent-%COMP%]{padding:10px 20px;border:none;border-radius:6px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;display:inline-flex;align-items:center;gap:6px}.pb-btn[_ngcontent-%COMP%]:hover{transform:translateY(-1px);box-shadow:0 4px 12px #0000001a}.pb-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.pb-btn-primary[_ngcontent-%COMP%]{background:#6366f1;color:#fff}.pb-btn-primary[_ngcontent-%COMP%]:hover{background:#4f46e5}.pb-btn-secondary[_ngcontent-%COMP%]{background:#f3f4f6;color:#374151}.pb-btn-secondary[_ngcontent-%COMP%]:hover{background:#e5e7eb}']})}}return S})();function ke(S,ne){1&S&&(l.j41(0,"button",157)(1,"span",37),l.EFF(2,"\u2b50"),l.k0s(),l.j41(3,"span",38),l.EFF(4,"Criar Modelo"),l.k0s(),l.nrm(5,"span",39),l.k0s())}function Oe(S,ne){1&S&&(l.j41(0,"button",158),l.EFF(1,"\u{1f4cb} Ver JSON"),l.k0s())}function Se(S,ne){1&S&&(l.j41(0,"button",159),l.EFF(1,"\u{1f4e4} Importar"),l.k0s())}function _e(S,ne){1&S&&(l.j41(0,"button",160),l.EFF(1,"\u{1f4e5} Exportar"),l.k0s())}let xe=(()=>{class S{constructor(e,t,o,n,r){this.advancedComponentsService=e,this.extensionsService=t,this.http=o,this.authAdapter=n,this.selectedElement=null,this.elements=[],this.draggedWidgetType="",this.formatToolbar=null,this.currentEditableElement=null,this.currentPanelContent=null,this.isPreviewMode=!1,this.history=[],this.historyIndex=-1,this.maxHistorySize=50,this.currentDevice="desktop",this.zoomLevel=100,this.zoomLevels=[50,75,100,125,150,200],this.registeredColumnWrappers=new Set,this.columnHandlesUpdateQueued=!1,this.searchTerm="",this.imageLibrary=[],this.imageModal=null,this.currentImageElement=null,this.currentSelectedLibraryImage=null,this.cropperInstance=null,this.imageWidthInput=null,this.imageHeightInput=null,this.maintainAspectCheckbox=null,this.resizeAspectRatio=1,this.cropCanvas=null,this.cropContext=null,this.cropData={x:0,y:0,width:0,height:0,imageWidth:0,imageHeight:0,isDragging:!1,isResizing:!1,startX:0,startY:0,resizeStartX:0,resizeStartY:0,aspectRatio:0,naturalAspectRatio:1,useOriginalBounds:!1,currentImage:""},this.galleryVisibleSlots=new WeakMap,this.galleryMaxSlots=6,this.abralimpComponentOrder=["titulo-texto-pagina","mvv-cards","cta-section","hero-section","corpo-diretivo","ultimas-noticias","cards-grid","faq"],this.advancedComponentOrder=["feature-card","mini-cta-card","accordion","image-gallery","video-embed"],this.draggedElement=null,this.dragPlaceholder=null,this.isDraggingElement=!1,this.pages=[],this.modelos=[],this.currentEditingPageId=null,this.currentEditingModeloId=null,this.currentSaveType="pagina",this.pagesModal=null,this.pagesPanel=null,this.apiBaseUrl="",this.apiUrlPages="/admin/pagina",this.apiUrlModelos="",this.isLoadingPages=!1,this.isLoadingModelos=!1,this.lastLoadedTime=0,this.lastLoadedModelosTime=0,this.showCreateModelTab=!1,this.showAdminControls=!1,this.apiBaseUrl=this.normalizeBaseUrl(r),this.apiUrlModelos=this.buildApiUrl("api/v1/modelos-pagina")}getApiUrl(e="pagina"){return this.buildApiUrl("modelo"===e?"api/v1/modelos-pagina":"api/v1/paginas-json")}normalizeBaseUrl(e){return e?e.replace(/\/+$/,""):""}buildApiUrl(e){const t=e.startsWith("/")?e:`/${e}`;return this.apiBaseUrl?`${this.apiBaseUrl}${t}`:t}ngOnInit(){}ngAfterViewInit(){setTimeout(()=>{this.initializePageBuilder(),this.loadAdvancedComponents(),this.loadPages(),window.pageBuilderInstance=this,window.__pageBuilderComponent=this;const e=localStorage.getItem("paginaEdit");if(e)try{const o=JSON.parse(e);o&&o.id&&setTimeout(()=>{this.editPage(o.id,"pagina"),localStorage.removeItem("paginaEdit")},800)}catch(o){console.warn("\u26a0\ufe0f Falha ao parsear paginaEdit do localStorage:",o)}const t=document.getElementById("newPageBtn");t&&t.addEventListener("click",()=>{this.clearCanvasAndState(),this.showNotification("Nova p\xe1gina iniciada!","success",2e3),this.togglePagesPanel(!0)});try{const o="roberto@abralimp.com.br",n=[localStorage.getItem("current_username"),localStorage.getItem("currentUser"),localStorage.getItem("username"),localStorage.getItem("email"),localStorage.getItem("userEmail"),localStorage.getItem("currentUserEmail")];let r=n.find(g=>g&&String(g).trim())||null;if(r&&"string"==typeof r&&/^{|\[/.test(r.trim()))try{const g=JSON.parse(r);r=g?.email||g?.username||g?.user?.email||r}catch{}const a=this.authAdapter;if((!r||!String(r).trim())&&a)if("function"==typeof a.getCurrentUserEmail)r=a.getCurrentUserEmail();else if("function"==typeof a.getCurrentUser)try{const g=a.getCurrentUser();r=g?.email||g?.username||r}catch{}r=String(r||"").trim().toLowerCase();const i=r===o.toLowerCase();let s="";try{s=a&&"function"==typeof a.getCurrentRole&&a.getCurrentRole()||""}catch{s=""}const d=String(s||"").toUpperCase(),c="SUPERADMIN"===d||"ROLE_SUPERADMIN"===d,p=i||c;if(console.debug("[PageBuilder] admin-check candidates=",n,"parsedEmail=",r,"role=",s,"isRoberto=",i,"isSuper=",c,"isAllowed=",p),this.showCreateModelTab=p,this.showAdminControls=p,p)try{this.setupViewJsonButton(),this.setupImportButton()}catch(g){console.warn("[PageBuilder] Falha ao inicializar handlers admin:",g)}if(!p){const g=document.querySelector(".pb-pages-tab-btn[data-tab='tabCreateModel']");g&&(g.style.display="none");const u=document.getElementById("viewJsonBtn");u&&(u.style.display="none");const b=document.getElementById("importBtn");b&&(b.style.display="none");const h=document.getElementById("exportBtn");h&&(h.style.display="none")}}catch{}},100)}clearCanvasAndState(){this.canvas&&(this.canvas.innerHTML="",this.elements=[],this.selectedElement=null,this.saveState(),this.checkEmptyState());const e=document.getElementById("newPageTitle"),t=document.getElementById("newPageLink"),o=document.getElementById("newPageDesc");e&&(e.value=""),t&&(t.value=""),o&&(o.value=""),this.currentEditingPageId=null,this.currentEditingModeloId=null;try{localStorage.removeItem("pageBuilder_editingPageId"),localStorage.removeItem("pageBuilder_editingType")}catch{}}initializePageBuilder(){this.canvas=document.getElementById("canvas"),this.propertiesPanel=document.getElementById("propertiesPanel"),this.propertiesContent=document.getElementById("propertiesContent"),this.canvas&&(this.setupDragAndDrop(),this.createFormatToolbar(),this.createImageLibraryModal(),this.setupDocumentListeners(),this.setupPropertiesPanel(),this.setupPreviewMode(),this.setupSidebarToggle(),this.setupUndoRedo(),this.setupDeviceSwitcher(),this.setupComponentsManager(),this.setupCategoryToggle(),this.setupSearch(),this.setupZoom(),this.setupColumnResizeListeners(),this.setupSaveButton(),this.setupViewJsonButton(),this.setupImportButton(),this.setupClearAll(),this.setupKeyboardShortcuts(),this.setupPagesManager(),this.updateElementCounter(),this.checkEmptyState(),this.saveState())}setupDragAndDrop(){const e=document.querySelectorAll(".pb-widget");0!==e.length&&(e.forEach((t,o)=>{const n=t,r=n.getAttribute("data-widget-type")||"";n.setAttribute("draggable","true"),n.draggable=!0,n.style.cursor="grab",n.style.userSelect="none",n.style.webkitUserDrag="element",n.addEventListener("selectstart",a=>a.preventDefault()),n.addEventListener("mousedown",a=>{n.style.cursor="grabbing"}),n.addEventListener("mouseup",a=>{n.style.cursor="grab"}),n.addEventListener("dragstart",a=>{this.handleWidgetDragStart(a,r)},!0),n.addEventListener("dragend",a=>{this.handleWidgetDragEnd(a)},!0),n.addEventListener("drag",a=>{},{once:!0})}),this.canvas.addEventListener("dragover",t=>{this.handleCanvasDragOver(t)},!0),this.canvas.addEventListener("drop",t=>{this.handleCanvasDrop(t)},!0),this.canvas.addEventListener("dragleave",t=>{this.handleCanvasDragLeave(t)}))}handleWidgetDragStart(e,t){if(!e.dataTransfer)return;this.draggedWidgetType=t,e.dataTransfer.effectAllowed="copy",e.dataTransfer.setData("text/plain",t),e.dataTransfer.setData("application/x-widget-type",t);const o=e.target;o.classList.add("dragging-widget"),o.style.opacity="0.5"}handleWidgetDragEnd(e){const t=e.target;t.classList.remove("dragging-widget"),t.style.opacity="1"}handleCanvasDragOver(e){const o=e.target.closest('[data-droppable="true"]');if(o){const c=(o.getAttribute("data-allowed-types")||"").split(",").map(h=>h.trim()).filter(Boolean),p=c.includes("advanced-component"),u=this.isDraggingElement&&this.draggedElement?this.draggedElement?.getAttribute("data-element-type")||(this.draggedElement?this.getElementType(this.draggedElement):""):this.draggedWidgetType,b=this.isAdvancedWidgetType(u);if(u&&(c.includes(u)||p&&b))return}e.preventDefault(),e.stopPropagation();const n=this.isDraggingElement&&!!this.draggedElement;if(!n&&!this.draggedWidgetType)return;e.dataTransfer&&(e.dataTransfer.dropEffect=n?"move":"copy"),this.canvas.classList.add("drag-over"),this.dragPlaceholder||(this.dragPlaceholder=document.createElement("div"),this.dragPlaceholder.className="pb-drag-placeholder");const a=n?this.draggedElement:null,i=a?.parentElement??this.canvas,s=Array.from(i.children).filter(c=>c instanceof HTMLElement&&c.classList.contains("pb-element"));let d=null;for(const c of s){if(a&&c===a)continue;const p=c.getBoundingClientRect();if(e.clientY<p.top+p.height/2){d=c;break}}if(d){const c=d.parentElement??i;(this.dragPlaceholder.parentElement!==c||this.dragPlaceholder.nextSibling!==d)&&c.insertBefore(this.dragPlaceholder,d)}else(this.dragPlaceholder.parentElement!==i||this.dragPlaceholder.nextSibling)&&i.appendChild(this.dragPlaceholder)}handleCanvasDragLeave(e){const t=e.target;if(t.classList.contains("pb-canvas")){t.classList.remove("drag-over");const o=e.relatedTarget;(!o||!this.canvas.contains(o))&&(this.dragPlaceholder?.remove(),this.dragPlaceholder=null)}}handleCanvasDrop(e){const o=e.target.closest('[data-droppable="true"]');if(o){const s=(o.getAttribute("data-allowed-types")||"").split(",").map(u=>u.trim()).filter(Boolean),d=s.includes("advanced-component"),p=this.isDraggingElement&&this.draggedElement?this.draggedElement?.getAttribute("data-element-type")||(this.draggedElement?this.getElementType(this.draggedElement):""):this.draggedWidgetType,g=this.isAdvancedWidgetType(p);if(p&&(s.includes(p)||d&&g))return}e.preventDefault(),e.stopPropagation(),this.canvas.classList.remove("drag-over");const n=this.isDraggingElement&&!!this.draggedElement,a=this.dragPlaceholder??null,i=()=>a?.parentElement?a.parentElement:this.draggedElement?.parentElement?this.draggedElement.parentElement:this.canvas;if(this.draggedWidgetType&&this.draggedWidgetType){const s=i(),d=a&&a.nextElementSibling instanceof HTMLElement?a.nextElementSibling:null;this.addElement(this.draggedWidgetType,{},s,d)}else if(n&&this.draggedElement){i().insertBefore(this.draggedElement,a?.nextSibling??null),this.isDraggingElement=!1,this.draggedElement=null,this.saveState(),this.showNotification("Elemento movido!","success",1500)}a?.remove(),this.dragPlaceholder=null,this.draggedWidgetType=""}addElement(e,t={},o=null,n=null){this.removeEmptyState();const r=this.createElement(e,t),a=this.createElementWrapper(r,e),i=o??this.canvas;return i&&(n&&n.parentElement===i?i.insertBefore(a,n):i.appendChild(a),this.elements.push({id:a.id,type:e,data:t,element:a}),a.__element=this.elements[this.elements.length-1],this.checkEmptyState(),this.updateElementCounter(),this.saveState()),a}createElement(e,t={}){const o={heading:()=>{const i=document.createElement(t.level||"h2");return i.textContent=t.text||"Seu T\xedtulo Aqui",i.style.textAlign=t.align||"left",i.style.color=t.color||"#1f2937",i.style.margin="0",i.style.padding="0",i.style.outline="none",i.style.background=t.background||"transparent",i.contentEditable="true",i.setAttribute("data-placeholder","Digite seu t\xedtulo..."),i.addEventListener("focus",()=>{const s=document.createRange(),d=window.getSelection();s.selectNodeContents(i),d?.removeAllRanges(),d?.addRange(s)}),i.addEventListener("keydown",s=>{"Enter"===s.key&&!s.shiftKey&&(s.preventDefault(),i.blur())}),i},text:()=>{const a=document.createElement("p"),i=t.text||"Clique para editar este texto. Lorem ipsum dolor sit amet.";return"string"==typeof i&&/<[^>]+>/.test(i)?a.innerHTML=i:(a.textContent=i,a.style.whiteSpace="pre-line"),a.style.textAlign=t.align||"left",a.style.color=t.color||"#6b7280",a.style.fontSize=t.fontSize||"16px",a.style.lineHeight="1.6",a.style.margin="0",a.style.padding="0",a.style.outline="none",a.style.background=t.background||"transparent",a.contentEditable="true",a.setAttribute("data-placeholder","Digite seu texto..."),a.addEventListener("focus",()=>{const s=document.createRange(),d=window.getSelection();s.selectNodeContents(a),d?.removeAllRanges(),d?.addRange(s)}),a},image:()=>{const a=document.createElement("img"),i=`data:image/svg+xml,${encodeURIComponent('\n          <svg width="800" height="400" xmlns="http://www.w3.org/2000/svg">\n            <rect width="800" height="400" fill="#f3f4f6"/>\n            <g transform="translate(400, 200)">\n              <rect x="-60" y="-40" width="120" height="80" rx="8" fill="#e5e7eb" stroke="#d1d5db" stroke-width="2"/>\n              <circle cx="-30" cy="-15" r="8" fill="#9ca3af"/>\n              <path d="M -50 10 L -20 -15 L 10 15 L 40 -10 L 50 0 L 50 20 L -50 20 Z" fill="#d1d5db"/>\n            </g>\n            <text x="400" y="260" font-family="Arial, sans-serif" font-size="18" fill="#9ca3af" text-anchor="middle">\n              \u{1f5bc}\ufe0f Clique para adicionar imagem\n            </text>\n          </svg>\n        ')}`;a.src=t.src||i,a.alt=t.alt||"Imagem";const s=t.width||"100%";return a.style.width="number"==typeof s?s+"px":s,a.style.maxWidth="100%",a.style.height="auto",a.style.display="block",a.style.margin="0",a.style.padding="0",a.style.borderRadius=t.borderRadius||"0px",a.style.background=t.background||"#f9fafb",a.style.cursor="pointer",a.style.border="1px dashed #d1d5db",a.setAttribute("data-image-widget","true"),t.isUrl&&a.setAttribute("data-is-url","true"),a},button:()=>{const a=document.createElement("button");a.type="button",a.classList.add("pb-basic-button");const i=t.text&&t.text.trim().length?t.text:"Clique Aqui";a.textContent=i,a.style.background=t.background||"rgb(59, 137, 181)",a.style.color=t.color||"rgb(255, 255, 255)",a.style.padding=t.padding||"10px 20px",a.style.margin="0",a.style.borderRadius=t.borderRadius||"6px",a.style.fontSize=t.fontSize||"16px",a.style.fontWeight=t.fontWeight||"600",a.style.border=t.border||"0px none rgb(99, 102, 241)",t.borderWidth&&(a.style.borderWidth=t.borderWidth),t.borderStyle&&(a.style.borderStyle=t.borderStyle),t.borderColor&&(a.style.borderColor=t.borderColor),a.style.cursor="pointer",a.style.outline="none",t.width?a.style.width=t.width:a.style.removeProperty("width");const s=!!t.fullWidth||"100%"===t.width;t.display?a.style.display=t.display:s?(a.style.display="block",t.width||(a.style.width="100%")):a.style.display=t.display||"inline-block",a.style.boxShadow=t.boxShadow?t.boxShadow:t.boxShadow||"none",a.dataset.fullWidth=s?"true":"false",this.applyButtonHoverStyles(a,{background:a.style.background,color:a.style.color,borderColor:a.style.borderColor,boxShadow:a.style.boxShadow,hoverBackground:t.hoverBackground,hoverColor:t.hoverColor,hoverBorderColor:t.hoverBorderColor,hoverShadow:t.hoverShadow}),a.contentEditable="true",a.spellcheck=!1,a.addEventListener("focus",()=>{"Clique Aqui"===a.textContent&&(a.textContent=""),a.style.cursor="text"}),a.addEventListener("blur",()=>{""===a.textContent?.trim()&&(a.textContent="Clique Aqui"),a.style.cursor="pointer"}),a.addEventListener("keydown",c=>{"Enter"===c.key&&(c.preventDefault(),a.blur())}),a.addEventListener("click",c=>{document.activeElement===a&&(c.preventDefault(),c.stopPropagation())});const d=document.createElement("div");return d.classList.add("pb-button-container"),d.style.textAlign=t.align||"center",d.style.background=t.containerBackground||"transparent",t.marginTop&&(d.style.marginTop=t.marginTop),t.marginBottom&&(d.style.marginBottom=t.marginBottom),d.appendChild(a),d},divider:()=>{const a=document.createElement("hr");a.classList.add("pb-basic-divider"),a.style.border="none";const i=t.height||"10px";a.style.borderTop=`${i} ${t.style||"solid"} ${t.color||"#3b89b5"}`;const c=t.blockHeight||t.minHeight||t.physicalHeight;let p=null;"number"==typeof c?p=`${c}px`:"string"==typeof c&&c.trim().length&&(p=c),p||(p="number"==typeof i?`${i}px`:i||"10px"),p||(p="10px"),a.style.minHeight=p,a.style.height=p,this.parseMarginValues("string"==typeof t.margin?t.margin:void 0);const u=t.marginTop||"0",b=t.marginBottom||"0",h=t.align||"center";return a.setAttribute("data-align",h),a.style.width=t.width||"100%",this.setDividerLayout(a,h,u,b),a},spacer:()=>{const a=document.createElement("div");a.classList.add("pb-basic-spacer"),a.style.height=t.height||"50px",a.style.background=t.background||"transparent";const s=void 0===t.pattern||!!t.pattern;a.dataset.pattern=s?"true":"false",a.style.backgroundImage=s?this.getSpacerPattern():"none";const d=t.marginTop||"0px",c=t.marginBottom||"0px";return a.style.marginTop=d,a.style.marginBottom=c,a.style.marginLeft="0",a.style.marginRight="0",a.style.margin=`${d} 0 ${c}`,a},section:()=>{const a=document.createElement("section");a.className="pb-droppable-section pb-element pb-element-wrapper",a.setAttribute("data-container-type","section"),a.setAttribute("data-element-type","section"),a.style.padding=t.padding||"0",a.style.background=t.background||"transparent",a.style.minHeight="50px",a.style.position="relative",a.style.border="none",a.style.pointerEvents="auto";const i=document.createElement("div");return i.className="pb-drop-placeholder",i.style.cssText="color: #9ca3af; text-align: center; padding: 20px; pointer-events: none;",i.textContent="Arraste um Container ou elementos aqui",a.appendChild(i),a.dataset.placeholderText="Arraste um Container ou elementos aqui",a.addEventListener("click",s=>{s.stopPropagation(),this.selectElement(a)}),this.makeDroppable(a,["container","heading","text","image","button","divider","spacer","columns","advanced-component"]),a.setAttribute("data-depth",t.depth||0),this.updateContainerLikePlaceholder(a),a},container:()=>{const a=document.createElement("div");a.className="pb-droppable-container pb-element pb-element-wrapper",a.setAttribute("data-container-type","container"),a.setAttribute("data-element-type","container"),a.style.maxWidth=t.maxWidth||"1200px",a.style.margin="0 auto",a.style.padding=t.padding||"0",a.style.border="none",a.style.minHeight="50px",a.style.position="relative",a.style.pointerEvents="auto",a.style.background=t.background||"transparent";const i=document.createElement("div");return i.className="pb-drop-placeholder",i.style.cssText="color: #9ca3af; text-align: center; padding: 20px; pointer-events: none;",i.textContent="Arraste Colunas, Se\xe7\xf5es ou elementos aqui",a.appendChild(i),a.dataset.placeholderText="Arraste Colunas, Se\xe7\xf5es ou elementos aqui",a.addEventListener("click",s=>{s.stopPropagation(),this.selectElement(a)}),this.makeDroppable(a,["section","columns","heading","text","image","button","divider","spacer","advanced-component"]),a.setAttribute("data-depth",t.depth||0),this.updateContainerLikePlaceholder(a),a},columns:()=>{const a=parseInt(t.columns)||2,i=document.createElement("div");i.className="pb-columns-wrapper pb-element-wrapper",i.setAttribute("data-columns-count",a.toString()),i.style.position="relative",i.style.background=t.background||"transparent";const s=document.createElement("div");s.className="pb-columns-container",s.style.display="flex",s.style.gap=t.gap||"20px",s.style.width="100%",s.style.background="transparent";for(let d=0;d<a;d++){const c=this.createColumn(d+1,t);s.appendChild(c)}return i.appendChild(s),i.setAttribute("data-depth",t.depth||0),this.refreshColumnsWrapperStructure(i),i},video:()=>{const a=document.createElement("div");return a.style.background=t.background||"transparent",a.style.padding="60px 20px",a.style.textAlign="center",a.style.color="#9ca3af",a.style.borderRadius="8px",a.style.border="2px dashed #e5e7eb",a.innerHTML="\u25b6 Adicionar URL do v\xeddeo",a},gallery:()=>{const a=document.createElement("div");return a.style.display="grid",a.style.gridTemplateColumns=`repeat(${t.columns||3}, 1fr)`,a.style.gap=t.gap||"15px",a.style.background=t.background||"transparent",(t.images||["https://via.placeholder.com/300?text=1","https://via.placeholder.com/300?text=2","https://via.placeholder.com/300?text=3"]).forEach(s=>{const d=document.createElement("img");d.src=s,d.style.width="100%",d.style.height="200px",d.style.objectFit="cover",d.style.borderRadius="4px",a.appendChild(d)}),a},"imagem-clicavel":()=>{const a=document.createElement("div");a.className="imagem-clicavel-wrapper pb-element-wrapper pb-element",a.style.display="inline-block",a.style.width=t.largura||"100%",a.style.maxWidth=t.maxLargura||"400px",a.style.boxSizing="border-box",a.setAttribute("data-element-type","imagem-clicavel"),a.setAttribute("data-container-type","imagem-clicavel"),a.setAttribute("data-component-props",JSON.stringify(t));const i=document.createElement("div");i.className="imagem-clicavel-preview",i.style.position="relative",i.style.background="#f5f5f5",i.style.border="2px dashed #ddd",i.style.borderRadius=t.borderRadius||"8px",i.style.overflow="hidden",i.style.cursor="pointer",i.style.transition="all 0.3s ease",i.style.minHeight="200px",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center";const s=document.createElement("img");s.className="imagem-clicavel",s.src=t.imagemUrl||"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAADUlEQVR42mNk+M9QDwADhgGAWjR9awAAAABJRU5ErkJggg==",s.alt=t.altText||"Imagem",s.setAttribute("data-link",t.linkUrl||"https://example.com"),s.setAttribute("data-target",t.abrirEm||"_blank"),s.style.width="100%",s.style.height="auto",s.style.display=t.imagemUrl?"block":"none",s.style.transition="transform 0.3s ease, filter 0.3s ease",s.style.filter="brightness(1)",s.style.objectFit="contain";const d=document.createElement("div");d.className="imagem-clicavel-placeholder",d.style.position="absolute",d.style.top="0",d.style.left="0",d.style.right="0",d.style.bottom="0",d.style.width="100%",d.style.height="100%",d.style.display="flex",d.style.flexDirection="column",d.style.alignItems="center",d.style.justifyContent="center",d.style.background="transparent",d.style.transition="all 0.3s ease",d.style.opacity=t.imagemUrl?"0":"1",d.style.pointerEvents=t.imagemUrl?"none":"auto";const c=document.createElement("div");c.style.fontSize="48px",c.style.marginBottom="12px",c.textContent="\u{1f5bc}\ufe0f";const p=document.createElement("span");p.style.fontSize="14px",p.style.color="#999",p.style.fontWeight="500",p.style.textAlign="center",p.textContent="Clique para adicionar imagem",d.appendChild(c),d.appendChild(p);const g=document.createElement("div");g.className="imagem-clicavel-icon",g.style.position="absolute",g.style.top="50%",g.style.left="50%",g.style.transform="translate(-50%, -50%)",g.style.fontSize="32px",g.style.opacity="0",g.style.transition="opacity 0.3s ease",g.style.pointerEvents="none",g.style.zIndex="10",g.style.background="rgba(0, 0, 0, 0.6)",g.style.width="60px",g.style.height="60px",g.style.borderRadius="50%",g.style.display="flex",g.style.alignItems="center",g.style.justifyContent="center",g.textContent="\u270f\ufe0f",i.appendChild(s),i.appendChild(d),i.appendChild(g),a.appendChild(i);const u=document.createElement("div");u.className="pb-droppable-container imagem-clicavel-children",u.style.marginTop="10px",u.style.minHeight="50px",u.style.padding="10px",u.style.backgroundColor="#fafafa",u.style.border="1px dashed #e0e0e0",u.style.borderRadius="4px";const b=document.createElement("div");return b.className="pb-drop-placeholder",b.style.color="#999",b.style.textAlign="center",b.style.padding="20px",b.style.pointerEvents="none",b.textContent="Arraste elementos aqui (abaixo da imagem)",u.appendChild(b),a.appendChild(u),s.setAttribute("data-image-widget","true"),this.makeDroppable(u,["heading","text","image","button","divider","spacer","video"]),a},accordion:()=>this.buildBasicAccordionElement(t)},n="accordion"===e?void 0:this.advancedComponentsService.getComponentById(e);if(n&&n.active&&n.available)return this.createAdvancedComponentElement(n,t);const r=o[e];return r?r():document.createElement("div")}createAdvancedComponentElement(e,t={}){const o=document.createElement("div");o.className="advanced-component-container",o.setAttribute("data-component-id",e.id),o.setAttribute("data-advanced-component","true"),o.style.background="transparent";let n={...e.defaultProps,...t};try{if(!t||0===Object.keys(t).length){const s=document.querySelector(e.selector);if(s&&"hero-section"===e.id){const d=s.querySelector(".hero-title"),c=s.querySelector(".hero-subtitle"),p=s.querySelector(".breadcrumb-active"),g=s.querySelector(".breadcrumb-item"),u=s.getAttribute("style")||"";let b="";const h=u.match(/background(?:-image)?\s*:\s*url\(['"]?(.*?)['"]?\)/i);h&&h[1]&&(b=h[1]);const f={};d&&(f.titulo=d.textContent||""),c&&(f.subtitulo=c.textContent||""),p&&(f.breadcrumbAtivo=p.textContent||""),g&&(f.breadcrumbItem=g.textContent||""),b&&(f.imagemFundo=b),n={...n,...f},n=this.applyAdvancedComponentNormalizers(e.id,n);const m=document.createElement("div");return m.className="advanced-component-preview",m.style.padding="0",m.style.background="transparent",m.style.border="none",m.style.borderRadius="0",m.style.minHeight="100px",m.innerHTML=s.outerHTML,o.appendChild(m),o.setAttribute("data-component-props",JSON.stringify(n)),o.addEventListener("click",x=>{x.stopPropagation(),this.selectAdvancedComponent(o,e)}),this.extensionsService.setupInlineEditing(o,e.id,e),this.applyAdvancedContainerStyles(o,n),o}}}catch(i){console.warn("Erro ao tentar preservar HTML existente para componente avan\xe7ado:",i)}n=this.applyAdvancedComponentNormalizers(e.id,n);const r=document.createElement("div");r.className="advanced-component-preview",r.style.padding="0",r.style.background="transparent",r.style.border="none",r.style.borderRadius="0",r.style.minHeight="100px";const a=this.extensionsService.renderComponent(e.id,n);a?(r.innerHTML=a,this.hydrateAdvancedComponentPreview(r,e.id)):r.innerHTML=`\n        <div style="text-align: center; color: #6b7280;">\n          <span style="font-size: 32px; display: block; margin-bottom: 10px;">${e.icon}</span>\n          <h3 style="font-size: 18px; font-weight: 600; margin-bottom: 5px;">${e.name}</h3>\n          <p style="font-size: 14px;">${e.description||"Componente avan\xe7ado"}</p>\n        </div>\n      `,o.appendChild(r),o.setAttribute("data-component-props",JSON.stringify(n)),this.applyAdvancedContainerStyles(o,n);try{let i=null;const s=()=>{if(o.isConnected)try{const p=this.safeParseJSON(o.getAttribute("data-component-props"))||{},g=this.extractElementStyles(o),u=o.closest(".pb-element"),b=u?this.extractElementStyles(u):{};let h={};const f=o.querySelector('[data-spacing-target="true"]');if(f)h=this.extractElementStyles(f);else{const C=Array.from(o.children).find(v=>{try{const M=v.style;return!(!M||!(M.padding||M.margin||M.marginTop||M.marginBottom||M.paddingTop||M.paddingBottom))}catch{return!1}});C&&(h=this.extractElementStyles(C))}const m={...p,...b,...g,...h},x=this.applyAdvancedComponentNormalizers(e.id,m);try{o.querySelectorAll("[data-prop]").forEach(v=>{const M=v.getAttribute("data-prop");if(!M)return;let B="";B="img"===v.tagName.toLowerCase()?v.getAttribute("src")||"":void 0!==v.value&&"input"===v.tagName.toLowerCase()?v.value:v.textContent?.trim()??"",m[M]=B})}catch{}o.setAttribute("data-component-props",JSON.stringify(x)),this.saveState()}catch(p){console.warn("Erro ao sincronizar mudan\xe7as do componente avan\xe7ado:",p)}},d=new MutationObserver(p=>{i&&clearTimeout(i),i=setTimeout(()=>{s()},250)});d.observe(o,{attributes:!0,attributeFilter:["style","class","src"],subtree:!0,childList:!0,characterData:!0});const c=setInterval(()=>{if(!o.isConnected){try{d.disconnect()}catch{}clearInterval(c)}},2e3)}catch(i){console.warn("N\xe3o foi poss\xedvel inicializar observer para componente avan\xe7ado:",i)}return o.addEventListener("click",i=>{i.stopPropagation(),this.selectAdvancedComponent(o,e)}),this.extensionsService.setupInlineEditing(o,e.id,e),this.setupInlineEditingForAdvanced(o,e),"titulo-texto-pagina"===e.id&&this.setupInlineEditingForTituloTexto(o,e),"mvv-cards"===e.id&&this.setupInlineEditingForMvvCards(o,e),"cta-section"===e.id&&this.setupInlineEditingForCtaSection(o,e),"accordion"===e.id&&this.setupAccordionDropZones(o),o}setupInlineEditingForAdvanced(e,t){e.querySelectorAll('[contenteditable="true"][data-prop]').forEach(n=>{const r=n,a=r.getAttribute("data-prop");a&&"true"!==r.dataset.pbInlineBound&&(r.dataset.pbInlineBound="true",r.addEventListener("blur",()=>{const i=r.textContent?.trim()??"";this.updateAdvancedComponentProp(e,t,a,i)}),r.addEventListener("keydown",i=>{if("Enter"!==i.key||i.shiftKey){if("Escape"===i.key){i.preventDefault();const s=e.getAttribute("data-component-props")||"{}",d=this.safeParseJSON(s);r.textContent=d[a]||"",r.blur()}}else i.preventDefault(),r.blur()}),r.addEventListener("focus",()=>{r.style.backgroundColor="rgba(99, 102, 241, 0.08)",r.style.borderRadius="2px"}),r.addEventListener("blur",()=>{r.style.backgroundColor="transparent"}),r.addEventListener("click",i=>i.stopPropagation()))})}setupInlineEditingForTituloTexto(e,t){e.querySelectorAll('[contenteditable="true"]').forEach(n=>{const r=n,a=r.getAttribute("data-prop");a&&(r.addEventListener("blur",()=>{const i=r.textContent?.trim()||"";this.updateAdvancedComponentProp(e,t,a,i)}),r.addEventListener("keydown",i=>{if("Enter"!==i.key||i.shiftKey){if("Escape"===i.key){i.preventDefault();const s=e.getAttribute("data-component-props")||"{}",d=JSON.parse(s);r.textContent=d[a]||"",r.blur()}}else i.preventDefault(),r.blur()}),r.addEventListener("focus",()=>{r.style.backgroundColor="rgba(99, 102, 241, 0.1)",r.style.borderRadius="2px"}),r.addEventListener("blur",()=>{r.style.backgroundColor="transparent"}),r.addEventListener("click",i=>{i.stopPropagation()}))})}setupInlineEditingForMvvCards(e,t){e.querySelectorAll('[contenteditable="true"]').forEach(n=>{const r=n,a=r.getAttribute("data-card-index"),i=r.getAttribute("data-prop");if(null===a||!i)return;const s=parseInt(a,10);r.addEventListener("blur",()=>{const d=r.textContent?.trim()||"";this.updateMvvCardProp(e,t,s,i,d)}),r.addEventListener("keydown",d=>{if("Enter"!==d.key||d.shiftKey){if("Escape"===d.key){d.preventDefault();const c=e.getAttribute("data-component-props")||"{}",p=JSON.parse(c);p.cards&&p.cards[s]&&(r.textContent=p.cards[s][i]||""),r.blur()}}else d.preventDefault(),r.blur()}),r.addEventListener("focus",()=>{r.style.backgroundColor="rgba(99, 102, 241, 0.1)",r.style.borderRadius="4px",r.style.padding="4px 8px"}),r.addEventListener("blur",()=>{r.style.backgroundColor="transparent",r.style.padding="0"}),r.addEventListener("click",d=>{d.stopPropagation()})})}updateMvvCardProp(e,t,o,n,r){const a=e.getAttribute("data-component-props")||"{}",i=JSON.parse(a);i[`card${o+1}_${n}`]=r,e.setAttribute("data-component-props",JSON.stringify(i)),this.rerenderAdvancedComponentPreview(e,t.id,i,t),this.saveState()}setupInlineEditingForCtaSection(e,t){e.querySelectorAll('[contenteditable="true"]').forEach(n=>{const r=n,a=r.getAttribute("data-prop");a&&(r.addEventListener("blur",()=>{const i=r.textContent?.trim()||"";this.updateAdvancedComponentProp(e,t,a,i)}),r.addEventListener("keydown",i=>{if("Enter"!==i.key||i.shiftKey){if("Escape"===i.key){i.preventDefault();const s=e.getAttribute("data-component-props")||"{}",d=JSON.parse(s);r.textContent=d[a]||"",r.blur()}}else i.preventDefault(),r.blur()}),r.addEventListener("focus",()=>{r.style.backgroundColor="rgba(255, 255, 255, 0.2)",r.style.borderRadius="4px",r.style.padding="4px 8px"}),r.addEventListener("blur",()=>{r.style.backgroundColor="transparent",r.style.padding="0"}),r.addEventListener("click",i=>{i.stopPropagation()}))})}rerenderAdvancedComponentPreview(e,t,o,n,r={}){if(!this.isPreviewMode&&!r.forceRender)return;const i=e.querySelector(".advanced-component-preview");if(!i)return;const s=this.applyAdvancedComponentNormalizers(t,o),d=this.extensionsService.renderComponent(t,s);d&&(i.innerHTML=d,this.hydrateAdvancedComponentPreview(i,t),n&&!r.skipInlineSetup&&(this.extensionsService.setupInlineEditing(e,t,n),this.setupInlineEditingForAdvanced(e,n),"titulo-texto-pagina"===n.id?this.setupInlineEditingForTituloTexto(e,n):"mvv-cards"===n.id?this.setupInlineEditingForMvvCards(e,n):"cta-section"===n.id&&this.setupInlineEditingForCtaSection(e,n)))}hydrateAdvancedComponentPreview(e,t){if(e&&t)try{const o=e,n=this.extensionsService.getExtensionForComponent(t);n&&"function"==typeof n.hydrateAdvancedComponents&&n.hydrateAdvancedComponents(o,!0)}catch(o){console.warn("[PageBuilder] Falha ao hidratar preview do componente",t,o)}}setupAccordionDropZones(e){const t=e.querySelectorAll(".accordion-content-inner.pb-droppable-section");0!==t.length&&t.forEach((o,n)=>{o.getAttribute("data-droppable")||this.makeDroppable(o,["heading","text","image","button","divider","spacer","video","imagem-clicavel","advanced-component"])})}buildBasicAccordionElement(e={}){const t=document.createElement("div");t.className="pb-element pb-element-wrapper pb-element-accordion",t.setAttribute("data-element-type","accordion"),t.setAttribute("data-accordion-basic","true");const o=document.createElement("div");o.className="pb-basic-accordion",o.setAttribute("data-allow-multiple",e.allowMultiple?"true":"false"),this.ensureAccordionHasOpenItem(Array.isArray(e.items)&&e.items.length?e.items:this.getDefaultAccordionItems()).forEach((a,i)=>{const s=this.createAccordionItemElement({id:a.id,title:a.title,open:a.open??0===i});o.appendChild(s)});const r=this.createAccordionAddButton(o);return o.appendChild(r),t.appendChild(o),this.setupAccordionDropZones(t),t}createAccordionItemElement(e={}){const t=e.id||this.generateAccordionItemId(),o=document.createElement("div");o.className="accordion-item",o.setAttribute("data-item-id",t);const n=document.createElement("div");n.className="accordion-header",n.setAttribute("role","button"),n.setAttribute("tabindex","0");const r=document.createElement("div");r.className="accordion-header-main";const a=document.createElement("span");a.className="accordion-icon",a.textContent="+";const i=document.createElement("span");i.className="accordion-title",i.contentEditable="true",i.spellcheck=!1,i.setAttribute("data-placeholder","T\xedtulo do item"),i.textContent=e.title||"Novo item",i.addEventListener("click",b=>b.stopPropagation()),i.addEventListener("keydown",b=>{"Enter"===b.key&&(b.preventDefault(),i.blur())}),i.addEventListener("blur",()=>{(!i.textContent||!i.textContent.trim())&&(i.textContent="Novo item"),this.saveState()});const s=document.createElement("div");s.className="accordion-header-actions";const d=document.createElement("button");d.type="button",d.className="accordion-delete-btn",d.title="Remover item",d.innerHTML="\u2715",d.addEventListener("click",b=>{b.preventDefault(),b.stopPropagation(),this.removeBasicAccordionItem(o)}),s.appendChild(d),r.appendChild(a),r.appendChild(i),n.appendChild(r),n.appendChild(s),n.addEventListener("click",b=>{b.preventDefault(),b.stopPropagation(),!b.target.closest(".accordion-header-actions")&&(b.target.closest(".accordion-title")||this.toggleAccordionItem(o))}),n.addEventListener("keydown",b=>{("Enter"===b.key||" "===b.key)&&(b.preventDefault(),this.toggleAccordionItem(o))});const c=document.createElement("div");c.className="accordion-content";const p=document.createElement("div");p.className="accordion-content-inner pb-droppable-section",p.setAttribute("data-item-id",t);const g=this.createAccordionPlaceholder();return p.appendChild(g),c.appendChild(p),o.appendChild(n),o.appendChild(c),this.makeDroppable(p,["heading","text","image","button","divider","spacer","video","imagem-clicavel","advanced-component"]),this.setAccordionItemState(o,"boolean"!=typeof e.open||e.open),o}createAccordionPlaceholder(){const e=document.createElement("div");return e.className="pb-drop-placeholder",e.textContent="Arraste widgets aqui",e.style.color="#94a3b8",e.style.textAlign="center",e.style.padding="12px",e.style.border="1px dashed #cbd5e1",e.style.borderRadius="6px",e.style.background="#f8fafc",e.style.fontSize="13px",e.style.pointerEvents="none",e}ensureAccordionHasOpenItem(e){return!Array.isArray(e)||!e.length||e.some(o=>o.open)||(e[0].open=!0),e}createAccordionAddButton(e){const t=document.createElement("button");return t.type="button",t.className="accordion-add-btn",t.innerHTML='<span class="add-icon">+</span><span>Adicionar item</span>',t.addEventListener("click",o=>{o.preventDefault(),o.stopPropagation();const n=this.createAccordionItemElement({title:`Item ${this.getAccordionItemCount(e)+1}`,open:!0});e.insertBefore(n,t),e.querySelectorAll(".accordion-item").forEach(r=>{r!==n&&this.setAccordionItemState(r,!1)}),this.saveState()}),t}getAccordionItemCount(e){return e.querySelectorAll(".accordion-item").length}toggleAccordionItem(e,t){const o=e.closest(".pb-basic-accordion");if(!o)return;const n=e.classList.contains("open"),r="boolean"==typeof t?t:!n;r&&("true"===o.getAttribute("data-allow-multiple")||o.querySelectorAll(".accordion-item.open").forEach(i=>{i!==e&&this.setAccordionItemState(i,!1)})),this.setAccordionItemState(e,r),this.saveState()}setAccordionItemState(e,t){e.classList.toggle("open",t);const o=e.querySelector(".accordion-header");o&&o.setAttribute("aria-expanded",t?"true":"false");const n=e.querySelector(".accordion-icon");n&&(n.textContent=t?"-":"+");const r=e.querySelector(".accordion-content");r&&r.setAttribute("aria-hidden",t?"false":"true")}removeBasicAccordionItem(e){const t=e.closest(".pb-basic-accordion");if(!t)return;if(t.querySelectorAll(".accordion-item").length<=1)return void this.showNotification("O acorde\xe3o precisa ter ao menos um item.","warning",2e3);const n=e.classList.contains("open");if(e.remove(),n){const r=t.querySelector(".accordion-item");r&&this.setAccordionItemState(r,!0)}this.saveState(),this.showNotification("Item removido do acorde\xe3o.","success",1500)}generateAccordionItemId(){return`accordion-item-${Date.now()}-${Math.random().toString(36).slice(2,8)}`}getDefaultAccordionItems(){return[{id:this.generateAccordionItemId(),title:"Item 1",open:!0},{id:this.generateAccordionItemId(),title:"Item 2",open:!1}]}applyAccordionProps(e,t,o=0){const n=e.querySelector(".pb-basic-accordion");if(!n)return;n.setAttribute("data-allow-multiple",t?.allowMultiple?"true":"false");let r=n.querySelector(".accordion-add-btn");r||(r=this.createAccordionAddButton(n),n.appendChild(r)),Array.from(n.querySelectorAll(".accordion-item")).forEach(s=>s.remove());const a=n.querySelector(".accordion-add-btn");this.ensureAccordionHasOpenItem(Array.isArray(t?.items)&&t.items.length?t.items:this.getDefaultAccordionItems()).forEach((s,d)=>{const c=this.createAccordionItemElement({id:s.id,title:s.title,open:s.open??0===d});if(n.insertBefore(c,a),s.children&&s.children.length){const p=c.querySelector(".accordion-content-inner");if(p){const g=p.querySelector(".pb-drop-placeholder");g?.remove(),this.populateFromLayout(s.children,p,o+1),0===p.querySelectorAll(":scope > .pb-element").length&&g&&p.appendChild(g)}}}),this.setupAccordionDropZones(e)}selectAdvancedComponent(e,t){this.isPreviewMode||(this.selectedElement&&(this.selectedElement.style.outline="none"),this.selectedElement=e,e.style.outline="2px solid #6366f1",this.showAdvancedComponentProperties(e,t))}showAdvancedComponentProperties(e,t){this.propertiesContent.innerHTML="";const o=document.createElement("div");o.className="pb-property-sticky-header",o.style.cssText="\n      position: sticky;\n      top: 0;\n      background: white;\n      z-index: 100;\n      padding: 16px;\n      border-bottom: 2px solid #e5e7eb;\n      margin: -16px -16px 16px -16px;\n    ",o.innerHTML=`\n      <h4 style="color: #6366f1; margin: 0 0 8px 0; font-size: 14px; text-transform: uppercase; font-weight: 600;">\n        ${t.icon} ${t.name}\n      </h4>\n      <p style="color: #6b7280; font-size: 12px; margin: 0;">\n        ${t.description}\n      </p>\n    `,this.propertiesContent.appendChild(o);const n=e.getAttribute("data-component-props")||"{}",r=JSON.parse(n);"image-gallery"===t.id&&this.ensureGalleryVisibleSlots(e,r);const a=r.estilo||"padrao";this.organizarPropriedadesPorCategoria(t,r,a).forEach((s,d)=>{if(0===s.props.length)return;const p=this.createCollapsibleCategory(s.nome,s.icone,0===d,s.props.length),g=p.querySelector(".pb-category-content");s.props.forEach(({prop:u,currentValue:b})=>{const h=this.createPropertyInput(u,b,e,t,a);h&&g.appendChild(h)}),this.propertiesContent.appendChild(p)}),"cards-grid"===t.id&&r.cards&&Array.isArray(r.cards)&&this.addCardsEditingSection(e,t,r.cards),"image-gallery"===t.id&&this.addImageGalleryEditingSection(e,t,r),this.propertiesPanel.classList.add("active")}updateAdvancedComponentProp(e,t,o,n){const r=e.getAttribute("data-component-props")||"{}",a=JSON.parse(r);if(t&&"mvv-cards"===t.id&&"quantidadeCards"===o){const d=Number(n),c=Number.isFinite(d)?Math.min(3,Math.max(1,Math.floor(d))):3;a[o]=c}else a[o]=this.sanitizeAdvancedComponentValue(t?.id,o,n);const i=this.applyAdvancedComponentNormalizers(t?.id,a);e.setAttribute("data-component-props",JSON.stringify(i));const s="feature-card"===t?.id||"mini-cta-card"===t?.id||"titulo-texto-pagina"===t?.id||"video-embed"===t?.id||"image-gallery"===t?.id;this.rerenderAdvancedComponentPreview(e,t?.id||"",i,t,s?{forceRender:!0}:{}),this.saveState()}sanitizeAdvancedComponentValue(e,t,o){if(!e)return o;if("titulo-texto-pagina"===e){if("subtituloSecundario"===t&&"string"==typeof o)return this.normalizeTituloTextoSecondary(o);if("divisorImagemAltura"===t)return this.clampTituloTextoDividerHeight(o)}return o}applyAdvancedComponentNormalizers(e,t){if(!e||!t)return t;let o={...t};return"titulo-texto-pagina"===e&&"string"==typeof o.subtituloSecundario&&(o.subtituloSecundario=this.normalizeTituloTextoSecondary(o.subtituloSecundario)),"hero-section"===e&&(o=this.enforceHeroSectionSpacingRules(o)),o}normalizeTituloTextoSecondary(e){return e?e.replace(/^\s*\|+\s*/,"").trimStart():""}clampTituloTextoDividerHeight(e){const t=Number(e);return Number.isFinite(t)?Math.min(120,Math.max(10,Math.round(t))):25}enforceHeroSectionSpacingRules(e){if(!e)return e;const t={...e};return["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","border","borderRadius","minHeight"].forEach(n=>{Object.prototype.hasOwnProperty.call(t,n)&&delete t[n]}),t}addCardsEditingSection(e,t,o){const n=document.createElement("div");n.className="pb-category-wrapper",n.style.cssText="\n      margin-bottom: 12px;\n      border: 1px solid #e5e7eb;\n      border-radius: 8px;\n      overflow: hidden;\n      background: white;\n    ";const r=document.createElement("div");r.className="pb-category-header",r.style.cssText="\n      padding: 12px 16px;\n      background: linear-gradient(135deg, #f0f9ff 0%, #dbeafe 100%);\n      cursor: pointer;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      user-select: none;\n      transition: background 0.2s ease;\n    ",r.innerHTML=`\n      <div style="display: flex; align-items: center; gap: 8px;">\n        <span style="font-size: 16px;">\u{1f3b4}</span>\n        <strong style="color: #1f2937; font-size: 13px; font-weight: 600;">Cards</strong>\n        <span style="color: #9ca3af; font-size: 11px;">(${o.length})</span>\n      </div>\n      <span class="pb-category-toggle" style="color: #6b7280; font-size: 18px; transition: transform 0.3s ease;">\u25bc</span>\n    `;const a=document.createElement("div");a.className="pb-category-content",a.style.cssText="\n      padding: 16px;\n      max-height: 2000px;\n      overflow: hidden;\n      transition: max-height 0.3s ease, padding 0.3s ease;\n      background: white;\n    ",o.forEach((i,s)=>{const d=document.createElement("div");d.className="pb-card-editor-collapsible",d.style.cssText="\n        margin-bottom: 12px;\n        border: 1px solid #e5e7eb;\n        border-radius: 6px;\n        overflow: hidden;\n        background: #f9fafb;\n      ";const c=document.createElement("div");c.style.cssText="\n        display: flex;\n        justify-content: space-between;\n        align-items: center;\n        padding: 10px 12px;\n        background: linear-gradient(135deg, #fafafa 0%, #f3f4f6 100%);\n        cursor: pointer;\n        user-select: none;\n      ";const p=document.createElement("div");p.style.cssText="display: flex; align-items: center; gap: 10px; flex: 1;";const g=document.createElement("img");g.src=i.imagem||"/assets/images/noticia-principal.jpg",g.alt="Preview",g.style.cssText="width: 40px; height: 40px; object-fit: cover; border-radius: 4px; border: 1px solid #e5e7eb;";const u=document.createElement("div");u.style.cssText="flex: 1; min-width: 0;",u.innerHTML=`\n        <div style="font-weight: 600; color: #3b89b5; font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">\n          ${i.titulo||"T\xedtulo"}\n        </div>\n        <div style="color: #9ca3af; font-size: 11px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">\n          ${i.descricao?i.descricao.substring(0,40)+"...":"Descri\xe7\xe3o"}\n        </div>\n      `;const b=document.createElement("div");b.style.cssText="display: flex; gap: 4px; align-items: center;";const h=document.createElement("button");h.className="pb-btn-remove-card",h.dataset.cardId=i.id,h.textContent="\u{1f5d1}\ufe0f",h.style.cssText="\n        background: #ef4444;\n        color: white;\n        border: none;\n        padding: 4px 8px;\n        border-radius: 4px;\n        cursor: pointer;\n        font-size: 12px;\n        transition: background 0.2s ease;\n      ",h.addEventListener("mouseenter",()=>{h.style.backgroundColor="#dc2626"}),h.addEventListener("mouseleave",()=>{h.style.backgroundColor="#ef4444"});const f=document.createElement("span");f.className="pb-card-toggle",f.textContent="\u25bc",f.style.cssText="color: #6b7280; font-size: 14px; transition: transform 0.3s ease; margin-left: 4px;",b.appendChild(h),b.appendChild(f),p.appendChild(g),p.appendChild(u),c.appendChild(p),c.appendChild(b);const m=document.createElement("div");m.className="pb-card-inputs",m.style.cssText="\n        padding: 12px;\n        max-height: 500px;\n        overflow: hidden;\n        transition: max-height 0.3s ease, padding 0.3s ease;\n        background: white;\n      ",m.appendChild(this.createTextInput("T\xedtulo",i.titulo||"T\xedtulo","",x=>this.updateCardProp(e,t,i.id,"titulo",x))),m.appendChild(this.createTextArea("Descri\xe7\xe3o",i.descricao||"","",x=>this.updateCardProp(e,t,i.id,"descricao",x))),m.appendChild(this.createTextInputWithImageLibrary("Imagem",i.imagem||"/assets/images/noticia-principal.jpg","URL da imagem do card",x=>{this.updateCardProp(e,t,i.id,"imagem",x),g.src=x})),m.appendChild(this.createTextInput("Link",i.link||"#","URL de destino",x=>this.updateCardProp(e,t,i.id,"link",x))),m.appendChild(this.createTextInput("Texto do Bot\xe3o",i.textoBotao||"Confira mais","",x=>this.updateCardProp(e,t,i.id,"textoBotao",x))),d.appendChild(c),d.appendChild(m),a.appendChild(d),c.addEventListener("click",x=>{x.target.closest(".pb-btn-remove-card")||("0px"!==m.style.maxHeight?(m.style.maxHeight="0",m.style.padding="0 12px",f.textContent="\u25b6"):(m.style.maxHeight="500px",m.style.padding="12px",f.textContent="\u25bc"))}),h.addEventListener("click",x=>{x.stopPropagation();const C=e.querySelector(`[data-card-id="${i.id}"]`);C&&this.removeCardFromGrid(e,t,C)})}),n.appendChild(r),n.appendChild(a),this.propertiesContent.appendChild(n),r.addEventListener("click",()=>{const i="0px"!==a.style.maxHeight,s=r.querySelector(".pb-category-toggle");i?(a.style.maxHeight="0",a.style.padding="0 16px",s.textContent="\u25b6"):(a.style.maxHeight="2000px",a.style.padding="16px",s.textContent="\u25bc")}),r.addEventListener("mouseenter",()=>{r.style.background="linear-gradient(135deg, #dbeafe 0%, #bfdbfe 100%)"}),r.addEventListener("mouseleave",()=>{r.style.background="linear-gradient(135deg, #f0f9ff 0%, #dbeafe 100%)"})}addImageGalleryEditingSection(e,t,o){const n=this.getGalleryVisibleSlots(e,o),r=document.createElement("div");r.className="pb-category-wrapper",r.style.cssText="\n      margin-bottom: 12px;\n      border: 1px solid #e5e7eb;\n      border-radius: 8px;\n      overflow: hidden;\n      background: white;\n    ";const a=document.createElement("div");a.className="pb-category-header",a.style.cssText="\n      padding: 12px 16px;\n      background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%);\n      cursor: pointer;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      user-select: none;\n      transition: background 0.2s ease;\n    ",a.innerHTML=`\n      <div style="display: flex; align-items: center; gap: 8px;">\n        <span style="font-size: 16px;">\u{1f5bc}\ufe0f</span>\n        <strong style="color: #1f2937; font-size: 13px; font-weight: 600;">Imagens da galeria</strong>\n        <span style="color: #9ca3af; font-size: 11px;">(${n.length}/${this.galleryMaxSlots})</span>\n      </div>\n      <span class="pb-category-toggle" style="color: #6b7280; font-size: 18px; transition: transform 0.3s ease;">\u25bc</span>\n    `;const i=document.createElement("div");i.className="pb-category-content",i.style.cssText="\n      padding: 16px;\n      max-height: 2000px;\n      overflow: hidden;\n      transition: max-height 0.3s ease, padding 0.3s ease;\n      background: white;\n    ";const s=document.createElement("div");s.style.cssText="display: flex; flex-direction: column; gap: 12px;",n.forEach(p=>{s.appendChild(this.createGalleryImageCard(e,t,o,p,n.length))});const d=document.createElement("div");d.style.cssText="display: flex; justify-content: flex-end; margin-top: 12px;";const c=document.createElement("button");c.type="button",c.textContent=n.length>=this.galleryMaxSlots?"Limite atingido":"Adicionar imagem",c.disabled=n.length>=this.galleryMaxSlots,c.style.cssText=`\n      padding: 10px 18px;\n      border-radius: 999px;\n      border: none;\n      background: ${c.disabled?"#e5e7eb":"linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%)"};\n      color: ${c.disabled?"#9ca3af":"#fff"};\n      font-weight: 600;\n      cursor: ${c.disabled?"not-allowed":"pointer"};\n      transition: transform 0.2s ease;\n    `,c.disabled||(c.addEventListener("mouseenter",()=>c.style.transform="scale(1.03)"),c.addEventListener("mouseleave",()=>c.style.transform="scale(1)")),c.addEventListener("click",p=>{p.preventDefault(),c.disabled||this.addGalleryImageSlot(e,t)}),d.appendChild(c),i.appendChild(s),i.appendChild(d),r.appendChild(a),r.appendChild(i),this.propertiesContent.appendChild(r),a.addEventListener("click",()=>{const p="0px"!==i.style.maxHeight,g=a.querySelector(".pb-category-toggle");p?(i.style.maxHeight="0",i.style.padding="0 16px",g.textContent="\u25b6"):(i.style.maxHeight="2000px",i.style.padding="16px",g.textContent="\u25bc")}),a.addEventListener("mouseenter",()=>{a.style.background="linear-gradient(135deg, #f9a8d4 0%, #f472b6 100%)"}),a.addEventListener("mouseleave",()=>{a.style.background="linear-gradient(135deg, #fdf2f8 0%, #fce7f3 100%)"})}createGalleryImageCard(e,t,o,n,r){const a=this.getGallerySlotData(o,n),i=document.createElement("div");i.className="pb-gallery-card",i.dataset.gallerySlot=String(n),i.style.cssText="\n      border: 1px solid #e5e7eb;\n      border-radius: 10px;\n      padding: 14px;\n      background: #f9fafb;\n      box-shadow: inset 0 1px 0 rgba(255, 255, 255, 0.6);\n    ";const s=document.createElement("div");s.style.cssText="display: flex; justify-content: space-between; align-items: center; margin-bottom: 12px;";const d=document.createElement("div");d.style.cssText="font-weight: 600; color: #475569; font-size: 13px; text-transform: uppercase; letter-spacing: 0.04em;",d.textContent=`Imagem ${n}`;const c=document.createElement("div");if(c.style.cssText="display: flex; gap: 6px;",r>1){const h=document.createElement("button");h.type="button",h.textContent="Remover",h.style.cssText="\n        border: none;\n        background: #fee2e2;\n        color: #b91c1c;\n        padding: 4px 10px;\n        border-radius: 999px;\n        font-size: 12px;\n        cursor: pointer;\n      ",h.addEventListener("click",f=>{f.preventDefault(),this.removeGalleryImageSlot(e,t,n)}),c.appendChild(h)}s.appendChild(d),s.appendChild(c);const p=document.createElement("div");p.className="pb-gallery-thumb",p.style.cssText="\n      width: 100%;\n      aspect-ratio: 4 / 3;\n      border-radius: 8px;\n      border: 1px dashed #cbd5f5;\n      background-size: cover;\n      background-position: center;\n      background-color: #e2e8f0;\n      margin-bottom: 12px;\n      position: relative;\n      overflow: hidden;\n    ";const g=document.createElement("span");g.textContent="Sem imagem",g.style.cssText="\n      position: absolute;\n      inset: 0;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n      font-size: 12px;\n      color: #94a3b8;\n      background: rgba(255,255,255,0.75);\n    ",p.appendChild(g);const u=h=>{const f=(h||"").trim();if(f){const m=f.replace(/"/g,'"');p.style.backgroundImage=`url("${m}")`,g.style.display="none"}else p.style.backgroundImage="none",g.style.display="flex"};u(a.url);const b=document.createElement("div");return b.style.cssText="display: flex; flex-direction: column; gap: 8px;",b.appendChild(this.createTextInputWithImageLibrary("Arquivo da imagem",a.url,"Cole ou selecione uma imagem",h=>{u(h),this.handleGalleryFieldUpdate(e,t,n,"url",h)})),b.appendChild(this.createTextInput("Texto alternativo",a.alt,"Descri\xe7\xf5es para acessibilidade",h=>this.handleGalleryFieldUpdate(e,t,n,"alt",h))),b.appendChild(this.createTextInput("Legenda",a.legenda,"Texto exibido abaixo da miniatura e no modal",h=>this.handleGalleryFieldUpdate(e,t,n,"legenda",h))),i.appendChild(s),i.appendChild(p),i.appendChild(b),i}handleGalleryFieldUpdate(e,t,o,n,r){this.updateAdvancedComponentProp(e,t,`imagem${o}_${"url"===n?"url":n}`,r)}ensureGalleryVisibleSlots(e,t){if(this.galleryVisibleSlots.has(e))return;const o=[];for(let n=1;n<=this.galleryMaxSlots;n++)this.hasGallerySlotContent(t,n)&&o.push(n);o.length||o.push(1),this.galleryVisibleSlots.set(e,o)}getGalleryVisibleSlots(e,t){return this.galleryVisibleSlots.has(e)||this.ensureGalleryVisibleSlots(e,t||{}),[...this.galleryVisibleSlots.get(e)||[]].sort((n,r)=>n-r)}addGalleryImageSlot(e,t){const o=e.getAttribute("data-component-props")||"{}",n=JSON.parse(o),r=this.getGalleryVisibleSlots(e,n);if(r.length>=this.galleryMaxSlots)return void this.showNotification("Voc\xea j\xe1 atingiu o limite de imagens para esta galeria.","warning",2e3);const a=this.findNextGallerySlot(r),i=[...r,a].sort((s,d)=>s-d);this.galleryVisibleSlots.set(e,i),this.showAdvancedComponentProperties(e,t)}removeGalleryImageSlot(e,t,o){const n=e.getAttribute("data-component-props")||"{}",r=JSON.parse(n),a=this.getGalleryVisibleSlots(e,r);if(a.length<=1)return void this.showNotification("A galeria precisa ter pelo menos uma imagem.","warning",2e3);const i=a.filter(s=>s!==o);this.galleryVisibleSlots.set(e,i),r[`imagem${o}_url`]="",r[`imagem${o}_alt`]="",r[`imagem${o}_legenda`]="",e.setAttribute("data-component-props",JSON.stringify(r)),this.rerenderAdvancedComponentPreview(e,t.id,r,t,{forceRender:!0}),this.saveState(),this.showAdvancedComponentProperties(e,t),this.showNotification("Imagem removida da galeria.","success",1500)}findNextGallerySlot(e){for(let t=1;t<=this.galleryMaxSlots;t++)if(!e.includes(t))return t;return this.galleryMaxSlots}hasGallerySlotContent(e,t){return!!e&&[e[`imagem${t}_url`],e[`imagem${t}_alt`],e[`imagem${t}_legenda`]].some(a=>"string"==typeof a&&a.trim().length>0)}getGallerySlotData(e,t){return{url:e?.[`imagem${t}_url`]||"",alt:e?.[`imagem${t}_alt`]||"",legenda:e?.[`imagem${t}_legenda`]||""}}updateCardProp(e,t,o,n,r){const a=e.getAttribute("data-component-props")||"{}",i=JSON.parse(a);if(!i.cards||!Array.isArray(i.cards))return;const s=i.cards.findIndex(d=>d.id===o);-1!==s&&(i.cards[s][n]=r,e.setAttribute("data-component-props",JSON.stringify(i)),this.rerenderAdvancedComponentPreview(e,t.id,i,t),this.saveState())}preencherDadosExemploTituloTexto(e,t,o){const n=e.getAttribute("data-component-props")||"{}",r=JSON.parse(n);"padrao"===o?(r.textoPrimario="Sobre a",r.textoSecundario="Institui\xe7\xe3o",r.subtitulo="",r.subtituloPrimario="ABRALIMP",r.subtituloSecundario="Associa\xe7\xe3o Brasileira do Mercado de Limpeza Profissional",r.mostrarDivisor=!0):"secundario"===o&&(r.textoPrimario="Corpo",r.textoSecundario="Diretivo",r.subtitulo="Conhe\xe7a",r.subtituloPrimario="",r.subtituloSecundario="",r.mostrarDivisor=!0),e.setAttribute("data-component-props",JSON.stringify(r)),this.rerenderAdvancedComponentPreview(e,t.id,r,t)}renderTituloTextoPaginaPreview(e){const{estilo:t="padrao",textoPrimario:o="Seu T\xedtulo",textoSecundario:n="",subtitulo:r="",subtituloPrimario:a="",subtituloSecundario:i="",mostrarDivisor:s=!0,corFundo:d="transparent"}=e;let c="padrao";"secundario"===t?c="diretoria":(a||i||r)&&(c="noticias");let p="titulo-padrao";"secundario"===t?p="titulo-secundario":r&&!a&&!i&&(p="titulo-noticias");const g=a||i?"subtitulo-sobre":"subtitulo-padrao",b=!!r&&("secundario"===t||"subtitulo-padrao"===g),h=s&&("diretoria"===c||"subtitulo-padrao"===g&&!!r),f=!(!a&&!i)&&"subtitulo-sobre"===g&&"secundario"!==t;let m=`<div class="text-center mb-5" style="font-family: 'Raleway', sans-serif; background: ${d}; padding: 0; border-radius: 8px;">`;return s&&"noticias"===c&&!(!a&&!i)&&(m+=this.getDivisorHTML(c,"secundario"===t?"9px auto 0":"0 auto 0")),b&&(m+=`<p class="${g}" contenteditable="true" data-prop="subtitulo" style="font-weight: 300; font-style: italic; font-size: 20px; color: #0e3a5a; margin: 0; padding-right: 2rem; cursor: text; outline: none;">\n        ${r}\n      </p>`),m+=`<h2 class="${p}" style="font-size: 39px; margin: 0 0 9px 0; line-height: normal;">`,m+=`<span class="texto-primario" contenteditable="true" data-prop="textoPrimario" style="font-weight: 500; color: #3b89b5; cursor: text; outline: none;">${o}</span> `,m+=`<span class="texto-secundario" contenteditable="true" data-prop="textoSecundario" style="font-weight: 700; color: #1f5e85; cursor: text; outline: none;">${n||""}</span>`,m+="</h2>",h&&(m+=this.getDivisorHTML(c,"secundario"===t?"9px auto 0":"0 auto")),f&&(m+=`<h3 class="${g}" style="font-weight: 600; font-size: 20px; color: #0e3a5a; margin: 0 0 30px 0;">`,m+=`<span class="parte-primaria" contenteditable="true" data-prop="subtituloPrimario" style="font-weight: 600; cursor: text; outline: none;">${a}</span>`,m+=`<span class="parte-secundaria" contenteditable="true" data-prop="subtituloSecundario" style="font-weight: 400; cursor: text; outline: none;"> | ${i||""}</span>`,m+="</h3>"),m+="</div>",m}getDivisorHTML(e,t){let o="";return o="diretoria"===e?'\n        <svg preserveAspectRatio="none" width="158" height="25" overflow="visible" style="display: block; margin: 0 auto; transform: rotate(180deg);" viewBox="0 0 158 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M158 25H91.7355C91.7355 25 82.9799 10.105 48.9521 10.7088C14.9244 11.3127 0 25 0 25C0.862301 17.8209 14.7254 2.7743 74.4232 0.242009C134.121 -2.29028 154.086 15.6738 158 25Z" fill="#72B9D8" fill-opacity="0.3"/>\n        </svg>\n      ':"noticias"===e?'\n        <svg preserveAspectRatio="none" width="158" height="25" overflow="visible" style="display: block; margin: 0 auto;" viewBox="0 0 158 25" fill="none" xmlns="http://www.w3.org/2000/svg">\n          <path d="M158 25H91.7355C91.7355 25 82.9799 10.105 48.9521 10.7088C14.9244 11.3127 0 25 0 25C0.862301 17.8209 14.7254 2.7743 74.4232 0.242009C134.121 -2.29028 154.086 15.6738 158 25Z" fill="#72B9D8" fill-opacity="0.3"/>\n        </svg>\n      ':'\n        <svg xmlns="http://www.w3.org/2000/svg" width="158" height="25" viewBox="0 0 158 25" style="display: block; margin: 0 auto;">\n          <path fill="#3b89b5" d="M0 12.5 L158 12.5"/>\n        </svg>\n      ',`<div style="width: 158px; height: 25px; margin: ${t}; display: flex; align-items: center; justify-content: center;">${o}</div>`}createElementWrapper(e,t){if(("columns"===t||"container"===t||"section"===t||"imagem-clicavel"===t||"accordion"===t)&&e.classList.contains("pb-element")){e.id||(e.id=`element-${Date.now()}-${Math.random().toString(36).substr(2,9)}`);const i=this.createElementControls(e,t,e);return e.insertBefore(i,e.firstChild),e.addEventListener("mouseenter",()=>{e.style.outline="2px solid rgba(99, 102, 241, 0.3)";const s=e.querySelector(".pb-element-controls");s&&(s.style.opacity="1",s.style.visibility="visible")}),e.addEventListener("mouseleave",()=>{e!==this.selectedElement&&(e.style.outline="none");const s=e.querySelector(".pb-element-controls");s&&(s.style.opacity="0",s.style.visibility="hidden")}),e.addEventListener("click",s=>{s.stopPropagation(),this.selectElement(e)}),this.setupElementDragDrop(e),e}const o=document.createElement("div");let n=`pb-element pb-element-wrapper pb-element-${t}`;"image"===t&&(n+=" pb-image-wrapper"),o.className=n,o.setAttribute("data-element-type",t),o.id=`element-${Date.now()}-${Math.random().toString(36).substr(2,9)}`;const r=!!this.advancedComponentsService.getComponentById(t);o.style.position="relative",o.style.background="transparent",o.style.transition="all 0.2s ease",r||(o.style.margin="5px 0",o.style.minHeight="50px",o.style.padding="5px",o.style.borderRadius="4px",o.style.border="2px solid transparent");const a=this.createElementControls(o,t,e);return o.appendChild(a),o.appendChild(e),"image"===t?this.addImageResizeHandles(o,e):"spacer"===t?(o.style.padding="0",o.style.minHeight="0",o.style.margin="15px 0",o.classList.add("pb-element-spacer"),this.addSpacerResizeHandle(o,e)):"divider"===t&&(o.style.padding="0",o.style.minHeight="0",o.style.margin="12px 0",o.classList.add("pb-element-divider"),this.addDividerResizeHandle(o,e)),o.addEventListener("mouseenter",()=>{o.style.outline="2px solid rgba(99, 102, 241, 0.3)",a.style.opacity="1",a.style.visibility="visible"}),o.addEventListener("mouseleave",()=>{o!==this.selectedElement&&(o.style.outline="none"),a.style.opacity="0",a.style.visibility="hidden"}),o.addEventListener("click",i=>{const s=i.target;if("IMG"===s.tagName&&("pointer"===s.style.cursor||"true"===s.getAttribute("data-image-widget")))return i.preventDefault(),i.stopPropagation(),i.stopImmediatePropagation(),void this.openImageLibrary(s);i.stopPropagation(),this.selectElement(o)}),this.setupElementDragDrop(o),o}addImageResizeHandles(e,t){const o=document.createElement("div");o.className="pb-image-resize-handles",o.style.position="absolute",o.style.top="0",o.style.left="0",o.style.width="100%",o.style.height="100%",o.style.pointerEvents="none",o.style.opacity="0",o.style.transition="opacity 0.2s",[{name:"nw",cursor:"nwse-resize",top:"0",left:"0",corner:!0},{name:"ne",cursor:"nesw-resize",top:"0",right:"0",corner:!0},{name:"sw",cursor:"nesw-resize",bottom:"0",left:"0",corner:!0},{name:"se",cursor:"nwse-resize",bottom:"0",right:"0",corner:!0},{name:"n",cursor:"ns-resize",top:"0",left:"50%",side:!0},{name:"s",cursor:"ns-resize",bottom:"0",left:"50%",side:!0},{name:"w",cursor:"ew-resize",top:"50%",left:"0",side:!0},{name:"e",cursor:"ew-resize",top:"50%",right:"0",side:!0}].forEach(r=>{const a=document.createElement("div");a.className=`pb-resize-handle pb-resize-${r.name}`,a.style.position="absolute",a.style.background="#667eea",a.style.border="2px solid white",a.style.cursor=r.cursor,a.style.pointerEvents="all",a.style.zIndex="1000",r.corner?(a.style.width="12px",a.style.height="12px",a.style.borderRadius="50%"):"ns-resize"===r.cursor?(a.style.width="30px",a.style.height="6px",a.style.borderRadius="3px",a.style.transform="translateX(-50%)"):(a.style.width="6px",a.style.height="30px",a.style.borderRadius="3px",a.style.transform="translateY(-50%)"),void 0!==r.top&&(a.style.top=r.corner?"-6px":r.top),void 0!==r.bottom&&(a.style.bottom=r.corner?"-6px":r.bottom),void 0!==r.left&&(a.style.left=r.corner?"-6px":r.left),void 0!==r.right&&(a.style.right=r.corner?"-6px":r.right);let i=0,s=0,d=0,c=0,p=0,g=0;a.addEventListener("mousedown",u=>{u.preventDefault(),u.stopPropagation(),i=u.clientX,s=u.clientY,d=t.offsetWidth,c=t.offsetHeight;const b=e.getBoundingClientRect();p=b.top,g=b.left;const h=d/c,f=x=>{const C=x.clientX-i,v=x.clientY-s;let M=d,_=c;switch(r.name){case"se":case"ne":M=d+C,_=M/h;break;case"sw":case"nw":M=d-C,_=M/h;break;case"e":M=d+C,_=c;break;case"w":M=d-C,_=c;break;case"s":M=d,_=c+v;break;case"n":M=d,_=c-v}M=Math.max(50,Math.min(M,1200)),_=Math.max(50,Math.min(_,1200)),t.style.width=`${M}px`,t.style.height=`${_}px`},m=()=>{document.removeEventListener("mousemove",f),document.removeEventListener("mouseup",m),this.saveState()};document.addEventListener("mousemove",f),document.addEventListener("mouseup",m)}),o.appendChild(a)}),e.appendChild(o),e.addEventListener("mouseenter",()=>{o.style.opacity="1"}),e.addEventListener("mouseleave",()=>{o.style.opacity="0"})}addSpacerResizeHandle(e,t){if(!e||!t||e.querySelector(".pb-spacer-resize-handle"))return;e.dataset.spacerEnhanced="true",(!e.style.position||"static"===e.style.position)&&(e.style.position="relative");const o=document.createElement("div");o.className="pb-spacer-resize-handle",o.title="Arraste para ajustar a altura do espa\xe7ador";const n=document.createElement("span");n.textContent="\u2195",o.appendChild(n);let r=0,a=t.offsetHeight||50;const d=p=>{let u=a+(p.clientY-r);u=Math.max(10,Math.min(800,u)),t.style.height=`${u}px`,t.style.minHeight=`${u}px`,t.setAttribute("data-spacer-height",`${u}`)},c=()=>{document.removeEventListener("mousemove",d),document.removeEventListener("mouseup",c),this.saveState(),o.classList.remove("dragging")};o.addEventListener("mousedown",p=>{p.preventDefault(),p.stopPropagation(),r=p.clientY,a=t.offsetHeight||a,o.classList.add("dragging"),document.addEventListener("mousemove",d),document.addEventListener("mouseup",c)}),e.appendChild(o)}addDividerResizeHandle(e,t){if(!e||!t||e.querySelector(".pb-divider-resize-handle"))return;e.dataset.dividerEnhanced="true",(!e.style.position||"static"===e.style.position)&&(e.style.position="relative");const o=document.createElement("div");o.className="pb-divider-resize-handle",o.title="Arraste para ajustar a largura do divisor",o.innerHTML="<span></span>";let n=0,r=t.getBoundingClientRect().width;const s=c=>{const p=c.clientX-n,g=t.parentElement?.getBoundingClientRect().width||t.getBoundingClientRect().width||r;let u=r+p;u=Math.max(30,Math.min(g,u)),t.style.width=g>0?`${(u/g*100).toFixed(2)}%`:`${Math.round(u)}px`},d=()=>{document.removeEventListener("mousemove",s),document.removeEventListener("mouseup",d),this.saveState(),o.classList.remove("dragging")};o.addEventListener("mousedown",c=>{c.preventDefault(),c.stopPropagation(),n=c.clientX,r=t.getBoundingClientRect().width||r,o.classList.add("dragging"),document.addEventListener("mousemove",s),document.addEventListener("mouseup",d)}),e.appendChild(o)}createElementControls(e,t,o){const n=document.createElement("div");if(n.className="pb-element-controls",n.style.position="absolute",n.style.top="-40px",n.style.right="0",n.style.background="#6366f1",n.style.borderRadius="4px",n.style.padding="4px",n.style.display="flex",n.style.gap="4px",n.style.opacity="0",n.style.visibility="hidden",n.style.transition="all 0.2s ease",n.style.zIndex="10",n.style.pointerEvents="auto",e.classList.contains("pb-element-columns")){const g=this.createControlButton("+","Adicionar Coluna");g.style.fontSize="16px",g.style.fontWeight="bold",g.addEventListener("click",h=>{h.stopPropagation(),this.addColumn(e)});const u=this.createControlButton("\u2212","Remover Coluna");u.style.fontSize="16px",u.style.fontWeight="bold",u.addEventListener("click",h=>{h.stopPropagation(),this.removeColumn(e)}),n.appendChild(g),n.appendChild(u);const b=document.createElement("div");b.style.width="1px",b.style.background="rgba(255, 255, 255, 0.5)",b.style.margin="4px 6px",b.style.display="inline-block",n.appendChild(b)}if("image"===t){const g=this.createControlButton("\u{1f5bc}","Trocar Imagem");g.addEventListener("click",b=>{b.stopPropagation();const h=o;console.log("\u{1f3af} Bot\xe3o trocar imagem clicado",h),this.openImageLibrary(h)}),n.appendChild(g);const u=document.createElement("div");u.style.width="1px",u.style.background="rgba(255, 255, 255, 0.5)",u.style.margin="4px 6px",u.style.display="inline-block",n.appendChild(u)}const a=this.createControlButton("\u2191","Mover para cima");a.style.fontWeight="bold",a.style.fontSize="14px",a.addEventListener("click",g=>{g.stopPropagation(),this.moveElementUp(e)});const i=this.createControlButton("\u2193","Mover para baixo");i.style.fontWeight="bold",i.style.fontSize="14px",i.addEventListener("click",g=>{g.stopPropagation(),this.moveElementDown(e)}),n.appendChild(a),n.appendChild(i);const s=document.createElement("div");s.style.width="1px",s.style.background="rgba(255, 255, 255, 0.5)",s.style.margin="4px 6px",s.style.display="inline-block",n.appendChild(s);const d=this.createControlButton("\u270e","Editar Texto");d.addEventListener("click",g=>{g.stopPropagation(),this.editElement(e)});const c=this.createControlButton("\u29c9","Duplicar");c.addEventListener("click",g=>{g.stopPropagation(),this.duplicateElement(e)});const p=this.createControlButton("\u{1f5d1}","Excluir");return p.addEventListener("click",g=>{g.stopPropagation(),this.deleteElement(e)}),n.appendChild(d),n.appendChild(c),n.appendChild(p),n}createControlButton(e,t){const o=document.createElement("button");return o.textContent=e,o.title=t,o.style.background="transparent",o.style.border="none",o.style.color="#fff",o.style.padding="6px 10px",o.style.cursor="pointer",o.style.borderRadius="3px",o.style.fontSize="12px",o.style.transition="background 0.2s ease",o.addEventListener("mouseenter",()=>{o.style.background="rgba(255, 255, 255, 0.2)"}),o.addEventListener("mouseleave",()=>{o.style.background="transparent"}),o}selectElement(e){this.isPreviewMode?console.log("\u26a0\ufe0f Sele\xe7\xe3o bloqueada - Modo preview ativo"):(this.selectedElement&&(this.selectedElement.style.outline="none"),this.selectedElement=e,e.style.outline="2px solid #6366f1",this.showProperties(e),console.log("\u2705 Elemento selecionado:",e.id))}deselectElement(){this.selectedElement&&(this.selectedElement.style.outline="none",this.selectedElement=null,this.hideProperties(),console.log("\u2705 Elemento desselecionado"))}editElement(e){const t=e.querySelector('[contenteditable="true"]');if(t){console.log("\u270f\ufe0f Modo de edi\xe7\xe3o ativado"),t.focus();const o=document.createRange(),n=window.getSelection();o.selectNodeContents(t),n?.removeAllRanges(),n?.addRange(o)}else console.warn("\u26a0\ufe0f Elemento n\xe3o edit\xe1vel")}duplicateElement(e){const t=e.cloneNode(!0);t.id=`element-${Date.now()}-${Math.random().toString(36).substr(2,9)}`,e.parentNode?.insertBefore(t,e.nextSibling),console.log("\u2705 Elemento duplicado"),this.reattachEventListenersToElement(t),this.saveState()}moveElementUp(e){const t=e.previousElementSibling;t&&t.classList.contains("pb-element")?(e.parentNode?.insertBefore(e,t),this.saveState(),this.showNotification("Elemento movido para cima","success",1500),console.log("\u2191 Elemento movido para cima")):this.showNotification("Este \xe9 o primeiro elemento","info",1500)}moveElementDown(e){const t=e.nextElementSibling;t&&t.classList.contains("pb-element")?(e.parentNode?.insertBefore(t,e),this.saveState(),this.showNotification("Elemento movido para baixo","success",1500),console.log("\u2193 Elemento movido para baixo")):this.showNotification("Este \xe9 o \xfaltimo elemento","info",1500)}deleteElement(e){var t=this;return(0,H.A)(function*(){if(yield t.showConfirmModal("Deseja realmente excluir este elemento?","Excluir Elemento")){const n=e.parentElement;e.remove(),t.elements=t.elements.filter(r=>r.id!==e.id),t.checkEmptyState(),t.updateElementCounter(),n?.classList.contains("pb-column")?(t.updateColumnPlaceholder(n),t.scheduleColumnHandlesUpdate()):t.isContainerLikeElement(n)&&t.updateContainerLikePlaceholder(n),t.saveState()}})()}removeEmptyState(){const e=this.canvas.querySelector(".pb-canvas-empty");e&&e.remove()}checkEmptyState(){const e=this.canvas.querySelector(".pb-element"),t=this.canvas.querySelector(".pb-canvas-empty");e?(t&&t.remove(),this.canvas.classList.remove("pb-canvas-empty-active")):(t||(this.canvas.innerHTML='\n          <div class="pb-canvas-empty">\n            <div class="pb-empty-state">\n              <span class="pb-empty-icon">\u{1f3a8}</span>\n              <h3>Comece a criar sua p\xe1gina</h3>\n              <p>Arraste elementos da barra lateral para come\xe7ar</p>\n            </div>\n          </div>\n        '),this.canvas.classList.add("pb-canvas-empty-active"))}makeDroppable(e,t){e.setAttribute("data-droppable","true"),e.setAttribute("data-allowed-types",t.join(","));const o=t.includes("advanced-component");console.log("\u{1f3af} Configurando droppable:",{element:e.className,allowedTypes:t});const a=()=>this.draggedElement?this.draggedElement.getAttribute("data-element-type")||this.getElementType(this.draggedElement):null,i=()=>{const d=!!this.draggedWidgetType,c=this.draggedElement&&this.isDraggingElement?a():null,p=this.isAdvancedWidgetType(c),g=this.isAdvancedWidgetType(this.draggedWidgetType),u={reorder:!!c&&(t.includes(c)||o&&p),widget:d&&!!this.draggedWidgetType&&(t.includes(this.draggedWidgetType)||o&&g)};return d&&!u.widget&&console.log("\u{1f6ab} Widget n\xe3o permitido:",{draggedWidgetType:this.draggedWidgetType,allowedTypes:t,isAllowed:t.includes(this.draggedWidgetType)}),u};e.addEventListener("dragenter",s=>{const{reorder:d,widget:c}=i();d||c?(s.preventDefault(),console.log("\u{1f3af} DRAGENTER aceito:",e.className,{reorder:d,widget:c}),e.classList.add("pb-drop-active")):console.log("\u26a0\ufe0f DRAGENTER rejeitado:",{container:e.className,reorder:d,widget:c,draggedWidgetType:this.draggedWidgetType})},!1),e.addEventListener("dragover",s=>{const d=!!this.draggedElement&&this.isDraggingElement,{reorder:c,widget:p}=i();if(!c&&!p)return e.classList.remove("pb-drop-active"),void this.removeDropIndicators();if(s.preventDefault(),s.dataTransfer&&(s.dataTransfer.dropEffect=d?"move":"copy"),e.classList.add("pb-drop-active"),!d&&!p)return;const g=e.querySelector(".pb-drop-placeholder");g&&(d||p)&&(g.style.display="none")},!1),e.addEventListener("dragleave",s=>{if(s.target===e&&!e.contains(s.relatedTarget)){e.classList.remove("pb-drop-active"),this.removeDropIndicators();const p=e.querySelector(".pb-drop-placeholder"),g=e.querySelectorAll(":scope > .pb-element");p&&0===g.length&&(p.style.display="")}},!0),e.addEventListener("drop",s=>{if(parseInt(e.getAttribute("data-depth")||"0")>=4)return void console.log("\u{1f6ab} Profundidade m\xe1xima atingida (4 n\xedveis)");const c=!!this.draggedElement&&this.isDraggingElement,p=!!this.draggedWidgetType,g=c?a():null,u=this.isAdvancedWidgetType(g),b=this.isAdvancedWidgetType(this.draggedWidgetType),h=!!g&&(t.includes(g)||o&&u),f=p&&!!this.draggedWidgetType&&(t.includes(this.draggedWidgetType)||o&&b);if(!h&&!f)return;const m=Array.from(document.elementsFromPoint(s.clientX,s.clientY)).filter(E=>E instanceof HTMLElement&&"true"===E.getAttribute("data-droppable"));if(m.length>1&&m[0]!==e)return;s.preventDefault(),console.log("\u{1f3af} DROP aceito!",e.className),e.classList.remove("pb-drop-active"),this.removeDropIndicators();const x=(E,D)=>{if(!E.classList.contains("pb-columns-container"))return E;const N=this.findColumnDropTarget(E,s.clientX,s.clientY);return N?(console.log(`\u{1f500} Drop em pb-columns-container redirecionado para coluna mais pr\xf3xima (${D})`,N.dataset.columnIndex),N):E};if(c&&h&&this.draggedElement){const E=this.draggedElement;if(E.contains(e))return console.warn("\u274c N\xe3o \xe9 poss\xedvel mover um elemento para dentro dele mesmo"),void this.showNotification("N\xe3o \xe9 poss\xedvel mover um elemento para dentro dele mesmo.","warning");const D=x(e,"reorder");D.querySelector(":scope > .pb-drop-placeholder")?.remove(),this.dragPlaceholder?.parentNode&&(this.dragPlaceholder.parentNode.removeChild(this.dragPlaceholder),this.dragPlaceholder=null);const V=E.parentElement;D.appendChild(E),this.isDraggingElement=!1,this.draggedElement=null;const Y=parseInt(D.getAttribute("data-depth")||"0",10);return this.updateElementDepthMetadata(E,Y+1),V?.classList.contains("pb-column")&&this.updateColumnPlaceholder(V),D.classList.contains("pb-column")&&this.updateColumnPlaceholder(D),(V?.classList.contains("pb-column")||D.classList.contains("pb-column"))&&this.scheduleColumnHandlesUpdate(),this.isContainerLikeElement(V)&&this.updateContainerLikePlaceholder(V),this.isContainerLikeElement(D)&&this.updateContainerLikePlaceholder(D),this.saveState(),this.showNotification("Elemento movido!","success",1500),void console.log("\u2705 Elemento reorganizado dentro do container")}if(!p||!f||!this.draggedWidgetType)return;const C=this.draggedWidgetType,v=x(e,"widget");v.querySelector(":scope > .pb-drop-placeholder")?.remove();const _=parseInt(v.getAttribute("data-depth")||"0",10),B=this.createElement(C,{depth:_+1}),A=this.createElementWrapper(B,C);v.appendChild(A),v.classList.contains("pb-column")?(this.updateColumnPlaceholder(v),this.scheduleColumnHandlesUpdate()):this.isContainerLikeElement(v)&&this.updateContainerLikePlaceholder(v),console.log("\u2705 Elemento adicionado ao container:",{type:C,wrapperId:A.id,wrapperClass:A.className,containerClass:v.className,posicaoNoDOM:Array.from(v.children).indexOf(A),totalFilhosAgora:v.children.length}),this.elements.push({id:A.id,type:C,data:{},element:A}),this.draggedWidgetType="",this.dragPlaceholder?.parentNode&&(this.dragPlaceholder.parentNode.removeChild(this.dragPlaceholder),this.dragPlaceholder=null),this.saveState()},!1),this.setupDynamicMinHeight(e)}removeDropIndicators(){document.querySelectorAll(".pb-drop-target").forEach(e=>e.remove())}setupDynamicMinHeight(e){const t=()=>{const n=Array.from(e.querySelectorAll(":scope > .pb-element"));0===n.length?(e.style.minHeight="50px",console.log("\u{1f4cf} minHeight = 50px (vazio)",e.className)):(e.style.minHeight="auto",console.log("\u{1f4cf} minHeight = auto (com conte\xfado)",e.className,n.length))};t(),new MutationObserver(n=>{for(const r of n)if("childList"===r.type){t();break}}).observe(e,{childList:!0,subtree:!1})}setupColumnResizeListeners(){typeof window>"u"||window.addEventListener("resize",()=>this.scheduleColumnHandlesUpdate())}setupColumnResizeHandles(e){if(!e)return;const t=e.querySelector(".pb-columns-container");if(!t)return;const o=e.__columnResizeObserver;o&&o.disconnect(),e.querySelectorAll(".pb-column-resizer").forEach(r=>r.remove());const n=Array.from(t.querySelectorAll(".pb-column"));if(!(n.length<2)){if((!e.style.position||"static"===e.style.position)&&(e.style.position="relative"),n.slice(0,-1).forEach((r,a)=>{const i=document.createElement("div");i.className="pb-column-resizer",i.dataset.resizerIndex=a.toString(),i.style.position="absolute",i.style.top="0",i.style.width="18px",i.style.marginLeft="-9px",i.style.cursor="col-resize",i.style.zIndex="15",i.style.display="flex",i.style.alignItems="center",i.style.justifyContent="center",i.style.pointerEvents="auto",i.style.background="transparent",i.style.transition="background 0.2s ease",i.style.userSelect="none";const s=document.createElement("div");s.style.width="3px",s.style.height="48px",s.style.borderRadius="999px",s.style.background="rgba(124, 140, 241, 0.85)",s.style.boxShadow="0 0 8px rgba(124, 140, 241, 0.35)",s.style.pointerEvents="none",i.appendChild(s),i.addEventListener("mouseenter",()=>{i.style.background="rgba(124, 140, 241, 0.12)"}),i.addEventListener("mouseleave",()=>{i.style.background="transparent"}),i.addEventListener("mousedown",d=>this.startColumnResize(d,e,a)),i.addEventListener("click",d=>{d.preventDefault(),d.stopPropagation()}),e.appendChild(i)}),typeof ResizeObserver<"u"){const r=new ResizeObserver(()=>this.updateColumnResizeHandles(e));r.observe(t),e.__columnResizeObserver=r}this.registerColumnWrapperForResize(e)}}registerColumnWrapperForResize(e,t=0){if(e){if(e.isConnected)return this.registeredColumnWrappers.add(e),void this.updateColumnResizeHandles(e);t>10||requestAnimationFrame(()=>this.registerColumnWrapperForResize(e,t+1))}}startColumnResize(e,t,o){e.preventDefault(),e.stopPropagation();const n=t.querySelector(".pb-columns-container");if(!n)return;const r=Array.from(n.querySelectorAll(".pb-column")),a=r[o],i=r[o+1];if(!a||!i)return;const d=n.getBoundingClientRect().width;if(d<=0)return;const c=e.clientX,p=a.getBoundingClientRect().width,u=p+i.getBoundingClientRect().width;if(u<=0)return;const b=p/d*100,h=u/d*100,f=Math.max(5,80/d*100),m=Math.min(f,h/2),x=document.body;t.classList.add("pb-columns-resizing");const C=x?x.style.userSelect:"";x&&(x.style.userSelect="none",x.style.cursor="col-resize");const v=_=>{let E=b+(_.clientX-c)/d*100;E=Math.max(m,Math.min(h-m,E));const D=h-E;this.applyColumnWidthFromPercent(a,E),this.applyColumnWidthFromPercent(i,D),this.updateColumnResizeHandles(t)},M=()=>{document.removeEventListener("mousemove",v),document.removeEventListener("mouseup",M),x&&(x.style.userSelect=C,x.style.cursor=""),t.classList.remove("pb-columns-resizing"),this.updateColumnResizeHandles(t),this.saveState()};document.addEventListener("mousemove",v),document.addEventListener("mouseup",M)}applyColumnWidthFromPercent(e,t){const n=`${Math.max(0,Math.min(100,t)).toFixed(2)}%`;e.style.flex=`0 0 ${n}`,e.style.width=n,e.style.maxWidth=n,e.setAttribute("data-column-width",n)}updateColumnResizeHandles(e){if(!e||!e.isConnected){this.registeredColumnWrappers.delete(e);const d=e?e.__columnResizeObserver:void 0;return void(d&&(d.disconnect(),e.__columnResizeObserver=void 0))}const t=e.querySelector(".pb-columns-container");if(!t)return;const o=Array.from(e.querySelectorAll(".pb-column-resizer"));if(0===o.length)return;const n=Array.from(t.querySelectorAll(".pb-column"));if(n.length<2)return void o.forEach(d=>d.remove());const r=t.offsetLeft,a=t.offsetTop,s=Math.max(t.offsetHeight||e.offsetHeight||0,60);o.forEach(d=>{const c=parseInt(d.dataset.resizerIndex||"0",10),p=n[c],g=n[c+1];if(!p||!g)return void(d.style.display="none");d.style.display="flex";const u=r+p.offsetLeft+p.offsetWidth;d.style.left=`${u+(r+g.offsetLeft-u)/2}px`,d.style.top=`${a}px`,d.style.height=`${s}px`})}scheduleColumnHandlesUpdate(){this.columnHandlesUpdateQueued||(this.columnHandlesUpdateQueued=!0,requestAnimationFrame(()=>{this.columnHandlesUpdateQueued=!1,this.registeredColumnWrappers.forEach(e=>this.updateColumnResizeHandles(e))}))}isAdvancedWidgetType(e){if(!e)return!1;const t=this.advancedComponentsService.getComponentById(e);return!!(t&&t.active&&t.available)}createColumn(e,t){const o=document.createElement("div");o.className="pb-column pb-element",o.setAttribute("data-container-type","column"),o.setAttribute("data-element-type","column"),o.style.flex="1",o.style.border="none",o.style.minHeight="50px",o.style.padding="0",o.style.position="relative",o.style.background="transparent",o.style.pointerEvents="auto";const n=document.createElement("div");return n.className="pb-drop-placeholder",n.style.cssText="color: #9ca3af; text-align: center; padding: 20px; pointer-events: none;",n.textContent=`Coluna ${e}`,o.appendChild(n),o.addEventListener("click",r=>{r.stopPropagation(),this.selectElement(o)}),this.makeDroppable(o,["heading","text","image","button","divider","spacer","video","columns","container","section","imagem-clicavel","advanced-component"]),console.log(`\u2705 Coluna ${e} criada e configurada como droppable`),o.setAttribute("data-depth",(t.depth||0)+1),o}getColumnsRootElement(e){return e?e.classList.contains("pb-columns-wrapper")?e:e.querySelector(".pb-columns-wrapper"):null}findColumnDropTarget(e,t,o){const n=typeof document<"u"?document.elementFromPoint(t,o)?.closest(".pb-column"):null;if(n&&e.contains(n))return n;const r=Array.from(e.querySelectorAll(".pb-column"));if(0===r.length)return null;if(!Number.isFinite(t)||!Number.isFinite(o))return r[0];let a=r[0],i=Number.POSITIVE_INFINITY;return r.forEach(s=>{const d=s.getBoundingClientRect();if(t>=d.left&&t<=d.right&&o>=d.top&&o<=d.bottom)return a=s,void(i=0);const g=Math.hypot(d.left+d.width/2-t,d.top+d.height/2-o);g<i&&(i=g,a=s)}),a}getColumnLabel(e){const t=e.closest(".pb-columns-wrapper");if(t){const n=Array.from(t.querySelectorAll(".pb-column")).indexOf(e);if(n>=0)return`Coluna ${n+1}`}return e.getAttribute("data-column-label")||"Coluna"}updateColumnPlaceholder(e){if(!e)return;const t=e.querySelector(":scope > .pb-drop-placeholder");if(e.querySelector(":scope > .pb-element"))return void t?.remove();const n=this.getColumnLabel(e);if(t)return t.textContent=n,void(t.style.display="");const r=document.createElement("div");r.className="pb-drop-placeholder",r.style.cssText="color: #9ca3af; text-align: center; padding: 20px; pointer-events: none;",r.textContent=n,e.appendChild(r)}refreshColumnsWrapperStructure(e){const t=this.getColumnsRootElement(e)||e,o=t.querySelector(".pb-columns-container");if(!o)return;const n=Array.from(o.querySelectorAll(".pb-column")),r=n.length.toString();e.setAttribute("data-columns-count",r),t.setAttribute("data-columns-count",r),(e.classList.contains("pb-element-columns")?e:e.closest(".pb-element-columns"))?.setAttribute("data-columns-count",r);const i=parseInt(t.getAttribute("data-depth")||"0",10);n.forEach((s,d)=>{s.dataset.columnIndex=(d+1).toString(),s.setAttribute("data-depth",(i+1).toString()),this.updateColumnPlaceholder(s)}),this.setupColumnResizeHandles(e),this.scheduleColumnHandlesUpdate()}isContainerLikeElement(e){return!!e&&(e.classList.contains("pb-droppable-container")||e.classList.contains("pb-droppable-section"))}getContainerLikePlaceholderText(e){return e?e.dataset.placeholderText?e.dataset.placeholderText:e.classList.contains("pb-droppable-container")?"Arraste Colunas, Se\xe7\xf5es ou elementos aqui":e.classList.contains("pb-droppable-section")?"Arraste um Container ou elementos aqui":"Arraste elementos aqui":"Arraste elementos aqui"}updateContainerLikePlaceholder(e){if(!this.isContainerLikeElement(e))return;const t=e,o=t.querySelector(":scope > .pb-element-controls"),n=Array.from(t.children).some(s=>s instanceof HTMLElement&&s.classList.contains("pb-element")&&s!==o),r=t.querySelector(":scope > .pb-drop-placeholder");if(n)return t.classList.remove("pb-droppable-empty"),void r?.remove();t.classList.add("pb-droppable-empty");const a=this.getContainerLikePlaceholderText(t);if(r)return r.textContent=a,r.style.display="",void(r.parentElement||t.appendChild(r));const i=document.createElement("div");i.className="pb-drop-placeholder",i.style.cssText="color: #9ca3af; text-align: center; padding: 20px; pointer-events: none;",i.textContent=a,o&&o.nextSibling?t.insertBefore(i,o.nextSibling):t.appendChild(i)}updateElementDepthMetadata(e,t){if(e&&!Number.isNaN(t)){if(this.isContainerLikeElement(e))return void e.setAttribute("data-depth",t.toString());if(e.classList.contains("pb-element-columns")){const o=e.querySelector(".pb-columns-wrapper");return void(o&&(o.setAttribute("data-depth",t.toString()),this.refreshColumnsWrapperStructure(o)))}e.classList.contains("pb-column")&&e.setAttribute("data-depth",t.toString())}}addColumn(e){const t=e.querySelector(".pb-columns-container");if(!t)return;const o=this.getColumnsRootElement(e)||e,n=parseInt(o.getAttribute("data-depth")||"0",10),r=t.children.length,a=this.createColumn(r+1,{depth:n});t.appendChild(a),this.refreshColumnsWrapperStructure(e),console.log("\u2705 Coluna adicionada. Total:",r+1),this.saveState()}removeColumn(e){var t=this;return(0,H.A)(function*(){const o=e.querySelector(".pb-columns-container");if(!o)return;const n=o.children.length;if(n<=1)return void t.showNotification("\xc9 necess\xe1rio ter pelo menos 1 coluna","warning");const r=o.lastElementChild;r&&r.children.length>1&&!(yield t.showConfirmModal("Esta coluna cont\xe9m elementos. Deseja realmente remov\xea-la?","Remover Coluna"))||(r?.remove(),t.refreshColumnsWrapperStructure(e),console.log("\u2705 Coluna removida. Total:",n-1),t.saveState())})()}createFormatToolbar(){const e=document.createElement("div");e.id="format-toolbar",e.className="format-toolbar",e.style.cssText="\n      position: fixed;\n      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);\n      border: none;\n      border-radius: 12px;\n      padding: 10px 12px;\n      display: none;\n      gap: 8px;\n      align-items: center;\n      box-shadow: 0 12px 40px rgba(102, 126, 234, 0.4), 0 4px 12px rgba(0, 0, 0, 0.2);\n      z-index: 10000;\n      flex-wrap: nowrap;\n      white-space: nowrap;\n      overflow-x: auto;\n      overflow-y: hidden;\n      max-height: 60px;\n      backdrop-filter: blur(10px);\n      animation: fadeInScale 0.3s cubic-bezier(0.4, 0, 0.2, 1);\n    ";const t=this.createToolbarGroup([{icon:"<b>B</b>",cmd:"bold",title:"Negrito"},{icon:"<i>I</i>",cmd:"italic",title:"It\xe1lico"},{icon:"<u>U</u>",cmd:"underline",title:"Sublinhado"}]);e.appendChild(t),e.appendChild(this.createDivider());const o=document.createElement("div");o.className="toolbar-size-group",o.style.cssText="display: flex; gap: 4px; align-items: center;";const n=document.createElement("span");n.textContent="A",n.style.cssText="color: white; font-size: 10px; font-weight: 600; opacity: 0.8;";const r=document.createElement("select");r.className="toolbar-size-select",r.style.cssText="\n      background: rgba(255, 255, 255, 0.2);\n      color: white;\n      border: 1px solid rgba(255, 255, 255, 0.3);\n      border-radius: 6px;\n      padding: 6px 24px 6px 8px;\n      font-size: 12px;\n      font-weight: 600;\n      cursor: pointer;\n      outline: none;\n      appearance: none;\n      background-image: url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='white' d='M6 8L2 4h8z'/%3E%3C/svg%3E\");\n      background-repeat: no-repeat;\n      background-position: right 6px center;\n      min-width: 70px;\n    ",[10,12,14,16,18,20,24,28,32,36,48,64,72].forEach(u=>{const b=document.createElement("option");b.value=u.toString(),b.textContent=u+"px",b.style.color="#000",r.appendChild(b)}),r.addEventListener("change",()=>{const u=window.getSelection(),b=u&&u.rangeCount>0?u.getRangeAt(0):null;document.execCommand("fontSize",!1,"7"),document.querySelectorAll('font[size="7"]').forEach(f=>{const m=document.createElement("span");m.style.fontSize=r.value+"px",m.innerHTML=f.innerHTML,f.parentNode?.replaceChild(m,f)}),b&&u&&(u.removeAllRanges(),u.addRange(b)),this.currentEditableElement&&(this.currentEditableElement.focus(),this.syncToolbarToProperties("fontSize",r.value+"px"))}),o.appendChild(n),o.appendChild(r),e.appendChild(o),e.appendChild(this.createDivider());const i=document.createElement("div");i.className="toolbar-color-group",i.style.cssText="display: flex; gap: 6px; align-items: center;";const s=document.createElement("input");s.type="color",s.className="toolbar-color-picker",s.value="#000000",s.style.cssText="\n      width: 32px;\n      height: 32px;\n      border: 2px solid rgba(255, 255, 255, 0.5);\n      border-radius: 6px;\n      cursor: pointer;\n      background: white;\n      padding: 2px;\n    ",s.addEventListener("input",()=>{const u=window.getSelection(),b=u&&u.rangeCount>0?u.getRangeAt(0):null;document.execCommand("foreColor",!1,s.value),b&&u&&(u.removeAllRanges(),u.addRange(b)),this.currentEditableElement&&(this.currentEditableElement.focus(),this.syncToolbarToProperties("color",s.value))}),["#000000","#ffffff","#6366f1","#ef4444","#10b981","#f59e0b"].forEach(u=>{const b=document.createElement("button");b.className="toolbar-quick-color",b.style.cssText=`\n        width: 24px;\n        height: 24px;\n        border: 2px solid rgba(255, 255, 255, 0.5);\n        border-radius: 4px;\n        background: ${u};\n        cursor: pointer;\n        padding: 0;\n        transition: all 0.2s;\n        ${"#ffffff"===u?"box-shadow: inset 0 0 0 1px rgba(0,0,0,0.1);":""}\n      `,b.addEventListener("mouseenter",()=>{b.style.transform="scale(1.2)",b.style.borderColor="white"}),b.addEventListener("mouseleave",()=>{b.style.transform="scale(1)",b.style.borderColor="rgba(255, 255, 255, 0.5)"}),b.addEventListener("mousedown",h=>{h.preventDefault();const f=window.getSelection(),m=f&&f.rangeCount>0?f.getRangeAt(0):null;document.execCommand("foreColor",!1,u),s.value=u,m&&f&&(f.removeAllRanges(),f.addRange(m)),this.currentEditableElement&&(this.currentEditableElement.focus(),this.syncToolbarToProperties("color",u))}),i.appendChild(b)}),i.insertBefore(s,i.firstChild),e.appendChild(i),e.appendChild(this.createDivider());const c=document.createElement("div");c.className="toolbar-group",c.style.cssText="display: flex; gap: 4px;",[{cmd:"justifyLeft",title:"Alinhar \xe0 Esquerda",svg:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">\n          <line x1="1" y1="2" x2="15" y2="2"/>\n          <line x1="1" y1="6" x2="10" y2="6"/>\n          <line x1="1" y1="10" x2="15" y2="10"/>\n          <line x1="1" y1="14" x2="10" y2="14"/>\n        </svg>'},{cmd:"justifyCenter",title:"Centralizar",svg:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">\n          <line x1="1" y1="2" x2="15" y2="2"/>\n          <line x1="3" y1="6" x2="13" y2="6"/>\n          <line x1="1" y1="10" x2="15" y2="10"/>\n          <line x1="3" y1="14" x2="13" y2="14"/>\n        </svg>'},{cmd:"justifyRight",title:"Alinhar \xe0 Direita",svg:'<svg width="16" height="16" viewBox="0 0 16 16" fill="none" stroke="currentColor" stroke-width="1.5" stroke-linecap="round">\n          <line x1="1" y1="2" x2="15" y2="2"/>\n          <line x1="6" y1="6" x2="15" y2="6"/>\n          <line x1="1" y1="10" x2="15" y2="10"/>\n          <line x1="6" y1="14" x2="15" y2="14"/>\n        </svg>'}].forEach(u=>{const b=document.createElement("button");b.innerHTML=u.svg,b.title=u.title,b.className="format-btn align-btn",b.style.cssText="\n        width: 32px;\n        height: 32px;\n        padding: 0;\n        border: 1px solid rgba(255, 255, 255, 0.3);\n        background: rgba(255, 255, 255, 0.15);\n        backdrop-filter: blur(10px);\n        color: white;\n        border-radius: 6px;\n        cursor: pointer;\n        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      ",b.addEventListener("mouseenter",()=>{b.style.background="rgba(255, 255, 255, 0.25)",b.style.borderColor="rgba(255, 255, 255, 0.5)",b.style.transform="translateY(-2px)"}),b.addEventListener("mouseleave",()=>{b.style.background="rgba(255, 255, 255, 0.15)",b.style.borderColor="rgba(255, 255, 255, 0.3)",b.style.transform="translateY(0)"}),b.addEventListener("click",()=>{this.executeFormatCommand(u.cmd)}),c.appendChild(b)}),e.appendChild(c),e.appendChild(this.createDivider());const g=this.createToolbarGroup([{icon:"\u2022",cmd:"insertUnorderedList",title:"Lista"},{icon:"1.",cmd:"insertOrderedList",title:"Numerada"},{icon:"\u{1f517}",cmd:"createLink",title:"Link"}]);e.appendChild(g),document.body.appendChild(e),this.formatToolbar=e}createToolbarGroup(e){const t=document.createElement("div");return t.className="toolbar-group",t.style.cssText="display: flex; gap: 4px;",e.forEach(o=>{const n=document.createElement("button");n.innerHTML=o.icon,n.title=o.title,n.className="format-btn",n.style.cssText="\n        width: 32px;\n        height: 32px;\n        padding: 0;\n        border: 1px solid rgba(255, 255, 255, 0.3);\n        background: rgba(255, 255, 255, 0.15);\n        backdrop-filter: blur(10px);\n        color: white;\n        border-radius: 6px;\n        cursor: pointer;\n        font-size: 14px;\n        font-weight: 700;\n        transition: all 0.2s cubic-bezier(0.4, 0, 0.2, 1);\n        display: flex;\n        align-items: center;\n        justify-content: center;\n      ",n.addEventListener("mouseenter",()=>{n.style.background="rgba(255, 255, 255, 0.3)",n.style.borderColor="rgba(255, 255, 255, 0.6)",n.style.transform="translateY(-2px) scale(1.05)",n.style.boxShadow="0 4px 12px rgba(0, 0, 0, 0.3)"}),n.addEventListener("mouseleave",()=>{n.style.background="rgba(255, 255, 255, 0.15)",n.style.borderColor="rgba(255, 255, 255, 0.3)",n.style.transform="translateY(0) scale(1)",n.style.boxShadow="none"}),n.addEventListener("mousedown",r=>{r.preventDefault(),n.style.transform="scale(0.95)",this.executeFormatCommand(o.cmd)}),t.appendChild(n)}),t}createDivider(){const e=document.createElement("div");return e.className="toolbar-divider",e.style.cssText="\n      width: 1px;\n      height: 28px;\n      background: linear-gradient(to bottom, transparent, rgba(255, 255, 255, 0.4), transparent);\n    ",e}executeFormatCommand(e){if("createLink"===e){const t=prompt("Digite a URL do link:");t&&document.execCommand("createLink",!1,t)}else if("insertImage"===e){const t=prompt("Digite a URL da imagem:");t&&document.execCommand("insertImage",!1,t)}else document.execCommand(e,!1);this.currentEditableElement&&this.currentEditableElement.focus()}setupDocumentListeners(){document.addEventListener("mouseup",()=>{setTimeout(()=>this.handleTextSelection(),10)}),document.addEventListener("keyup",()=>{setTimeout(()=>this.handleTextSelection(),10)}),document.addEventListener("mousedown",e=>{const t=e.target;!t.closest(".format-toolbar")&&!t.closest('[contenteditable="true"]')&&(this.hideFormatToolbar(),window.getSelection()?.removeAllRanges()),!t.closest(".pb-element-wrapper")&&!t.closest(".pb-element-controls")&&t.closest(".pb-canvas")&&this.deselectElement()}),document.addEventListener("keydown",e=>{"Escape"===e.key&&(this.hideFormatToolbar(),this.deselectElement(),window.getSelection()?.removeAllRanges(),document.activeElement instanceof HTMLElement&&document.activeElement.blur())})}handleTextSelection(){const e=window.getSelection();if(!e||0===e.rangeCount)return void this.hideFormatToolbar();const t=e.getRangeAt(0),o=e.toString().trim();let n=t.commonAncestorContainer,r=null;for(;n&&n!==document.body;){if("true"===n.contentEditable){r=n;break}n=n.parentNode}o.length>0&&r?(this.currentEditableElement=r,this.showFormatToolbar(t)):this.hideFormatToolbar()}showFormatToolbar(e){if(!this.formatToolbar)return;const t=e.commonAncestorContainer.parentElement;if(t){const s=window.getComputedStyle(t),d=this.formatToolbar.querySelector(".toolbar-size-select");if(d){const p=parseInt(s.fontSize),u=[10,12,14,16,18,20,24,28,32,36,48,64,72].reduce((b,h)=>Math.abs(h-p)<Math.abs(b-p)?h:b);d.value=u.toString()}const c=this.formatToolbar.querySelector(".toolbar-color-picker");if(c){const g=s.color.match(/^rgb\((\d+),\s*(\d+),\s*(\d+)\)$/);if(g){const f="#"+[parseInt(g[1]),parseInt(g[2]),parseInt(g[3])].map(m=>{const x=m.toString(16);return 1===x.length?"0"+x:x}).join("");c.value=f}}}const o=e.getBoundingClientRect();let a=o.top+window.scrollY-50-10,i=o.left+window.scrollX+o.width/2-250;a<window.scrollY&&(a=o.bottom+window.scrollY+10),i<10?i=10:i+500>window.innerWidth-10&&(i=window.innerWidth-500-10),this.formatToolbar.style.top=`${a}px`,this.formatToolbar.style.left=`${i}px`,this.formatToolbar.style.display="flex"}hideFormatToolbar(){this.formatToolbar&&(this.formatToolbar.style.display="none"),this.currentEditableElement=null}syncToolbarToProperties(e,t){if(!this.selectedElement)return;const n=this.getElementContent(this.selectedElement);if(n){switch(e){case"fontSize":n.style.fontSize=t;const r=this.propertiesContent.querySelector("#fontSizeSlider"),a=this.propertiesContent.querySelector("#fontSizeInput"),i=this.propertiesContent.querySelector("#fontSizeValue");if(r&&a&&i){const g=parseInt(t);r.value=g.toString(),a.value=g.toString(),i.textContent=g+"px"}break;case"color":n.style.color=t;const s=this.propertiesContent.querySelector("#fontColorInput"),d=this.propertiesContent.querySelector("#fontColorHex");s&&d&&(s.value=t,d.value=t.toUpperCase());break;case"fontFamily":n.style.fontFamily=t;const c=this.propertiesContent.querySelector("#fontFamilySelect");c&&(c.value=t);break;case"fontWeight":n.style.fontWeight=t,this.propertiesContent.querySelectorAll(".pb-weight-btn").forEach(g=>{g.classList.remove("active"),g.getAttribute("data-weight")===t&&g.classList.add("active")})}console.log(`\u{1f504} Sincronizado: ${e} = ${t}`)}}syncPropertiesToToolbar(e,t){if(this.formatToolbar&&"none"!==this.formatToolbar.style.display){switch(e){case"fontSize":const o=this.formatToolbar.querySelector(".toolbar-size-select");if(o){const r=parseInt(t);o.value=r.toString()}break;case"color":const n=this.formatToolbar.querySelector(".toolbar-color-picker");n&&(n.value=t)}console.log(`\u{1f504} Sincronizado para toolbar: ${e} = ${t}`)}}setupPropertiesPanel(){const e=document.getElementById("closePanelBtn");e&&e.addEventListener("click",()=>{this.hideProperties(),this.deselectElement()})}showProperties(e){console.log("\u{1f4cb} Mostrando propriedades para:",e.className);let o=(e.closest&&(e.closest(".pb-element")||e.closest('[data-advanced-component="true"]'))?e.closest(".pb-element")||e.closest('[data-advanced-component="true"]'):null)||e;try{if(!o.hasAttribute("data-advanced-component")){const i=o.querySelector&&o.querySelector(':scope > [data-advanced-component="true"]');i&&(o=i)}}catch{}const n=this.getElementType(o),r=this.getElementContent(o);this.currentPanelContent=r,r&&"true"===r.contentEditable&&(this.currentEditableElement=r),this.propertiesContent.innerHTML="";const a=document.createElement("div");switch(a.className="pb-property-section",a.innerHTML=`\n      <h4 style="color: #6366f1; margin: 0 0 16px 0; font-size: 14px; text-transform: uppercase;">\n        ${this.getElementTypeName(n)}\n      </h4>\n    `,this.propertiesContent.appendChild(a),console.log("\u{1f4e6} Conte\xfado encontrado:",r),console.log("\u{1f4e6} Wrapper:",o),n){case"section":case"container":case"columns":case"column":case"titulo-texto-pagina":case"mvv-cards":case"hero-section":case"cta-section":case"noticias-grid":case"tabs-navigation":case"membro-card":case"corpo-diretivo":case"ultimas-noticias":case"noticia-destaque":case"accordion":case"cards-grid":case"faq":case"advanced-component":this.addSpacingProperties(o),this.addSizeProperties(o),this.addBackgroundProperties(o),this.addBorderProperties(o);break;case"image":r instanceof HTMLImageElement&&this.addImageProperties(r,o),this.addSpacingProperties(o),this.addSizeProperties(o),this.addBackgroundProperties(o),this.addBorderProperties(o);break;case"imagem-clicavel":{const i=o.querySelector(".imagem-clicavel");i&&this.addImagemClicavelProperties(i,o),this.addSpacingProperties(o),this.addSizeProperties(o);break}case"button":{const i=r instanceof HTMLElement&&r.classList.contains("pb-button-container")?r:o.querySelector(":scope > .pb-button-container")||r?.closest(".pb-button-container"),s=i?.querySelector("button");s&&i&&this.addButtonProperties(s,i,o);break}case"divider":{const i=o.querySelector("hr");i&&this.addDividerProperties(i,o);break}case"spacer":{const i=o.querySelector(".pb-basic-spacer")||o.querySelector(":scope > div:not(.pb-element-controls)");i&&this.addSpacerProperties(i,o);break}default:r&&this.addTextProperties(r,o),this.addSpacingProperties(o),this.addSizeProperties(o),this.addBackgroundProperties(o),this.addBorderProperties(o)}this.propertiesPanel.classList.add("active"),console.log("\u2705 Painel de propriedades ABERTO - Canvas reduzido")}getElementContent(e){const t=e.querySelector(":scope > .pb-button-container");if(t)return t;const o=e.querySelectorAll('[contenteditable="true"]');if(o.length>0)return o[0];const n=e.querySelectorAll("h1, h2, h3, h4, h5, h6, p");if(n.length>0)return n[0];const r=e.querySelector("button:not(.pb-element-controls button)");return r||(e.querySelector("img")||e)}hideProperties(){this.propertiesPanel.classList.remove("active"),this.propertiesContent.innerHTML='\n      <div class="pb-no-selection">\n        <p>Selecione um elemento para editar</p>\n      </div>\n    ',console.log("\u2705 Painel de propriedades FECHADO - Canvas expandido")}getElementType(e){const t=e.className,o=e.getAttribute("data-container-type");return t.includes("advanced-component-container")||e.hasAttribute("data-advanced-component")?e.getAttribute("data-component-id")||"advanced-component":"section"===o?"section":"container"===o?"container":"column"===o?"column":"imagem-clicavel"===o?"imagem-clicavel":t.includes("pb-element-heading")?"heading":t.includes("pb-element-text")?"text":t.includes("pb-element-image")?"image":t.includes("pb-element-button")?"button":t.includes("pb-element-divider")?"divider":t.includes("pb-element-spacer")?"spacer":t.includes("pb-droppable-section")?"section":t.includes("pb-droppable-container")?"container":t.includes("pb-element-columns")?"columns":t.includes("pb-column")?"column":t.includes("imagem-clicavel-wrapper")?"imagem-clicavel":"unknown"}getElementTypeName(e){return{heading:"\u{1f4dd} T\xedtulo",text:"\u{1f4c4} Texto",image:"\u{1f5bc}\ufe0f Imagem","imagem-clicavel":"\u{1f5bc}\ufe0f Imagem Clic\xe1vel",button:"\u{1f518} Bot\xe3o",divider:"\u2796 Divisor",spacer:"\u2195\ufe0f Espa\xe7ador",section:"\u229f Se\xe7\xe3o",container:"\u22a1 Container",columns:"|| Colunas",column:"| Coluna","titulo-texto-pagina":"\u{1f4c4} T\xedtulo + Texto","mvv-cards":"\u{1f4c7} Cards MVV","hero-section":"\u{1f3af} Hero Section","cta-section":"\u{1f4e3} CTA Section","noticias-grid":"\u{1f4f0} Grid de Not\xedcias","tabs-navigation":"\u{1f4d1} Tabs","membro-card":"\u{1f464} Card Membro","corpo-diretivo":"\u{1f465} Corpo Diretivo","ultimas-noticias":"\u{1f4f0} \xdaltimas Not\xedcias","noticia-destaque":"\u2b50 Not\xedcia Destaque",accordion:"\u{1f4cb} Accordion","cards-grid":"\u{1f4c7} Grid de Cards",faq:"\u2753 FAQ","advanced-component":"\u2699\ufe0f Componente Avan\xe7ado"}[e]||"Elemento"}addTextProperties(e,t){const o=window.getComputedStyle(e),n=()=>{const y=Array.from(t.querySelectorAll(":scope > h1, :scope > h2, :scope > h3, :scope > h4, :scope > h5, :scope > h6, :scope > p"));if(y.length>1){const k=["fontSize","fontWeight","fontStyle","textDecoration","textAlign","color","fontFamily","lineHeight","letterSpacing","wordSpacing","textTransform","textShadow","opacity"];y.forEach(L=>{const O=L;O!==e&&k.forEach($=>{const le=e.style.getPropertyValue(`--${$}`)||e.style[$]||o.getPropertyValue($);le&&(O.style[$]=le)})}),console.log("\u2705 Estilos sincronizados entre elementos de texto")}},r=this.createPropertySection("\u{1f4dd} Conte\xfado"),a=e.textContent?.trim()??"",i=document.createElement("div");i.className="pb-property-group pb-property-enhanced",i.innerHTML=`\n      <label>Editar Texto</label>\n      <textarea id="pb-text-editor" class="pb-text-editor" style="\n        width: 100%;\n        min-height: 100px;\n        padding: 8px;\n        border: 1px solid #e5e7eb;\n        border-radius: 6px;\n        font-family: monospace;\n        font-size: 13px;\n        resize: vertical;\n        font-family: inherit;\n      ">${a}</textarea>\n    `;const s=i.querySelector("#pb-text-editor"),d=()=>{e.textContent=s.value,n(),this.saveState()};s.addEventListener("input",d),s.addEventListener("change",d),s.addEventListener("blur",d),r.appendChild(i),this.propertiesContent.appendChild(r);const c=this.createPropertySection("\u270f\ufe0f Formata\xe7\xe3o de Texto"),p=document.createElement("div");p.className="pb-quick-toolbar",p.innerHTML='\n      <div class="pb-toolbar-group">\n        <button class="pb-toolbar-btn" data-action="bold" title="Negrito">\n          <span style="font-weight: 700;">B</span>\n        </button>\n        <button class="pb-toolbar-btn" data-action="italic" title="It\xe1lico">\n          <span style="font-style: italic;">I</span>\n        </button>\n        <button class="pb-toolbar-btn" data-action="underline" title="Sublinhado">\n          <span style="text-decoration: underline;">U</span>\n        </button>\n      </div>\n      <div class="pb-toolbar-divider"></div>\n      <div class="pb-toolbar-group">\n        <button class="pb-toolbar-btn" data-align="left" title="Alinhar \xe0 Esquerda">\n          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">\n            <path d="M1 2h14M1 6h10M1 10h14M1 14h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n          </svg>\n        </button>\n        <button class="pb-toolbar-btn" data-align="center" title="Centralizar">\n          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">\n            <path d="M1 2h14M3 6h10M1 10h14M3 14h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n          </svg>\n        </button>\n        <button class="pb-toolbar-btn" data-align="right" title="Alinhar \xe0 Direita">\n          <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">\n            <path d="M1 2h14M5 6h10M1 10h14M5 14h10" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>\n          </svg>\n        </button>\n      </div>\n      <div class="pb-toolbar-divider"></div>\n      <div class="pb-toolbar-group">\n        <button class="pb-toolbar-btn" data-size="decrease" title="Diminuir Fonte">A-</button>\n        <button class="pb-toolbar-btn" data-size="increase" title="Aumentar Fonte">A+</button>\n      </div>\n    ';const g=p.querySelector('[data-action="bold"]'),u=p.querySelector('[data-action="italic"]'),b=p.querySelector('[data-action="underline"]');g.addEventListener("click",()=>{const y="700"===o.fontWeight||"bold"===o.fontWeight;e.style.fontWeight=y?"400":"700",g.classList.toggle("active",!y),n(),this.saveState()}),u.addEventListener("click",()=>{const y="italic"===o.fontStyle;e.style.fontStyle=y?"normal":"italic",u.classList.toggle("active",!y),n(),this.saveState()}),b.addEventListener("click",()=>{const y=o.textDecoration.includes("underline");e.style.textDecoration=y?"none":"underline",b.classList.toggle("active",!y),n(),this.saveState()}),p.querySelectorAll("[data-align]").forEach(y=>{y.addEventListener("click",()=>{const k=y.getAttribute("data-align");e.style.textAlign=k,p.querySelectorAll("[data-align]").forEach(L=>L.classList.remove("active")),y.classList.add("active"),n(),this.saveState()})});const h=p.querySelector('[data-size="decrease"]'),f=p.querySelector('[data-size="increase"]');h.addEventListener("click",()=>{const y=parseInt(o.fontSize);e.style.fontSize=Math.max(8,y-2)+"px",n(),this.saveState()}),f.addEventListener("click",()=>{const y=parseInt(o.fontSize);e.style.fontSize=Math.min(120,y+2)+"px",n(),this.saveState()}),c.appendChild(p);const m=document.createElement("div");m.className="pb-property-group pb-property-enhanced";const x=parseInt(o.fontSize);m.innerHTML=`\n      <label>Tamanho da Fonte</label>\n      <div class="pb-size-presets">\n        <button class="pb-preset-size ${12===x?"active":""}" data-size="12">12</button>\n        <button class="pb-preset-size ${14===x?"active":""}" data-size="14">14</button>\n        <button class="pb-preset-size ${16===x?"active":""}" data-size="16">16</button>\n        <button class="pb-preset-size ${18===x?"active":""}" data-size="18">18</button>\n        <button class="pb-preset-size ${24===x?"active":""}" data-size="24">24</button>\n        <button class="pb-preset-size ${32===x?"active":""}" data-size="32">32</button>\n        <button class="pb-preset-size ${48===x?"active":""}" data-size="48">48</button>\n      </div>\n      <div class="pb-size-controls">\n        <input type="range" id="fontSizeSlider" class="pb-slider" min="8" max="120" value="${x}" step="1">\n        <input type="number" id="fontSizeInput" class="pb-size-value" value="${x}" min="8" max="120">\n        <span id="fontSizeValue" class="pb-unit">${x}px</span>\n      </div>\n    `;const C=m.querySelector("#fontSizeSlider"),v=m.querySelector("#fontSizeInput"),M=m.querySelector("#fontSizeValue"),_=m.querySelectorAll(".pb-preset-size"),B=y=>{C.value=y.toString(),v.value=y.toString(),M.textContent=y+"px",e.style.fontSize=y+"px",this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.fontSize=y+"px"),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.fontSize=y+"px"),_.forEach(k=>{k.classList.toggle("active",k.getAttribute("data-size")===y.toString())}),this.syncPropertiesToToolbar("fontSize",y+"px"),n(),this.saveState()};C.addEventListener("input",()=>{B(parseInt(C.value));const y=this.formatToolbar?.querySelector(".toolbar-size-select");y&&(y.value=C.value)}),v.addEventListener("input",()=>{B(parseInt(v.value));const y=this.formatToolbar?.querySelector(".toolbar-size-select");y&&(y.value=v.value)}),_.forEach(y=>{y.addEventListener("click",()=>{const k=parseInt(y.getAttribute("data-size"));B(k);const L=this.formatToolbar?.querySelector(".toolbar-size-select");L&&(L.value=k.toString())})}),c.appendChild(m);const A=document.createElement("div");A.className="pb-property-group pb-property-enhanced";const E=this.rgbToHex(o.color),D=parseFloat(o.opacity)||1;A.innerHTML=`\n      <label>Cor e Opacidade</label>\n      <div class="pb-color-advanced">\n        <div class="pb-color-main">\n          <input type="color" id="fontColorInput" class="pb-color-picker" value="${E}">\n          <input type="text" id="fontColorHex" class="pb-color-hex" value="${E}" placeholder="#000000">\n          <button class="pb-color-eye-dropper" title="Conta-gotas">\u{1f3a8}</button>\n        </div>\n        <div class="pb-opacity-control">\n          <label class="pb-small-label">Opacidade: <span class="pb-opacity-value">${Math.round(100*D)}%</span></label>\n          <input type="range" class="pb-opacity-slider" min="0" max="100" value="${100*D}" step="1">\n        </div>\n      </div>\n      <div class="pb-color-presets">\n        <button class="pb-preset-color" data-color="#000000" style="background: #000000"></button>\n        <button class="pb-preset-color" data-color="#ffffff" style="background: #ffffff; border: 1px solid #ddd"></button>\n        <button class="pb-preset-color" data-color="#6366f1" style="background: #6366f1"></button>\n        <button class="pb-preset-color" data-color="#ef4444" style="background: #ef4444"></button>\n        <button class="pb-preset-color" data-color="#10b981" style="background: #10b981"></button>\n        <button class="pb-preset-color" data-color="#f59e0b" style="background: #f59e0b"></button>\n        <button class="pb-preset-color" data-color="#8b5cf6" style="background: #8b5cf6"></button>\n        <button class="pb-preset-color" data-color="#ec4899" style="background: #ec4899"></button>\n        <button class="pb-preset-color" data-color="#3b82f6" style="background: #3b82f6"></button>\n        <button class="pb-preset-color" data-color="#14b8a6" style="background: #14b8a6"></button>\n        <button class="pb-preset-color" data-color="#f97316" style="background: #f97316"></button>\n        <button class="pb-preset-color" data-color="#64748b" style="background: #64748b"></button>\n      </div>\n    `;const N=A.querySelector("#fontColorInput"),V=A.querySelector("#fontColorHex"),Y=A.querySelector(".pb-opacity-slider"),U=A.querySelector(".pb-opacity-value"),w=A.querySelectorAll(".pb-preset-color"),I=y=>{N.value=y,V.value=y,e.style.color=y,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.color=y),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.color=y),this.syncPropertiesToToolbar("color",y),n(),this.saveState()};N.addEventListener("input",()=>I(N.value)),V.addEventListener("input",()=>I(V.value)),Y.addEventListener("input",()=>{const y=parseInt(Y.value)/100;e.style.opacity=y.toString(),U.textContent=Y.value+"%";const k=this.formatToolbar?.querySelector(".toolbar-color-picker");k&&(k.value=this.rgbToHex(e.style.color)),n(),this.saveState()}),w.forEach(y=>{y.addEventListener("click",()=>{const k=y.getAttribute("data-color");I(k);const L=this.formatToolbar?.querySelector(".toolbar-color-picker");L&&(L.value=k)})}),c.appendChild(A);const F=document.createElement("div");F.className="pb-property-group pb-property-enhanced";const z=o.fontFamily.split(",")[0].replace(/['"]/g,""),J=o.fontWeight;F.innerHTML=`\n      <label>Tipografia</label>\n      <div class="pb-font-selector">\n        <select id="fontFamilySelect" class="pb-font-family">\n          <option value="Arial" ${"Arial"===z?"selected":""}>Arial</option>\n          <option value="Helvetica" ${"Helvetica"===z?"selected":""}>Helvetica</option>\n          <option value="Times New Roman" ${"Times New Roman"===z?"selected":""}>Times New Roman</option>\n          <option value="Georgia" ${"Georgia"===z?"selected":""}>Georgia</option>\n          <option value="Courier New" ${"Courier New"===z?"selected":""}>Courier New</option>\n          <option value="Verdana" ${"Verdana"===z?"selected":""}>Verdana</option>\n          <option value="Roboto" ${"Roboto"===z?"selected":""}>Roboto</option>\n          <option value="Open Sans" ${"Open Sans"===z?"selected":""}>Open Sans</option>\n          <option value="Montserrat" ${"Montserrat"===z?"selected":""}>Montserrat</option>\n          <option value="Poppins" ${"Poppins"===z?"selected":""}>Poppins</option>\n        </select>\n      </div>\n      <div class="pb-font-weights">\n        <button class="pb-weight-btn ${"300"===J?"active":""}" data-weight="300" style="font-weight: 300">Light</button>\n        <button class="pb-weight-btn ${"400"===J?"active":""}" data-weight="400" style="font-weight: 400">Regular</button>\n        <button class="pb-weight-btn ${"600"===J?"active":""}" data-weight="600" style="font-weight: 600">Semibold</button>\n        <button class="pb-weight-btn ${"700"===J?"active":""}" data-weight="700" style="font-weight: 700">Bold</button>\n      </div>\n    `;const ae=F.querySelector("#fontFamilySelect"),re=F.querySelectorAll(".pb-weight-btn");ae.addEventListener("change",()=>{const y=`"${ae.value}", sans-serif`;e.style.fontFamily=y,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.fontFamily=y),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.fontFamily=y),this.syncPropertiesToToolbar("fontFamily",y),n(),this.saveState()}),re.forEach(y=>{y.addEventListener("click",()=>{re.forEach(L=>L.classList.remove("active")),y.classList.add("active");const k=y.getAttribute("data-weight");e.style.fontWeight=k,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.fontWeight=k),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.fontWeight=k),this.syncPropertiesToToolbar("fontWeight",k),n(),this.saveState()})}),c.appendChild(F);const G=document.createElement("div");G.className="pb-property-group pb-property-enhanced";const ie=parseFloat(o.lineHeight)/parseInt(o.fontSize),ue=parseFloat(o.letterSpacing)||0,pe=parseFloat(o.wordSpacing)||0;G.innerHTML=`\n      <label>Espa\xe7amento</label>\n      <div class="pb-spacing-controls">\n        <div class="pb-spacing-item">\n          <label class="pb-small-label">Altura da Linha</label>\n          <div class="pb-input-with-buttons">\n            <button class="pb-adjust-btn" data-action="line-height-decrease">-</button>\n            <input type="number" class="pb-spacing-input" id="lineHeightInput" value="${ie.toFixed(1)}" step="0.1" min="0.5" max="3">\n            <button class="pb-adjust-btn" data-action="line-height-increase">+</button>\n          </div>\n        </div>\n        <div class="pb-spacing-item">\n          <label class="pb-small-label">Espa\xe7amento de Letras</label>\n          <div class="pb-input-with-buttons">\n            <button class="pb-adjust-btn" data-action="letter-spacing-decrease">-</button>\n            <input type="number" class="pb-spacing-input" id="letterSpacingInput" value="${ue}" step="0.5" min="-5" max="20">\n            <button class="pb-adjust-btn" data-action="letter-spacing-increase">+</button>\n            <span class="pb-unit-small">px</span>\n          </div>\n        </div>\n        <div class="pb-spacing-item">\n          <label class="pb-small-label">Espa\xe7amento de Palavras</label>\n          <div class="pb-input-with-buttons">\n            <button class="pb-adjust-btn" data-action="word-spacing-decrease">-</button>\n            <input type="number" class="pb-spacing-input" id="wordSpacingInput" value="${pe}" step="1" min="-10" max="30">\n            <button class="pb-adjust-btn" data-action="word-spacing-increase">+</button>\n            <span class="pb-unit-small">px</span>\n          </div>\n        </div>\n      </div>\n    `;const Q=G.querySelector("#lineHeightInput"),P=G.querySelector("#letterSpacingInput"),T=G.querySelector("#wordSpacingInput");Q.addEventListener("input",()=>{e.style.lineHeight=Q.value,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.lineHeight=Q.value),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.lineHeight=Q.value),n(),this.saveState()}),P.addEventListener("input",()=>{const y=P.value+"px";e.style.letterSpacing=y,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.letterSpacing=y),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.letterSpacing=y),n(),this.saveState()}),T.addEventListener("input",()=>{const y=T.value+"px";e.style.wordSpacing=y,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.wordSpacing=y),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.wordSpacing=y),n(),this.saveState()}),G.querySelectorAll(".pb-adjust-btn").forEach(y=>{y.addEventListener("click",()=>{const k=y.getAttribute("data-action");if(k.includes("line-height")){const L=parseFloat(Q.value),O=k.includes("decrease")?Math.max(.5,L-.1):Math.min(3,L+.1);Q.value=O.toFixed(1),e.style.lineHeight=O.toString(),this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.lineHeight=O.toString()),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.lineHeight=O.toString())}else if(k.includes("letter-spacing")){const L=parseFloat(P.value),O=k.includes("decrease")?Math.max(-5,L-.5):Math.min(20,L+.5);P.value=O.toString();const $=O+"px";e.style.letterSpacing=$,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.letterSpacing=$),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.letterSpacing=$)}else if(k.includes("word-spacing")){const L=parseFloat(T.value),O=k.includes("decrease")?Math.max(-10,L-1):Math.min(30,L+1);T.value=O.toString();const $=O+"px";e.style.wordSpacing=$,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.wordSpacing=$),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.wordSpacing=$)}n(),this.saveState()})}),c.appendChild(G);const q=document.createElement("div");q.className="pb-property-group pb-property-enhanced";const K=o.textTransform,Z=o.textShadow&&"none"!==o.textShadow;q.innerHTML=`\n      <label>Efeitos</label>\n      <div class="pb-effects-grid">\n        <button class="pb-effect-btn ${"uppercase"===K?"active":""}" data-transform="uppercase">ABC</button>\n        <button class="pb-effect-btn ${"lowercase"===K?"active":""}" data-transform="lowercase">abc</button>\n        <button class="pb-effect-btn ${"capitalize"===K?"active":""}" data-transform="capitalize">Abc</button>\n        <button class="pb-effect-btn ${Z?"active":""}" data-effect="shadow">Sombra</button>\n      </div>\n      <div class="pb-shadow-controls" style="display: ${Z?"block":"none"};">\n        <label class="pb-small-label">Configurar Sombra</label>\n        <div class="pb-shadow-inputs">\n          <input type="number" class="pb-shadow-input" placeholder="X" value="2" id="shadowX">\n          <input type="number" class="pb-shadow-input" placeholder="Y" value="2" id="shadowY">\n          <input type="number" class="pb-shadow-input" placeholder="Blur" value="4" id="shadowBlur">\n          <input type="color" class="pb-shadow-color" value="#000000" id="shadowColor">\n        </div>\n      </div>\n    `;const ee=q.querySelectorAll("[data-transform]"),te=q.querySelector('[data-effect="shadow"]'),se=q.querySelector(".pb-shadow-controls"),j={x:q.querySelector("#shadowX"),y:q.querySelector("#shadowY"),blur:q.querySelector("#shadowBlur"),color:q.querySelector("#shadowColor")};ee.forEach(y=>{y.addEventListener("click",()=>{const k=y.getAttribute("data-transform"),L=y.classList.contains("active");ee.forEach(O=>O.classList.remove("active")),L?(e.style.textTransform="none",this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.textTransform="none"),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.textTransform="none")):(y.classList.add("active"),e.style.textTransform=k,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.textTransform=k),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.textTransform=k)),n(),this.saveState()})});const W=()=>{const $=`${j.x.value}px ${j.y.value}px ${j.blur.value}px ${j.color.value}`;e.style.textShadow=$,this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.textShadow=$),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.textShadow=$),n(),this.saveState()};te.addEventListener("click",()=>{const y=te.classList.contains("active");te.classList.toggle("active"),se.style.display=y?"none":"block",y?(e.style.textShadow="none",this.currentPanelContent&&this.currentPanelContent===e&&(this.currentPanelContent.style.textShadow="none"),this.currentEditableElement&&this.currentEditableElement===e&&(this.currentEditableElement.style.textShadow="none"),n(),this.saveState()):W()}),Object.values(j).forEach(y=>{y.addEventListener("input",W)}),c.appendChild(q),this.propertiesContent.appendChild(c)}addImageProperties(e,t){const o=this.createPropertySection("\u{1f5bc}\ufe0f Imagem"),n=t.getAttribute("data-component-props")||"{}",r=this.safeParseJSON(n),a=document.createElement("div");a.className="pb-property-group pb-property-enhanced";const i=e.offsetWidth,s=e.offsetHeight;a.innerHTML=`\n      <label style="display: flex; align-items: center; gap: 6px; margin-bottom: 12px;">\n        <span style="font-size: 16px;">\u{1f4cf}</span>\n        <span style="font-weight: 600; color: #1f2937;">Dimens\xf5es</span>\n      </label>\n      <div class="pb-size-presets" style="\n        display: grid;\n        grid-template-columns: repeat(3, 1fr);\n        gap: 8px;\n        margin-bottom: 12px;\n      ">\n        <button class="pb-preset-size" data-width="300" title="Pequena" style="\n          padding: 10px;\n          background: #f3f4f6;\n          border: 2px solid transparent;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 13px;\n          font-weight: 600;\n          color: #6b7280;\n          transition: all 0.2s ease;\n        ">S (300px)</button>\n        <button class="pb-preset-size" data-width="500" title="M\xe9dia" style="\n          padding: 10px;\n          background: #f3f4f6;\n          border: 2px solid transparent;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 13px;\n          font-weight: 600;\n          color: #6b7280;\n          transition: all 0.2s ease;\n        ">M (500px)</button>\n        <button class="pb-preset-size" data-width="700" title="Grande" style="\n          padding: 10px;\n          background: #f3f4f6;\n          border: 2px solid transparent;\n          border-radius: 8px;\n          cursor: pointer;\n          font-size: 13px;\n          font-weight: 600;\n          color: #6b7280;\n          transition: all 0.2s ease;\n        ">L (700px)</button>\n      </div>\n      <div class="pb-size-custom" style="\n        display: grid;\n        grid-template-columns: 1fr 1fr;\n        gap: 12px;\n        margin-bottom: 10px;\n      ">\n        <div>\n          <label class="pb-small-label" style="display: block; margin-bottom: 6px; color: #374151; font-weight: 500;">Largura</label>\n          <div style="display: flex; align-items: center; gap: 6px;">\n            <input type="number" class="pb-input-number" id="imgWidth" value="${i}" min="50" step="10" style="\n              flex: 1;\n              padding: 8px 10px;\n              border: 1px solid #e5e7eb;\n              border-radius: 6px;\n              font-size: 13px;\n              transition: border-color 0.2s ease;\n            ">\n            <span class="pb-unit" style="color: #9ca3af; font-weight: 500;">px</span>\n          </div>\n        </div>\n        <div>\n          <label class="pb-small-label" style="display: block; margin-bottom: 6px; color: #374151; font-weight: 500;">Altura</label>\n          <div style="display: flex; align-items: center; gap: 6px;">\n            <input type="number" class="pb-input-number" id="imgHeight" value="${s}" min="50" step="10" style="\n              flex: 1;\n              padding: 8px 10px;\n              border: 1px solid #e5e7eb;\n              border-radius: 6px;\n              font-size: 13px;\n              transition: border-color 0.2s ease;\n            ">\n            <span class="pb-unit" style="color: #9ca3af; font-weight: 500;">px</span>\n          </div>\n        </div>\n      </div>\n      <label class="pb-checkbox-label" style="\n        display: flex;\n        align-items: center;\n        gap: 8px;\n        padding: 8px;\n        background: #fef3c7;\n        border-radius: 6px;\n        cursor: pointer;\n        font-size: 13px;\n        font-weight: 500;\n        color: #92400e;\n      ">\n        <input type="checkbox" id="maintainRatio" checked style="width: 18px; height: 18px; cursor: pointer;">\n        <span>\u{1f517} Manter propor\xe7\xe3o</span>\n      </label>\n    `;const d=a.querySelector("#imgWidth"),c=a.querySelector("#imgHeight"),p=a.querySelector("#maintainRatio"),g=a.querySelectorAll(".pb-preset-size");let u=i/s;const b=(w,I)=>{d.value=w.toString(),!I&&p.checked&&(I=Math.round(w/u)),I&&(c.value=I.toString()),e.style.width=w+"px",e.style.height=(I||Math.round(w/u))+"px",this.saveState()};d?.addEventListener("input",()=>{const w=parseInt(d.value);p.checked&&(c.value=Math.round(w/u).toString()),e.style.width=w+"px",e.style.height=c.value+"px",this.saveState()}),c?.addEventListener("input",()=>{const w=parseInt(c.value);p.checked&&(d.value=Math.round(w*u).toString()),e.style.width=d.value+"px",e.style.height=w+"px",this.saveState()}),g.forEach(w=>{w.addEventListener("click",()=>{const I=parseInt(w.getAttribute("data-width"));b(I),g.forEach(F=>{F.style.background="#f3f4f6",F.style.borderColor="transparent",F.style.color="#6b7280"}),w.style.background="#e0e7ff",w.style.borderColor="#6366f1",w.style.color="#4338ca"}),w.addEventListener("mouseenter",()=>{w.style.background="#f0f1f3"}),w.addEventListener("mouseleave",()=>{parseInt(d.value)!==parseInt(w.getAttribute("data-width"))&&(w.style.background="#f3f4f6")})}),o.appendChild(a);const h=document.createElement("div");h.className="pb-property-group pb-property-enhanced";const f=r.alinhamento||"left";h.innerHTML=`\n      <label style="display: flex; align-items: center; gap: 6px; margin-bottom: 12px;">\n        <span style="font-size: 16px;">\u2b05\ufe0f</span>\n        <span style="font-weight: 600; color: #1f2937;">Alinhamento</span>\n      </label>\n      <div style="display: grid; grid-template-columns: repeat(3, 1fr); gap: 8px;">\n        <button class="pb-align-btn" data-align="left" style="\n          padding: 12px;\n          background: ${"left"===f?"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)":"#f3f4f6"};\n          color: ${"left"===f?"#fff":"#6b7280"};\n          border: 2px solid ${"left"===f?"#6366f1":"#e5e7eb"};\n          border-radius: 8px;\n          cursor: pointer;\n          font-weight: 600;\n          font-size: 13px;\n          transition: all 0.2s ease;\n        ">\n          \u25c0 Esqu.\n        </button>\n        <button class="pb-align-btn" data-align="center" style="\n          padding: 12px;\n          background: ${"center"===f?"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)":"#f3f4f6"};\n          color: ${"center"===f?"#fff":"#6b7280"};\n          border: 2px solid ${"center"===f?"#6366f1":"#e5e7eb"};\n          border-radius: 8px;\n          cursor: pointer;\n          font-weight: 600;\n          font-size: 13px;\n          transition: all 0.2s ease;\n        ">\n          \u25ae Centro\n        </button>\n        <button class="pb-align-btn" data-align="right" style="\n          padding: 12px;\n          background: ${"right"===f?"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)":"#f3f4f6"};\n          color: ${"right"===f?"#fff":"#6b7280"};\n          border: 2px solid ${"right"===f?"#6366f1":"#e5e7eb"};\n          border-radius: 8px;\n          cursor: pointer;\n          font-weight: 600;\n          font-size: 13px;\n          transition: all 0.2s ease;\n        ">\n          Direit. \u25b6\n        </button>\n      </div>\n    `;const m=h.querySelectorAll(".pb-align-btn");m.forEach(w=>{w.addEventListener("click",()=>{const I=w.getAttribute("data-align");r.alinhamento=I,t.setAttribute("data-component-props",JSON.stringify(r)),m.forEach(F=>{const z=F,J=F.getAttribute("data-align")===I;z.style.background=J?"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)":"#f3f4f6",z.style.color=J?"#fff":"#6b7280",z.style.borderColor=J?"#6366f1":"#e5e7eb"}),this.applyImageStyles(e,t),this.saveState()}),w.addEventListener("mouseenter",()=>{w.classList.contains("active")||(w.style.background="#e5e7eb")}),w.addEventListener("mouseleave",()=>{w.classList.contains("active")||(w.style.background="#f3f4f6")})}),o.appendChild(h);const x=document.createElement("div");x.className="pb-property-group pb-property-enhanced";const C=parseInt(r.borderRadius||e.style.borderRadius)||0;x.innerHTML=`\n      <label style="display: flex; align-items: center; gap: 6px; margin-bottom: 12px;">\n        <span style="font-size: 16px;">\u{1f518}</span>\n        <span style="font-weight: 600; color: #1f2937;">Cantos Arredondados</span>\n      </label>\n      <div style="display: flex; gap: 6px; margin-bottom: 12px; flex-wrap: wrap;">\n        <button class="pb-preset-radius" data-radius="0" style="\n          padding: 6px 12px;\n          background: ${0===C?"#6366f1":"#f3f4f6"};\n          color: ${0===C?"#fff":"#6b7280"};\n          border: 1px solid ${0===C?"#6366f1":"#e5e7eb"};\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 12px;\n          font-weight: 600;\n          transition: all 0.2s ease;\n        ">Nenhum</button>\n        <button class="pb-preset-radius" data-radius="8" style="\n          padding: 6px 12px;\n          background: ${8===C?"#6366f1":"#f3f4f6"};\n          color: ${8===C?"#fff":"#6b7280"};\n          border: 1px solid ${8===C?"#6366f1":"#e5e7eb"};\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 12px;\n          font-weight: 600;\n          transition: all 0.2s ease;\n        ">Leve</button>\n        <button class="pb-preset-radius" data-radius="16" style="\n          padding: 6px 12px;\n          background: ${16===C?"#6366f1":"#f3f4f6"};\n          color: ${16===C?"#fff":"#6b7280"};\n          border: 1px solid ${16===C?"#6366f1":"#e5e7eb"};\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 12px;\n          font-weight: 600;\n          transition: all 0.2s ease;\n        ">M\xe9dio</button>\n        <button class="pb-preset-radius" data-radius="24" style="\n          padding: 6px 12px;\n          background: ${24===C?"#6366f1":"#f3f4f6"};\n          color: ${24===C?"#fff":"#6b7280"};\n          border: 1px solid ${24===C?"#6366f1":"#e5e7eb"};\n          border-radius: 4px;\n          cursor: pointer;\n          font-size: 12px;\n          font-weight: 600;\n          transition: all 0.2s ease;\n        ">Alto</button>\n      </div>\n      <div style="margin-bottom: 8px;">\n        <label class="pb-small-label" style="display: block; margin-bottom: 8px; color: #374151; font-weight: 500;">Personalizado</label>\n        <div style="display: flex; align-items: center; gap: 8px;">\n          <input type="range" class="pb-slider" id="borderRadiusSlider" min="0" max="50" value="${C}" style="\n            flex: 1;\n            height: 6px;\n            border-radius: 3px;\n            background: linear-gradient(to right, #e5e7eb 0%, #6366f1 ${2*C}%, #e5e7eb ${2*C}%, #e5e7eb 100%);\n            outline: none;\n            cursor: pointer;\n            -webkit-appearance: none;\n            appearance: none;\n          ">\n          <span class="pb-slider-value" style="\n            min-width: 50px;\n            padding: 6px 10px;\n            background: #f3f4f6;\n            border-radius: 6px;\n            font-size: 12px;\n            font-weight: 600;\n            color: #1f2937;\n            text-align: center;\n          ">${C}px</span>\n        </div>\n      </div>\n    `;const v=x.querySelector("#borderRadiusSlider"),M=x.querySelector(".pb-slider-value"),_=x.querySelectorAll(".pb-preset-radius"),B=w=>{r.borderRadius=w.toString(),t.setAttribute("data-component-props",JSON.stringify(r)),e.style.borderRadius=`${w}px`,M.textContent=`${w}px`,_.forEach(I=>{const F=parseInt(I.getAttribute("data-radius")),z=I;F===w?(z.style.background="#6366f1",z.style.color="#fff",z.style.borderColor="#6366f1"):(z.style.background="#f3f4f6",z.style.color="#6b7280",z.style.borderColor="#e5e7eb")}),this.applyImageStyles(e,t),this.saveState()};v?.addEventListener("input",()=>{B(parseInt(v.value))}),_.forEach(w=>{w.addEventListener("click",()=>{B(parseInt(w.getAttribute("data-radius")))})}),o.appendChild(x);const A=document.createElement("div");A.className="pb-property-group pb-property-enhanced",A.innerHTML=`\n      <label style="display: flex; align-items: center; gap: 6px; margin-bottom: 12px;">\n        <span style="font-size: 16px;">\u{1f517}</span>\n        <span style="font-weight: 600; color: #1f2937;">Link (Opcional)</span>\n      </label>\n      <input type="url" class="pb-input" id="linkUrlInput" value="${r.linkUrl||""}" placeholder="https://exemplo.com" style="\n        width: 100%;\n        padding: 10px 12px;\n        border: 2px solid #e5e7eb;\n        border-radius: 8px;\n        font-size: 13px;\n        transition: border-color 0.2s ease;\n        margin-bottom: 10px;\n      ">\n      <small style="color: #6b7280; font-size: 12px; display: flex; align-items: center; gap: 6px;">\n        \u{1f4a1} Deixe em branco para desativar o link\n      </small>\n    `;const E=A.querySelector("#linkUrlInput");E?.addEventListener("input",()=>{r.linkUrl=E.value,t.setAttribute("data-component-props",JSON.stringify(r))}),E?.addEventListener("change",()=>{r.linkUrl=E.value,t.setAttribute("data-component-props",JSON.stringify(r)),e.setAttribute("data-link",E.value),this.applyImageStyles(e,t),this.setupImageLinkHandler(e,t),this.saveState()}),E?.addEventListener("focus",()=>{E.style.borderColor="#6366f1",E.style.boxShadow="0 0 0 3px rgba(99, 102, 241, 0.1)"}),E?.addEventListener("blur",()=>{E.style.borderColor="#e5e7eb",E.style.boxShadow="none"}),o.appendChild(A);const D=document.createElement("div");D.className="pb-property-group pb-property-enhanced";const N=r.abrirEm||"_blank";D.innerHTML=`\n      <label style="display: flex; align-items: center; gap: 6px; margin-bottom: 12px;">\n        <span style="font-size: 16px;">\u{1f3af}</span>\n        <span style="font-weight: 600; color: #1f2937;">Abrir Em</span>\n      </label>\n      <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 8px;">\n        <button class="pb-target-btn" data-target="_blank" style="\n          padding: 10px;\n          background: ${"_blank"===N?"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)":"#f3f4f6"};\n          color: ${"_blank"===N?"#fff":"#6b7280"};\n          border: 2px solid ${"_blank"===N?"#6366f1":"#e5e7eb"};\n          border-radius: 8px;\n          cursor: pointer;\n          font-weight: 600;\n          font-size: 13px;\n          transition: all 0.2s ease;\n        ">\n          \u{1f4c2} Nova Aba\n        </button>\n        <button class="pb-target-btn" data-target="_self" style="\n          padding: 10px;\n          background: ${"_self"===N?"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)":"#f3f4f6"};\n          color: ${"_self"===N?"#fff":"#6b7280"};\n          border: 2px solid ${"_self"===N?"#6366f1":"#e5e7eb"};\n          border-radius: 8px;\n          cursor: pointer;\n          font-weight: 600;\n          font-size: 13px;\n          transition: all 0.2s ease;\n        ">\n          \u27a1\ufe0f Mesma Aba\n        </button>\n      </div>\n    `;const V=D.querySelectorAll(".pb-target-btn");V.forEach(w=>{w.addEventListener("click",()=>{const I=w.getAttribute("data-target");r.abrirEm=I,t.setAttribute("data-component-props",JSON.stringify(r)),e.setAttribute("data-target",I),V.forEach(F=>{const z=F,J=F.getAttribute("data-target")===I;z.style.background=J?"linear-gradient(135deg, #6366f1 0%, #4f46e5 100%)":"#f3f4f6",z.style.color=J?"#fff":"#6b7280",z.style.borderColor=J?"#6366f1":"#e5e7eb"}),this.applyImageStyles(e,t),this.saveState()}),w.addEventListener("mouseenter",()=>{w.getAttribute("data-target")!==N&&(w.style.background="#e5e7eb")}),w.addEventListener("mouseleave",()=>{w.getAttribute("data-target")!==N&&(w.style.background="#f3f4f6")})}),o.appendChild(D);const Y=document.createElement("div");Y.className="pb-property-group pb-property-enhanced",Y.innerHTML=`\n      <label style="display: flex; align-items: center; gap: 6px; margin-bottom: 12px;">\n        <span style="font-size: 16px;">\u267f</span>\n        <span style="font-weight: 600; color: #1f2937;">Texto Alternativo</span>\n      </label>\n      <input type="text" class="pb-input" id="altTextInput" value="${r.altText||e.alt}" placeholder="Descri\xe7\xe3o breve da imagem" style="\n        width: 100%;\n        padding: 10px 12px;\n        border: 2px solid #e5e7eb;\n        border-radius: 8px;\n        font-size: 13px;\n        transition: border-color 0.2s ease;\n        margin-bottom: 8px;\n      ">\n      <small style="color: #6b7280; font-size: 12px; display: flex; align-items: center; gap: 6px;">\n        \u{1f50d} Importante para SEO e acessibilidade\n      </small>\n    `;const U=Y.querySelector("#altTextInput");U?.addEventListener("change",()=>{r.altText=U.value,t.setAttribute("data-component-props",JSON.stringify(r)),e.alt=U.value,this.applyImageStyles(e,t),this.saveState()}),U?.addEventListener("focus",()=>{U.style.borderColor="#6366f1",U.style.boxShadow="0 0 0 3px rgba(99, 102, 241, 0.1)"}),U?.addEventListener("blur",()=>{U.style.borderColor="#e5e7eb",U.style.boxShadow="none"}),o.appendChild(Y),this.propertiesContent.appendChild(o),this.applyImageStyles(e,t)}addImagemClicavelProperties(e,t){const o=this.createPropertySection("\u{1f5bc}\ufe0f Imagem Clic\xe1vel"),n=t.getAttribute("data-component-props")||"{}",r=this.safeParseJSON(n),a=document.createElement("div");a.className="pb-property-group pb-property-enhanced",a.innerHTML='\n      <label>\u{1f5bc}\ufe0f Imagem</label>\n      <button class="pb-input-button" style="width: 100%; padding: 10px; background: #f3f4f6; border: 1px solid #d1d5db; border-radius: 6px; cursor: pointer; font-size: 14px;">\n        \u{1f4c1} Selecionar Imagem\n      </button>\n      <small style="color: #6b7280; font-size: 11px; margin-top: 4px; display: block;">\n        Clique para escolher uma imagem da biblioteca\n      </small>\n    ',a.querySelector("button")?.addEventListener("click",()=>{this.openImageLibrary(e)}),o.appendChild(a);const s=document.createElement("div");s.className="pb-property-group pb-property-enhanced",s.innerHTML=`\n      <label>\u{1f517} Link</label>\n      <input type="url" class="pb-input" id="linkUrlInput" value="${r.linkUrl||""}" placeholder="https://exemplo.com">\n      <small style="color: #6b7280; font-size: 11px; margin-top: 4px; display: block;">\n        URL para onde a imagem deve levar\n      </small>\n    `;const d=s.querySelector("#linkUrlInput");d?.addEventListener("change",()=>{r.linkUrl=d.value,t.setAttribute("data-component-props",JSON.stringify(r)),e.setAttribute("data-link",d.value),this.saveState()}),o.appendChild(s);const c=document.createElement("div");c.className="pb-property-group pb-property-enhanced";const p=r.abrirEm||"_blank";c.innerHTML=`\n      <label>\u{1f3af} Abrir Como</label>\n      <select class="pb-input" id="targetSelect" style="width: 100%;">\n        <option value="_blank" ${"_blank"===p?"selected":""}>Nova aba</option>\n        <option value="_self" ${"_self"===p?"selected":""}>Mesma aba</option>\n      </select>\n    `;const g=c.querySelector("#targetSelect");g?.addEventListener("change",()=>{r.abrirEm=g.value,t.setAttribute("data-component-props",JSON.stringify(r)),e.setAttribute("data-target",g.value),this.saveState()}),o.appendChild(c);const u=document.createElement("div");u.className="pb-property-group pb-property-enhanced";const b=r.alinhamento||"left";u.innerHTML=`\n      <label>\u2b05\ufe0f Alinhamento</label>\n      <div style="display: flex; gap: 8px;">\n        <button class="pb-align-btn" data-align="left" style="flex: 1; padding: 8px; background: ${"left"===b?"#6366f1":"#f3f4f6"}; color: ${"left"===b?"#fff":"#000"}; border: none; border-radius: 4px; cursor: pointer;">\n          Esquerda\n        </button>\n        <button class="pb-align-btn" data-align="center" style="flex: 1; padding: 8px; background: ${"center"===b?"#6366f1":"#f3f4f6"}; color: ${"center"===b?"#fff":"#000"}; border: none; border-radius: 4px; cursor: pointer;">\n          Centro\n        </button>\n        <button class="pb-align-btn" data-align="right" style="flex: 1; padding: 8px; background: ${"right"===b?"#6366f1":"#f3f4f6"}; color: ${"right"===b?"#fff":"#000"}; border: none; border-radius: 4px; cursor: pointer;">\n          Direita\n        </button>\n      </div>\n    `;const h=u.querySelectorAll(".pb-align-btn");h.forEach(_=>{_.addEventListener("click",()=>{const B=_.getAttribute("data-align");r.alinhamento=B,t.setAttribute("data-component-props",JSON.stringify(r)),h.forEach(A=>{const E=A;A.getAttribute("data-align")===B?(E.style.background="#6366f1",E.style.color="#fff"):(E.style.background="#f3f4f6",E.style.color="#000")}),this.saveState()})}),o.appendChild(u);const f=document.createElement("div");f.className="pb-property-group pb-property-enhanced";const m=parseInt(r.borderRadius||"8")||8;f.innerHTML=`\n      <label>\u{1f518} Cantos Arredondados</label>\n      <div class="pb-slider-control">\n        <input type="range" class="pb-slider" id="borderRadiusSlider" min="0" max="50" value="${m}">\n        <span class="pb-slider-value">${m}px</span>\n      </div>\n    `;const x=f.querySelector("#borderRadiusSlider"),C=f.querySelector(".pb-slider-value");x?.addEventListener("input",()=>{const _=x.value;r.borderRadius=_,t.setAttribute("data-component-props",JSON.stringify(r)),e.style.borderRadius=`${_}px`,C.textContent=`${_}px`,this.saveState()}),o.appendChild(f);const v=document.createElement("div");v.className="pb-property-group",v.innerHTML=`\n      <label>\u267f Texto Alternativo</label>\n      <input type="text" class="pb-input" id="altTextInput" value="${r.altText||""}" placeholder="Descri\xe7\xe3o para acessibilidade">\n      <small style="color: #6b7280; font-size: 11px; margin-top: 4px; display: block;">\n        Importante para SEO e acessibilidade\n      </small>\n    `;const M=v.querySelector("#altTextInput");M?.addEventListener("change",()=>{r.altText=M.value,t.setAttribute("data-component-props",JSON.stringify(r)),e.alt=M.value,this.saveState()}),o.appendChild(v),this.propertiesContent.appendChild(o)}addButtonProperties(e,t,o){const n=window.getComputedStyle(t),a=()=>{this.applyButtonHoverStyles(e,(()=>{const P=window.getComputedStyle(e);return{background:e.style.background||P.backgroundColor||"",color:e.style.color||P.color||"",borderColor:e.style.borderColor||P.borderTopColor||"",boxShadow:e.style.boxShadow||P.boxShadow||"",hoverBackground:e.dataset.hoverBackground||"",hoverColor:e.dataset.hoverColor||"",hoverBorderColor:e.dataset.hoverBorderColor||"",hoverShadow:e.dataset.hoverShadow||""}})())};a();const i=window.getComputedStyle(e),s=this.createPropertySection("\u{1f518} Bot\xe3o"),c=this.createTextInput("Texto do Bot\xe3o",e.textContent?.trim()??"","Clique Aqui",P=>{const T=P.trim();e.textContent=T.length?T:"Clique Aqui"});c.querySelector("input")?.addEventListener("change",()=>this.saveState()),s.appendChild(c),s.appendChild(this.createSelectInput("Alinhamento",t.style.textAlign||n.textAlign||"left",[{value:"left",label:"Esquerda"},{value:"center",label:"Centralizado"},{value:"right",label:"Direita"}],P=>{t.style.textAlign=P,this.saveState()}));const g="true"===e.dataset.fullWidth||"block"===i.display&&"100%"===i.width,u=document.createElement("div");u.className="pb-property-group",u.innerHTML=`\n      <label>Largura</label>\n      <label style="display: flex; align-items: center; gap: 8px; font-size: 12px;">\n        <input type="checkbox" ${g?"checked":""}>\n        <span>Ocupar 100% da largura dispon\xedvel</span>\n      </label>\n    `;const b=u.querySelector('input[type="checkbox"]');b?.addEventListener("change",()=>{const P=!!b.checked;e.dataset.fullWidth=P?"true":"false",P?(e.style.display="block",e.style.width="100%"):(e.style.display="inline-block",e.style.removeProperty("width")),this.saveState()}),s.appendChild(u);const f=this.createTextInput("Largura (CSS)",e.style.width||(g?"100%":""),"Ex: auto, 200px, 100%",P=>{const T=P.trim();T?(e.style.width=T,"100%"===T?(e.dataset.fullWidth="true",e.style.display="block"):(e.dataset.fullWidth="false",e.style.display="inline-block")):(e.dataset.fullWidth="false",e.style.removeProperty("width"),e.style.display="inline-block")});f.querySelector("input")?.addEventListener("change",()=>this.saveState()),s.appendChild(f);const m=this.rgbToHex(i.color||"#000000");s.appendChild(this.createColorInput("Cor do Texto",m,P=>{e.style.color=P,a(),this.saveState()}));const x=this.normalizeColorValue(e.style.background||i.backgroundColor);s.appendChild(this.createColorInputWithRGBA("Cor de Fundo",x,P=>{e.style.background=P,a(),this.saveState()}));const C=this.normalizeColorValue(t.style.background||n.backgroundColor);s.appendChild(this.createColorInputWithRGBA("Fundo do Container",C,P=>{t.style.background=P,this.saveState()}));const v=this.parsePxValue(i.fontSize,16),M=this.createNumberInput("Tamanho da Fonte",v,"px",P=>{e.style.fontSize=`${P}px`});M.querySelector("input")?.addEventListener("change",()=>this.saveState()),s.appendChild(M);const _=this.parsePxValue(i.borderTopLeftRadius,6),B=this.createNumberInput("Raio dos Cantos",_,"px",P=>{e.style.borderRadius=`${P}px`});B.querySelector("input")?.addEventListener("change",()=>this.saveState()),s.appendChild(B);const A=e.style.padding||`${this.parsePxValue(i.paddingTop,12)}px ${this.parsePxValue(i.paddingLeft,24)}px`,E=this.createTextInput("Padding",A,"Ex: 12px 24px",P=>{e.style.padding=P});E.querySelector("input")?.addEventListener("change",()=>this.saveState()),s.appendChild(E);const D=this.parsePxValue(e.style.borderWidth||i.borderTopWidth,2),N=this.createNumberInput("Espessura da Borda",D,"px",P=>{e.style.borderWidth=`${P}px`,(!e.style.borderStyle||"none"===e.style.borderStyle)&&(e.style.borderStyle=P>0?"solid":"none"),a()});N.querySelector("input")?.addEventListener("change",()=>this.saveState()),s.appendChild(N),s.appendChild(this.createSelectInput("Estilo da Borda",e.style.borderStyle||i.borderTopStyle||"solid",[{value:"none",label:"Nenhuma"},{value:"solid",label:"S\xf3lida"},{value:"dashed",label:"Tracejada"},{value:"dotted",label:"Pontilhada"},{value:"double",label:"Dupla"}],P=>{e.style.borderStyle=P,"none"===P?e.style.borderWidth="0px":(!e.style.borderWidth||"0px"===e.style.borderWidth)&&(e.style.borderWidth="1px"),a(),this.saveState()}));const U=this.rgbToHex(e.style.borderColor||i.borderTopColor||"#6366f1");s.appendChild(this.createColorInput("Cor da Borda",U,P=>{e.style.borderColor=P,(!e.style.borderStyle||"none"===e.style.borderStyle)&&(e.style.borderStyle="solid"),(!e.style.borderWidth||"0px"===e.style.borderWidth)&&(e.style.borderWidth="1px"),a(),this.saveState()}));const I=this.createTextInput("Sombra (Box Shadow)",e.style.boxShadow||i.boxShadow||"","Ex: 0 8px 16px rgba(0,0,0,0.15)",P=>{const T=P.trim();T?e.style.boxShadow=T:e.style.removeProperty("box-shadow"),a()});I.querySelector("input")?.addEventListener("change",()=>this.saveState()),s.appendChild(I);const z=this.parsePxValue(n.marginTop,0),J=this.parsePxValue(n.marginBottom,0),ae=this.createNumberInput("Margem Superior",z,"px",P=>{t.style.marginTop=`${P}px`});ae.querySelector("input")?.addEventListener("change",()=>this.saveState()),s.appendChild(ae);const re=this.createNumberInput("Margem Inferior",J,"px",P=>{t.style.marginBottom=`${P}px`});re.querySelector("input")?.addEventListener("change",()=>this.saveState()),s.appendChild(re);const G=this.createPropertySection("\u{1f5b1} Hover"),ie=(P,T,q)=>{const K=document.createElement("div");K.className="pb-property-group";const Z=document.createElement("div");Z.style.cssText="display: flex; gap: 8px; align-items: center;";const ee=e.dataset[T]||"",te=q||"#000000",se=O=>this.rgbToHex(O||te||"#000000"),j=document.createElement("input");j.type="color",j.style.cssText="width: 42px; height: 32px; border: none; border-radius: 4px; padding: 0; cursor: pointer;",j.value=se(ee&&"transparent"!==ee?ee:te);const W=document.createElement("input");W.type="text",W.value=ee,W.placeholder="CSS (vazio = padr\xe3o)",W.style.cssText="flex: 1; font-size: 12px; padding: 6px 8px;";const y=document.createElement("button");y.type="button",y.textContent="Padr\xe3o",y.style.cssText="padding: 6px 10px; font-size: 12px; border: 1px solid #d1d5db; border-radius: 4px; background: #f9fafb; cursor: pointer;";const k=(O,$)=>{const le=O.trim();le?e.dataset[T]=le:delete e.dataset[T],a(),$&&this.saveState()},L=O=>{j.value=se(O&&"transparent"!==O?O:te)};return j.addEventListener("input",()=>{const O=j.value;W.value=O,k(O,!1)}),j.addEventListener("change",()=>{const O=j.value;W.value=O,k(O,!0)}),W.addEventListener("blur",()=>{const O=W.value;L(O),k(O,!0)}),W.addEventListener("keydown",O=>{"Enter"===O.key&&(O.preventDefault(),W.blur())}),y.addEventListener("click",()=>{W.value="",L(""),k("",!0)}),Z.appendChild(j),Z.appendChild(W),Z.appendChild(y),K.innerHTML=`<label>${P}</label>`,K.appendChild(Z),K};G.appendChild(ie("Fundo (Hover)","hoverBackground",x)),G.appendChild(ie("Texto (Hover)","hoverColor",m)),G.appendChild(ie("Borda (Hover)","hoverBorderColor",U));const pe=this.createTextInput("Sombra (Hover)",e.dataset.hoverShadow||"","Ex: 0 8px 16px rgba(0,0,0,0.15)",P=>{const T=P.trim();T?e.dataset.hoverShadow=T:delete e.dataset.hoverShadow,a()});pe.querySelector("input")?.addEventListener("change",()=>this.saveState()),G.appendChild(pe),this.propertiesContent.appendChild(s),this.propertiesContent.appendChild(G)}addDividerProperties(e,t){const o=window.getComputedStyle(e),n=this.createPropertySection("\u2796 Divisor");let r=this.parsePxValue(o.borderTopWidth,2),a=o.borderTopStyle||"solid",i=this.rgbToHex(o.borderTopColor||"#e5e7eb");const s=()=>{e.style.borderTop="none"===a||r<=0?"0 none transparent":`${r}px ${a} ${i}`,this.saveState()},d=this.createNumberInput("Espessura",r,"px",v=>{r=v,s()});n.appendChild(d),n.appendChild(this.createSelectInput("Estilo",a,[{value:"solid",label:"S\xf3lido"},{value:"dashed",label:"Tracejado"},{value:"dotted",label:"Pontilhado"},{value:"double",label:"Duplo"},{value:"none",label:"Nenhum"}],v=>{a=v,"none"===v&&(r=0),s()})),n.appendChild(this.createColorInput("Cor",i,v=>{i=v,s()}));const p=this.createTextInput("Largura",e.style.width||o.width||"100%","Ex: 100%, 200px",v=>{e.style.width=v.trim()||"100%"});p.querySelector("input")?.addEventListener("change",()=>this.saveState()),n.appendChild(p);const g=this.parsePxValue(e.style.minHeight||e.style.height||o.minHeight||o.height,10),u=this.createNumberInput("Altura (corpo)",g,"px",v=>{const M=`${v}px`;e.style.minHeight=M,e.style.height=M,this.saveState()});n.appendChild(u);let b=this.parsePxValue(e.style.marginTop||o.marginTop,20),h=this.parsePxValue(e.style.marginBottom||o.marginBottom,20),f=e.getAttribute("data-align")||this.detectHorizontalAlignment(e);const m=v=>{v&&(f=v),this.setDividerLayout(e,f,`${b}px`,`${h}px`),e.setAttribute("data-align",f),this.saveState()};n.appendChild(this.createSelectInput("Alinhamento",f,[{value:"left",label:"Esquerda"},{value:"center",label:"Centralizado"},{value:"right",label:"Direita"}],v=>m(v)));const x=this.createNumberInput("Margem Superior",b,"px",v=>{b=v,m()});n.appendChild(x);const C=this.createNumberInput("Margem Inferior",h,"px",v=>{h=v,m()});n.appendChild(C),this.propertiesContent.appendChild(n)}addSpacerProperties(e,t){const o=window.getComputedStyle(e),n=this.createPropertySection("\u2195\ufe0f Espa\xe7ador"),r=this.parsePxValue(e.style.height||o.height,50),a=this.createNumberInput("Altura",r,"px",f=>{e.style.height=`${f}px`});a.querySelector("input")?.addEventListener("change",()=>this.saveState()),n.appendChild(a);const i=this.normalizeColorValue(e.style.background||o.backgroundColor);n.appendChild(this.createColorInputWithRGBA("Cor de Fundo",i,f=>{e.style.background=f,this.saveState()}));const s="false"!==e.getAttribute("data-pattern"),d=document.createElement("div");d.className="pb-property-group",d.innerHTML=`\n      <label>Textura</label>\n      <label style="display: flex; align-items: center; gap: 8px; font-size: 12px;">\n        <input type="checkbox" ${s?"checked":""}>\n        <span>Exibir textura tracejada</span>\n      </label>\n    `;const c=d.querySelector('input[type="checkbox"]');c?.addEventListener("change",()=>{const f=!!c.checked;e.dataset.pattern=f?"true":"false",e.style.backgroundImage=f?this.getSpacerPattern():"none",this.saveState()}),n.appendChild(d);let p=this.parsePxValue(e.style.marginTop||o.marginTop,0),g=this.parsePxValue(e.style.marginBottom||o.marginBottom,0);const u=()=>{e.style.marginTop=`${p}px`,e.style.marginBottom=`${g}px`,e.style.margin=`${p}px 0 ${g}px`,this.saveState()},b=this.createNumberInput("Margem Superior",p,"px",f=>{p=f,u()});n.appendChild(b);const h=this.createNumberInput("Margem Inferior",g,"px",f=>{g=f,u()});n.appendChild(h),this.propertiesContent.appendChild(n)}addSpacingProperties(e){console.log("\u2795 Adicionando propriedades de espa\xe7amento para:",e);const t=this.createPropertySection("Espa\xe7amento");t.appendChild(this.createSpacingGrid("Padding","padding",e)),t.appendChild(this.createSpacingGrid("Margin","margin",e)),this.propertiesContent.appendChild(t)}addSizeProperties(e){const t=this.createPropertySection("Dimens\xf5es");window.getComputedStyle(e),t.appendChild(this.createTextInput("Largura",e.style.width||"auto","Ex: 100%, 500px, auto",i=>{e.style.width=i,this.persistAdvancedStylesIfNeeded(e),this.saveState()})),t.appendChild(this.createTextInput("Altura",e.style.height||"auto","Ex: 100px, 50vh, auto",i=>{e.style.height=i,this.persistAdvancedStylesIfNeeded(e),this.saveState()})),t.appendChild(this.createTextInput("Largura M\xe1xima",e.style.maxWidth||"none","Ex: 1200px, 100%",i=>{e.style.maxWidth=i,this.persistAdvancedStylesIfNeeded(e),this.saveState()})),this.propertiesContent.appendChild(t)}addBackgroundProperties(e){const t=this.createPropertySection("Fundo"),o=window.getComputedStyle(e);t.appendChild(this.createColorInput("Cor de Fundo",this.rgbToHex(e.style.backgroundColor||o.backgroundColor),r=>{e.style.backgroundColor=r,this.persistAdvancedStylesIfNeeded(e),this.saveState()})),this.propertiesContent.appendChild(t)}addBorderProperties(e){const t=this.createPropertySection("Borda"),o=window.getComputedStyle(e);t.appendChild(this.createNumberInput("Espessura",parseInt(o.borderWidth)||0,"px",r=>{e.style.borderWidth=r+"px",this.persistAdvancedStylesIfNeeded(e),this.saveState()})),t.appendChild(this.createSelectInput("Estilo",e.style.borderStyle||"solid",[{value:"none",label:"Nenhuma"},{value:"solid",label:"S\xf3lida"},{value:"dashed",label:"Tracejada"},{value:"dotted",label:"Pontilhada"}],r=>{e.style.borderStyle=r,this.persistAdvancedStylesIfNeeded(e),this.saveState()})),t.appendChild(this.createColorInput("Cor da Borda",e.style.borderColor||"#000000",r=>{e.style.borderColor=r,this.persistAdvancedStylesIfNeeded(e),this.saveState()})),t.appendChild(this.createNumberInput("Arredondamento",parseInt(o.borderRadius)||0,"px",r=>{e.style.borderRadius=r+"px",this.persistAdvancedStylesIfNeeded(e),this.saveState()})),this.propertiesContent.appendChild(t)}applyImageStyles(e,t){const o=t.getAttribute("data-component-props")||"{}",n=this.safeParseJSON(o);if(t.style.display="flex",t.style.justifyContent="flex-start",n.alinhamento)switch(n.alinhamento){case"center":t.style.justifyContent="center";break;case"right":t.style.justifyContent="flex-end";break;default:t.style.justifyContent="flex-start"}else t.style.justifyContent="flex-start";if(n.borderRadius){const r=this.normalizeCssUnit(n.borderRadius);r&&(e.style.borderRadius=r)}n.linkUrl?(e.style.cursor="pointer",e.style.opacity="0.9",e.setAttribute("data-has-link","true")):(e.style.cursor="default",e.style.opacity="1",e.removeAttribute("data-has-link")),n.altText&&(e.alt=n.altText)}createPropertySection(e){const t=document.createElement("div");return t.className="pb-property-section",t.innerHTML=`<h5 class="pb-property-title">${e}</h5>`,t}createSpacingGrid(e,t,o){const n=document.createElement("div");n.className="pb-property-group";const r=window.getComputedStyle(o),a=parseInt(r[`${t}Top`])||0,i=parseInt(r[`${t}Right`])||0,s=parseInt(r[`${t}Bottom`])||0,d=parseInt(r[`${t}Left`])||0;return n.innerHTML=`\n      <label>${e}</label>\n      <div style="display: grid; grid-template-columns: 1fr 1fr 1fr; grid-template-rows: 1fr 1fr 1fr; gap: 4px; max-width: 120px; margin: 8px auto;">\n        <div></div>\n        <input type="number" data-side="top" value="${a}" min="0" style="width: 100%; padding: 4px; text-align: center; font-size: 11px; border: 1px solid #d1d5db; border-radius: 4px;">\n        <div></div>\n        <input type="number" data-side="left" value="${d}" min="0" style="width: 100%; padding: 4px; text-align: center; font-size: 11px; border: 1px solid #d1d5db; border-radius: 4px;">\n        <div style="display: flex; align-items: center; justify-content: center; background: #f3f4f6; border-radius: 4px; font-size: 10px; color: #6b7280;">px</div>\n        <input type="number" data-side="right" value="${i}" min="0" style="width: 100%; padding: 4px; text-align: center; font-size: 11px; border: 1px solid #d1d5db; border-radius: 4px;">\n        <div></div>\n        <input type="number" data-side="bottom" value="${s}" min="0" style="width: 100%; padding: 4px; text-align: center; font-size: 11px; border: 1px solid #d1d5db; border-radius: 4px;">\n        <div></div>\n      </div>\n    `,n.querySelectorAll("input").forEach(p=>{const g=p,u=g.getAttribute("data-side"),b=()=>{const h=parseInt(g.value)||0,f=`${t}${u.charAt(0).toUpperCase()}${u.slice(1)}`;console.log(`\u{1f527} ${f} alterado para:`,h),o.style[f]=h+"px",this.persistAdvancedStylesIfNeeded(o),this.saveState()};g.addEventListener("input",b),g.addEventListener("change",b)}),n}createNumberInput(e,t,o,n,r){const a=document.createElement("div");a.className="pb-property-group",a.innerHTML=`\n      <label>${e}</label>\n      <div style="display: flex; gap: 8px; align-items: center;">\n        <input type="number" value="${t}" ${r&&void 0!==r.min?`min="${r.min}"`:'min="0"'} ${r&&void 0!==r.max?`max="${r.max}"`:""} style="flex: 1;">\n        <span style="color: #6b7280; font-size: 12px;">${o}</span>\n      </div>\n    `;const i=a.querySelector("input"),s=()=>{const d=parseInt(i.value)||0;console.log(`\u{1f527} ${e} alterado para:`,d),n(d)};return i.addEventListener("input",s),i.addEventListener("change",s),a}createTextInput(e,t,o,n){const r=document.createElement("div");r.className="pb-property-group",r.innerHTML=`\n      <label>${e}</label>\n      <input type="text" value="${t}" placeholder="${o}">\n    `;const a=r.querySelector("input"),i=()=>{console.log(`\u{1f527} ${e} alterado para:`,a.value),n(a.value)};return a.addEventListener("input",i),a.addEventListener("change",i),r}createTextArea(e,t,o,n){const r=document.createElement("div");r.className="pb-property-group",r.innerHTML=`\n      <label>${e}</label>\n      <textarea placeholder="${o}" style="width: 100%; min-height: 80px; resize: vertical; box-sizing: border-box;">${t}</textarea>\n    `;const a=r.querySelector("textarea"),i=()=>{console.log(`\u{1f527} ${e} alterado para:`,a.value),n(a.value)};return a.addEventListener("input",i),a.addEventListener("change",i),r}createTextInputWithImageLibrary(e,t,o,n){const r=document.createElement("div");r.className="pb-property-group";const a=document.createElement("label");a.textContent=e,r.appendChild(a);const i=document.createElement("div");i.style.cssText="display: flex; gap: 8px; align-items: stretch;";const s=document.createElement("input");s.type="text",s.value=t,s.placeholder=o,s.style.cssText="flex: 1;";const d=document.createElement("button");d.innerHTML="\u{1f5bc}\ufe0f",d.title="Abrir Biblioteca de Imagens",d.style.cssText="\n      padding: 8px 12px;\n      background: linear-gradient(135deg, #6366f1 0%, #8b5cf6 100%);\n      color: white;\n      border: none;\n      border-radius: 6px;\n      cursor: pointer;\n      font-size: 16px;\n      transition: all 0.2s;\n      display: flex;\n      align-items: center;\n      justify-content: center;\n    ",d.addEventListener("mouseenter",()=>{d.style.transform="scale(1.05)",d.style.boxShadow="0 4px 12px rgba(99, 102, 241, 0.3)"}),d.addEventListener("mouseleave",()=>{d.style.transform="scale(1)",d.style.boxShadow="none"}),d.addEventListener("click",p=>{p.preventDefault(),console.log("\u{1f5bc}\ufe0f Abrindo biblioteca de imagens para:",e),this.openImageLibraryForProperty(g=>{console.log("\u2705 URL selecionada:",g),s.value=g,n(g)})});const c=()=>{console.log(`\u{1f527} ${e} alterado para:`,s.value),n(s.value)};return s.addEventListener("input",c),s.addEventListener("change",c),i.appendChild(s),i.appendChild(d),r.appendChild(i),r}createColorInputWithRGBA(e,t,o){const n=document.createElement("div");n.className="pb-property-group";const r=document.createElement("div");r.innerHTML=`<label>${e}</label>`;const a=document.createElement("button");a.textContent="\u{1f6ab} Transparente",a.style.cssText=`\n      width: 100%;\n      padding: 8px;\n      margin-bottom: 8px;\n      background: ${"transparent"===t?"#3b82f6":"#f3f4f6"};\n      color: ${"transparent"===t?"white":"#374151"};\n      border: 1px solid #e5e7eb;\n      border-radius: 4px;\n      cursor: pointer;\n      font-size: 12px;\n      transition: all 0.2s;\n    `,a.addEventListener("click",()=>{d.value="transparent",a.style.background="#3b82f6",a.style.color="white",o("transparent")});const i=document.createElement("div");i.style.cssText="display: flex; gap: 8px; align-items: center;";const s=document.createElement("input");s.type="color",s.value=t.startsWith("#")?t:"#000000",s.style.cssText="width: 50px; height: 35px; border: none; border-radius: 4px; cursor: pointer;";const d=document.createElement("input");d.type="text",d.value=t,d.placeholder="#hex, rgb(), rgba() ou transparent",d.style.cssText="flex: 1; font-family: monospace; font-size: 12px; padding: 8px; border: 1px solid #e5e7eb; border-radius: 4px;";const c=()=>{const g=s.value;d.value=g,a.style.background="#f3f4f6",a.style.color="#374151",o(g)},p=()=>{const g=d.value.trim();"transparent"===g?(a.style.background="#3b82f6",a.style.color="white",o("transparent")):g.match(/^#[0-9A-Fa-f]{6}$/)?(s.value=g,a.style.background="#f3f4f6",a.style.color="#374151",o(g)):(g.match(/^rgb\(/i)||g.match(/^rgba\(/i))&&(a.style.background="#f3f4f6",a.style.color="#374151",o(g))};return s.addEventListener("input",c),s.addEventListener("change",c),d.addEventListener("blur",p),d.addEventListener("keypress",g=>{"Enter"===g.key&&p()}),i.appendChild(s),i.appendChild(d),r.appendChild(a),r.appendChild(i),n.appendChild(r),n}createColorInput(e,t,o){const n=document.createElement("div");n.className="pb-property-group",n.innerHTML=`\n      <label>${e}</label>\n      <div style="display: flex; gap: 8px;">\n        <input type="color" value="${t}" style="width: 50px; height: 35px; border: none; border-radius: 4px; cursor: pointer;">\n        <input type="text" value="${t}" style="flex: 1; font-family: monospace;">\n      </div>\n    `;const r=n.querySelectorAll("input")[0],a=n.querySelectorAll("input")[1],i=()=>{const d=r.value;a.value=d,console.log(`\u{1f3a8} ${e} alterado para:`,d),o(d)},s=()=>{const d=a.value;d.match(/^#[0-9A-Fa-f]{6}$/)&&(r.value=d,console.log(`\u{1f3a8} ${e} alterado para:`,d),o(d))};return r.addEventListener("input",i),r.addEventListener("change",i),a.addEventListener("input",s),a.addEventListener("change",s),n}createSelectInput(e,t,o,n){const r=document.createElement("div");r.className="pb-property-group";const a=o.map(s=>`<option value="${s.value}" ${s.value===t?"selected":""}>${s.label}</option>`).join("");r.innerHTML=`\n      <label>${e}</label>\n      <select>${a}</select>\n    `;const i=r.querySelector("select");return i.addEventListener("change",()=>{console.log(`\u{1f527} ${e} alterado para:`,i.value),n(i.value)}),r}parsePxValue(e,t){if(!e||"auto"===e)return t;const o=e.toString().match(/-?\d+(\.\d+)?/);if(!o)return t;const n=parseFloat(o[0]);return Number.isNaN(n)?t:n}parseMarginValues(e){if(!e)return{};const t=e.trim().split(/\s+/);switch(t.length){case 1:return{top:t[0],right:t[0],bottom:t[0],left:t[0]};case 2:return{top:t[0],right:t[1],bottom:t[0],left:t[1]};case 3:return{top:t[0],right:t[1],bottom:t[2],left:t[1]};default:return{top:t[0],right:t[1],bottom:t[2],left:t[3]}}}setDividerLayout(e,t,o,n){const r=o||"20px",a=n||"20px";"left"===t?(e.style.marginLeft="0",e.style.marginRight="auto",e.style.margin=`${r} auto ${a} 0`):"right"===t?(e.style.marginLeft="auto",e.style.marginRight="0",e.style.margin=`${r} 0 ${a} auto`):(e.style.marginLeft="auto",e.style.marginRight="auto",e.style.margin=`${r} auto ${a} auto`),e.style.marginTop=r,e.style.marginBottom=a}detectHorizontalAlignment(e){const t=window.getComputedStyle(e),o=t.marginLeft,n=t.marginRight;return"auto"===o&&"auto"===n?"center":"auto"===n?"left":"auto"===o?"right":"left"}getSpacerPattern(){return"repeating-linear-gradient(45deg, transparent, transparent 10px, rgba(0, 0, 0, 0.02) 10px, rgba(0, 0, 0, 0.02) 20px)"}organizarPropriedadesPorCategoria(e,t,o){const n=[{nome:"Conte\xfado",icone:"\u{1f4dd}",props:[]},{nome:"Estilo",icone:"\u{1f3a8}",props:[]},{nome:"Cores",icone:"\u{1f308}",props:[]},{nome:"Avan\xe7ado",icone:"\u2699\ufe0f",props:[]}];return e.editableProps.forEach(r=>{const a=t[r.key]??r.defaultValue;let i=!0;"titulo-texto-pagina"===e.id&&("padrao"===o&&"subtitulo"===r.key&&(i=!1),"secundario"===o&&("subtituloPrimario"===r.key||"subtituloSecundario"===r.key)&&(i=!1)),i&&("color"===r.type||r.key.toLowerCase().includes("cor")?n[2].props.push({prop:r,currentValue:a}):"select"===r.type&&"estilo"===r.key?n[1].props.push({prop:r,currentValue:a}):"text"===r.type||"textarea"===r.type||r.key.toLowerCase().includes("titulo")||r.key.toLowerCase().includes("descricao")||r.key.toLowerCase().includes("link")?n[0].props.push({prop:r,currentValue:a}):n[3].props.push({prop:r,currentValue:a}))}),n.filter(r=>r.props.length>0)}createCollapsibleCategory(e,t,o,n){const r=document.createElement("div");r.className="pb-category-wrapper",r.style.cssText="\n      margin-bottom: 12px;\n      border: 1px solid #e5e7eb;\n      border-radius: 8px;\n      overflow: hidden;\n      background: white;\n    ";const a=document.createElement("div");a.className="pb-category-header",a.style.cssText="\n      padding: 12px 16px;\n      background: linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%);\n      cursor: pointer;\n      display: flex;\n      justify-content: space-between;\n      align-items: center;\n      user-select: none;\n      transition: background 0.2s ease;\n    ",a.innerHTML=`\n      <div style="display: flex; align-items: center; gap: 8px;">\n        <span style="font-size: 16px;">${t}</span>\n        <strong style="color: #1f2937; font-size: 13px; font-weight: 600;">${e}</strong>\n        <span style="color: #9ca3af; font-size: 11px;">(${n})</span>\n      </div>\n      <span class="pb-category-toggle" style="color: #6b7280; font-size: 18px; transition: transform 0.3s ease;">${o?"\u25bc":"\u25b6"}</span>\n    `;const i=document.createElement("div");return i.className="pb-category-content",i.style.cssText=`\n      padding: ${o?"16px":"0 16px"};\n      max-height: ${o?"2000px":"0"};\n      overflow: hidden;\n      transition: max-height 0.3s ease, padding 0.3s ease;\n      background: white;\n    `,a.addEventListener("click",()=>{const s="0px"!==i.style.maxHeight,d=a.querySelector(".pb-category-toggle");s?(i.style.maxHeight="0",i.style.padding="0 16px",d.textContent="\u25b6"):(i.style.maxHeight="2000px",i.style.padding="16px",d.textContent="\u25bc")}),a.addEventListener("mouseenter",()=>{a.style.background="linear-gradient(135deg, #e9ecef 0%, #dee2e6 100%)"}),a.addEventListener("mouseleave",()=>{a.style.background="linear-gradient(135deg, #f8f9fa 0%, #e9ecef 100%)"}),r.appendChild(a),r.appendChild(i),r}createPropertyInput(e,t,o,n,r){if("image-gallery"===n.id&&"string"==typeof e.key&&e.key.startsWith("imagem"))return null;if("text"===e.type)return e.key.toLowerCase().includes("logo")||e.key.toLowerCase().includes("imagem")||e.label.toLowerCase().includes("logo")||e.label.toLowerCase().includes("imagem")||e.label.toLowerCase().includes("url do logo")?this.createTextInputWithImageLibrary(e.label,t,e.hint||"",i=>this.updateAdvancedComponentProp(o,n,e.key,i)):this.createTextInput(e.label,t,e.hint||"",i=>this.updateAdvancedComponentProp(o,n,e.key,i));if("textarea"===e.type)return this.createTextArea(e.label,t,e.hint||"",a=>this.updateAdvancedComponentProp(o,n,e.key,a));if("select"===e.type&&e.options)return this.createSelectInput(e.label,t,e.options.map(a=>({value:a.value,label:a.label})),a=>{this.updateAdvancedComponentProp(o,n,e.key,a),"estilo"===e.key&&(this.extensionsService.fillExampleData(o,n.id,n,a,e.key),this.showAdvancedComponentProperties(o,n))});if("checkbox"===e.type){const a=document.createElement("div");a.className="pb-property-group",a.innerHTML=`<label>${e.label}</label>`,e.hint&&(a.innerHTML+=`<small style="color: #9ca3af; font-size: 11px; display: block; margin-bottom: 4px;">${e.hint}</small>`);const i=document.createElement("label");i.style.cssText="display: flex; align-items: center; cursor: pointer;";const s=document.createElement("input");s.type="checkbox",s.checked=t,s.style.cssText="margin-right: 8px; width: 18px; height: 18px; cursor: pointer;",s.addEventListener("change",()=>{this.updateAdvancedComponentProp(o,n,e.key,s.checked)});const d=document.createElement("span");return d.textContent=s.checked?"Sim":"N\xe3o",d.style.cssText="color: #6b7280; font-size: 13px;",s.addEventListener("change",()=>{d.textContent=s.checked?"Sim":"N\xe3o"}),i.appendChild(s),i.appendChild(d),a.appendChild(i),a}if("number"===e.type)return this.createNumberInput(e.label,t,"",a=>this.updateAdvancedComponentProp(o,n,e.key,a),{min:e.validation?.min,max:e.validation?.max});if("color"===e.type)return this.createColorInputWithRGBA(e.label,t,a=>this.updateAdvancedComponentProp(o,n,e.key,a));if("button"===e.type){const a=document.createElement("div");a.className="pb-property-group";const i=document.createElement("button");return i.textContent=e.label,i.style.cssText="\n        width: 100%;\n        padding: 10px 16px;\n        background: #3b89b5;\n        color: white;\n        border: none;\n        border-radius: 6px;\n        font-size: 14px;\n        font-weight: 600;\n        cursor: pointer;\n        transition: all 0.2s ease;\n      ",i.addEventListener("mouseover",()=>{i.style.backgroundColor="#2d6b92"}),i.addEventListener("mouseout",()=>{i.style.backgroundColor="#3b89b5"}),i.addEventListener("click",()=>{"accordion"===n.id&&"addItem"===e.key&&this.addAccordionItem(o,n)}),a.appendChild(i),a}return null}applyButtonHoverStyles(e,t){const o=f=>f&&f.trim().length?f.trim():"",n=o(t.background),r=o(t.color),a=o(t.borderColor),i=o(t.boxShadow),s=o(t.hoverBackground),d=o(t.hoverColor),c=o(t.hoverBorderColor),p=o(t.hoverShadow);n?e.dataset.baseBackground=n:delete e.dataset.baseBackground,r?e.dataset.baseColor=r:delete e.dataset.baseColor,a?e.dataset.baseBorderColor=a:delete e.dataset.baseBorderColor,i?e.dataset.baseShadow=i:delete e.dataset.baseShadow,s?e.dataset.hoverBackground=s:delete e.dataset.hoverBackground,d?e.dataset.hoverColor=d:delete e.dataset.hoverColor,c?e.dataset.hoverBorderColor=c:delete e.dataset.hoverBorderColor,p?e.dataset.hoverShadow=p:delete e.dataset.hoverShadow;const g=e._pbHoverHandlers;g&&(e.removeEventListener("mouseenter",g.enter),e.removeEventListener("mouseleave",g.leave),e.removeEventListener("focus",g.enter),e.removeEventListener("blur",g.leave));const u=f=>{const m="hover"===f,x=m&&s?s:n,C=m&&d?d:r,v=m&&c?c:a,M=m&&p?p:i;x?e.style.background=x:e.style.removeProperty("background"),C?e.style.color=C:e.style.removeProperty("color"),v?e.style.borderColor=v:!m&&a?e.style.borderColor=a:m||e.style.removeProperty("border-color"),M?e.style.boxShadow=M:e.style.removeProperty("box-shadow")},b=()=>u("hover"),h=()=>u("base");e.addEventListener("mouseenter",b),e.addEventListener("mouseleave",h),e.addEventListener("focus",b),e.addEventListener("blur",h),e._pbHoverHandlers={enter:b,leave:h},u("base")}normalizeColorValue(e){if(!e||"none"===e)return"#000000";const t=e.trim();if("transparent"===t.toLowerCase())return"transparent";if(t.startsWith("rgba")){const o=t.match(/rgba?\((\d+),\s*(\d+),\s*(\d+),\s*(\d+(?:\.\d+)?)\)/i);return o&&0===parseFloat(o[4])?"transparent":this.rgbToHex(t)}return t.startsWith("rgb")?this.rgbToHex(t):(t.startsWith("#"),t)}rgbToHex(e){if(e.startsWith("#"))return e;const t=e.match(/\d+/g);return t?"#"+[parseInt(t[0]),parseInt(t[1]),parseInt(t[2])].map(a=>{const i=a.toString(16);return 1===i.length?"0"+i:i}).join(""):"#000000"}setupPreviewMode(){const e=document.getElementById("previewBtn");e?(e.style.pointerEvents="auto",e.addEventListener("click",t=>{console.log("\u{1f5b1}\ufe0f Bot\xe3o preview clicado!",this.isPreviewMode?"Desativando preview":"Ativando preview"),t.stopPropagation(),this.togglePreview()}),console.log("\u2705 Preview mode configurado")):console.warn("Preview button not found")}togglePreview(){console.log("\u{1f504} togglePreview chamado. Estado atual:",this.isPreviewMode),this.isPreviewMode=!this.isPreviewMode,console.log("\u{1f504} Novo estado:",this.isPreviewMode);const e=document.querySelector(".page-builder-container"),t=document.getElementById("previewBtn"),o=document.getElementById("canvas"),n=document.querySelector(".pb-sidebar"),r=document.querySelector(".pb-properties-panel");if(e&&t&&o)if(this.isPreviewMode)console.log("\u{1f441}\ufe0f ATIVANDO modo preview..."),e.classList.add("preview-mode"),t.innerHTML="<span>\u270f\ufe0f</span>",t.setAttribute("title","Modo Edi\xe7\xe3o"),t.style.pointerEvents="auto",this.hideProperties(),document.querySelectorAll('[contenteditable="true"]').forEach(d=>{d.setAttribute("contenteditable","false"),d.setAttribute("data-was-editable","true")}),this.formatToolbar&&(this.formatToolbar.style.display="none",this.formatToolbar.style.visibility="hidden"),document.querySelectorAll(".pb-element-controls").forEach(d=>{d.style.display="none",d.style.visibility="hidden"}),this.selectedElement&&(this.selectedElement.classList.remove("selected"),this.selectedElement=null),o.setAttribute("data-preview-mode","true"),o.style.pointerEvents="auto",o.querySelectorAll(".pb-element").forEach(d=>{d.style.cursor="default",d.setAttribute("data-preview-mode","true")}),console.log("\u2705 Preview mode ATIVADO - Visualiza\xe7\xe3o pura sem op\xe7\xf5es de edi\xe7\xe3o");else{console.log("\u270f\ufe0f DESATIVANDO modo preview..."),e.classList.remove("preview-mode"),t.innerHTML="<span>\u{1f441}</span>",t.setAttribute("title","Visualizar"),t.style.pointerEvents="auto";const a=document.querySelectorAll('[data-was-editable="true"]');console.log("\u{1f4dd} Re-habilitando",a.length,"elementos edit\xe1veis"),a.forEach(d=>{d.setAttribute("contenteditable","true"),d.removeAttribute("data-was-editable")}),this.formatToolbar&&(this.formatToolbar.style.display="flex",this.formatToolbar.style.visibility="visible",this.formatToolbar.style.flexWrap="nowrap",this.formatToolbar.style.whiteSpace="nowrap",this.formatToolbar.style.overflowX="auto",this.formatToolbar.style.overflowY="hidden",this.formatToolbar.style.maxHeight="60px"),document.querySelectorAll(".pb-element-controls").forEach(d=>{d.style.display="",d.style.visibility=""}),o.querySelectorAll(".pb-element").forEach(d=>{d.style.cursor="",d.removeAttribute("data-preview-mode")}),o.removeAttribute("data-preview-mode"),o.style.pointerEvents="auto",n&&(n.style.display="",console.log("\u2705 Sidebar reativada")),r&&(r.style.display="",console.log("\u2705 Properties panel reativado")),console.log("\u2705 Preview mode DESATIVADO - Edi\xe7\xe3o habilitada")}else console.error("\u274c Elementos n\xe3o encontrados:",{container:e,previewBtn:t,canvas:o})}setupSidebarToggle(){const e=document.querySelector(".pb-toggle-sidebar"),t=document.querySelector(".pb-sidebar");e&&t?(e.addEventListener("click",n=>{n.preventDefault(),n.stopPropagation(),t.classList.toggle("collapsed");const r=t.classList.contains("collapsed");console.log("\u{1f4e6} Sidebar toggled:",r?"MINIMIZADA":"EXPANDIDA"),localStorage.setItem("pb-sidebar-collapsed",String(r))}),"true"===localStorage.getItem("pb-sidebar-collapsed")&&(console.log("\u{1f4e6} Restaurando sidebar minimizada..."),t.classList.add("collapsed"))):console.warn("Toggle button or sidebar not found")}setupUndoRedo(){const e=document.getElementById("undoBtn"),t=document.getElementById("redoBtn");e&&t?(e.addEventListener("click",()=>{this.undo()}),t.addEventListener("click",()=>{this.redo()}),document.addEventListener("keydown",o=>{!o.ctrlKey&&!o.metaKey||"z"!==o.key||o.shiftKey?(o.ctrlKey||o.metaKey)&&("y"===o.key||o.shiftKey&&"z"===o.key)&&(o.preventDefault(),this.redo()):(o.preventDefault(),this.undo())}),this.updateUndoRedoButtons(),console.log("\u2705 Undo/Redo configurado")):console.warn("Undo/Redo buttons not found")}saveState(){const e=this.canvas.innerHTML;this.historyIndex<this.history.length-1&&(this.history=this.history.slice(0,this.historyIndex+1)),this.history.push(e),this.history.length>this.maxHistorySize?this.history.shift():this.historyIndex++,this.updateUndoRedoButtons(),console.log("\u{1f4be} Estado salvo. Hist\xf3rico:",this.historyIndex+1,"/",this.history.length)}undo(){this.historyIndex>0?(this.historyIndex--,this.restoreState(this.history[this.historyIndex]),console.log("\u21b6 Undo executado. Posi\xe7\xe3o:",this.historyIndex+1,"/",this.history.length)):console.log("\u26a0\ufe0f N\xe3o h\xe1 mais a\xe7\xf5es para desfazer")}redo(){this.historyIndex<this.history.length-1?(this.historyIndex++,this.restoreState(this.history[this.historyIndex]),console.log("\u21b7 Redo executado. Posi\xe7\xe3o:",this.historyIndex+1,"/",this.history.length)):console.log("\u26a0\ufe0f N\xe3o h\xe1 mais a\xe7\xf5es para refazer")}restoreState(e){this.canvas.innerHTML=e,this.hideProperties(),this.updateUndoRedoButtons(),this.reattachEventListeners()}showNotification(e,t="info",o=3e3){let n=document.querySelector(".pb-notifications-container");n||(n=document.createElement("div"),n.className="pb-notifications-container",document.body.appendChild(n));const r=document.createElement("div");r.className=`pb-notification pb-notification-${t}`,r.innerHTML=`\n      <div class="pb-notification-icon">${{success:"\u2713",error:"\u2715",warning:"\u26a0",info:"\u2139"}[t]}</div>\n      <div class="pb-notification-message">${e}</div>\n      <button class="pb-notification-close" aria-label="Fechar">\xd7</button>\n    `,n.appendChild(r),setTimeout(()=>r.classList.add("pb-notification-show"),10),r.querySelector(".pb-notification-close")?.addEventListener("click",()=>{this.closeNotification(r)}),o>0&&setTimeout(()=>{this.closeNotification(r)},o)}closeNotification(e){e.classList.remove("pb-notification-show"),e.classList.add("pb-notification-hide"),setTimeout(()=>{e.remove();const t=document.querySelector(".pb-notifications-container");t&&0===t.children.length&&t.remove()},300)}setupElementDragDrop(e){const t=e.querySelector(".pb-element-controls");if(!t)return;const o=document.createElement("div");o.className="pb-drag-handle",o.innerHTML="\u22ee\u22ee",o.title="Arrastar para reordenar",o.style.cssText="\n      padding: 6px 10px;\n      background: transparent;\n      border: none;\n      cursor: grab;\n      font-weight: bold;\n      color: #ffffff;\n      font-size: 16px;\n      transition: all 0.2s;\n      line-height: 1;\n      user-select: none;\n    ",o.addEventListener("mouseenter",()=>{o.style.background="rgba(255, 255, 255, 0.2)"}),o.addEventListener("mouseleave",()=>{o.style.background="transparent"}),t.insertBefore(o,t.firstChild);const n=document.createElement("div");n.style.cssText="width: 1px; height: 20px; background: rgba(255, 255, 255, 0.3); margin: 0 4px;",t.insertBefore(n,o.nextSibling),e.setAttribute("draggable","true"),e.draggable=!0,o.setAttribute("draggable","true"),o.draggable=!0;let r=!1;o.addEventListener("mousedown",c=>{0===c.button&&(c.stopPropagation(),r=!0,o.style.cursor="grabbing",document.body.style.userSelect="none",console.log("\u2705 Drag ATIVADO"))});const a=()=>{r=!1,o.style.cursor="grab",document.body.style.userSelect=""};document.addEventListener("mouseup",a),e.addEventListener("mousedown",c=>{if(0!==c.button)return;const p=c.target;p===o||o.contains(p)||(c=>{if(!c)return!0;const p=c.closest(".pb-element-controls button");return!!(p&&p!==o||c.closest('[contenteditable="true"]')||c.closest("input, textarea, select")||c.closest('[data-prevent-drag="true"]'))})(p)||(r=!0,o.style.cursor="grabbing",document.body.style.userSelect="none",console.log("\u2705 Drag preparado via wrapper"))});const s=c=>{if(c.target===o||r){if(r=!1,c.dataTransfer){c.dataTransfer.setData("text/plain",e.id||"pb-element"),c.dataTransfer.effectAllowed="move";const g=e.getBoundingClientRect();c.dataTransfer.setDragImage(e,g.width/2,g.height/2)}this.isDraggingElement=!0,this.draggedElement=e,e.classList.add("pb-element-dragging"),console.log("\u{1f3af} DRAGSTART bem-sucedido")}else c.preventDefault()},d=()=>{a(),this.isDraggingElement=!1,e.classList.remove("pb-element-dragging"),this.dragPlaceholder?.parentNode&&(this.dragPlaceholder.parentNode.removeChild(this.dragPlaceholder),this.dragPlaceholder=null),document.querySelectorAll(".pb-element-drag-over").forEach(c=>{c.classList.remove("pb-element-drag-over")}),document.querySelectorAll(".pb-drag-placeholder, .pb-drop-target").forEach(c=>c.remove()),this.draggedElement=null,console.log("\u2705 DRAGEND")};e.addEventListener("dragstart",s),o.addEventListener("dragstart",s),e.addEventListener("dragend",d),o.addEventListener("dragend",d),e.addEventListener("dragover",c=>{if(!this.isDraggingElement||!this.draggedElement||e===this.draggedElement)return;c.preventDefault(),c.stopPropagation(),c.dataTransfer&&(c.dataTransfer.dropEffect="move");const p=e.getBoundingClientRect(),u=c.clientY<p.top+p.height/2;this.dragPlaceholder||(this.dragPlaceholder=document.createElement("div"),this.dragPlaceholder.className="pb-drag-placeholder");const b=u?e:e.nextSibling;this.dragPlaceholder.nextSibling!==b&&e.parentNode?.insertBefore(this.dragPlaceholder,b),e.classList.add("pb-element-drag-over")}),e.addEventListener("dragleave",c=>{const p=e.getBoundingClientRect();(c.clientX<p.left||c.clientX>p.right||c.clientY<p.top||c.clientY>p.bottom)&&e.classList.remove("pb-element-drag-over")}),e.addEventListener("drop",c=>{if(!this.isDraggingElement||!this.draggedElement||e===this.draggedElement)return;c.preventDefault(),c.stopPropagation(),e.classList.remove("pb-element-drag-over"),this.removeDropIndicators();const p=e.getBoundingClientRect();e.parentNode&&(e.parentNode.insertBefore(this.draggedElement,c.clientY<p.top+p.height/2?e:e.nextSibling),this.saveState(),this.showNotification("Elemento reordenado!","success",1500),console.log("\u2705 DROP bem-sucedido"))})}setupImageLinkHandler(e,t){const o=t.getAttribute("data-component-props")||"{}",n=this.safeParseJSON(o),r=`link-handler-${t.id}`;if(e[r]&&(e.removeEventListener("click",e[r]),delete e[r]),n.linkUrl){e.style.cursor="pointer";const a=i=>{i.stopPropagation(),this.isPreviewMode&&window.open(n.linkUrl,n.abrirEm||"_blank")};e[r]=a,e.addEventListener("click",a),e.setAttribute("data-has-link","true")}else e.style.cursor="default",e.removeAttribute("data-has-link")}reattachEventListenersToElement(e){console.log("\u{1f504} Reconfigurando event listeners para:",e.id);const t=e.querySelector(".pb-element-controls");if(!t)return void console.warn("\u26a0\ufe0f Controles n\xe3o encontrados no wrapper");let o="text";e.classList.contains("pb-element-heading")?o="heading":e.classList.contains("pb-element-image")?o="image":e.classList.contains("pb-element-button")?o="button":e.classList.contains("pb-element-columns")?o="columns":e.classList.contains("pb-element-divider")?o="divider":e.classList.contains("pb-element-spacer")?o="spacer":e.classList.contains("pb-element-container")&&(o="container"),console.log("\u{1f4e6} Tipo detectado:",o);let n=null;n=e.querySelector("heading"===o?"h1, h2, h3, h4, h5, h6":"image"===o?"img":"button"===o?".pb-button, button:not(.pb-element-controls button)":"columns"===o?".pb-columns-wrapper":"divider"===o?".pb-divider":"spacer"===o?".pb-spacer":"container"===o?".pb-container":"p, .pb-element-content"),console.log("\u{1f4c4} Conte\xfado encontrado:",n?.tagName);const r=this.createElementControls(e,o,n??void 0);t.remove(),e.insertBefore(r,e.firstChild),this.setupElementDragDrop(e),"image"===o&&n instanceof HTMLImageElement&&this.setupImageLinkHandler(n,e),e.addEventListener("mouseenter",()=>{e.style.outline="2px solid rgba(99, 102, 241, 0.3)",r.style.opacity="1",r.style.visibility="visible"}),e.addEventListener("mouseleave",()=>{e!==this.selectedElement&&(e.style.outline="none"),r.style.opacity="0",r.style.visibility="hidden"}),e.addEventListener("click",a=>{const i=a.target;"IMG"!==i.tagName||"pointer"!==i.style.cursor&&"true"!==i.getAttribute("data-image-widget")?(a.stopPropagation(),this.selectElement(e)):a.stopPropagation()}),console.log("\u2705 Event listeners reconfigurados com sucesso!")}showConfirmModal(e,t="Confirma\xe7\xe3o"){return new Promise(o=>{const n=document.createElement("div");n.className="pb-confirm-overlay";const r=document.createElement("div");r.className="pb-confirm-modal",r.innerHTML=`\n        <div class="pb-confirm-header">\n          <h3>${t}</h3>\n        </div>\n        <div class="pb-confirm-body">\n          <div class="pb-confirm-icon">\u26a0\ufe0f</div>\n          <p>${e.replace(/\n/g,"<br>")}</p>\n        </div>\n        <div class="pb-confirm-footer">\n          <button class="pb-confirm-btn pb-confirm-cancel">Cancelar</button>\n          <button class="pb-confirm-btn pb-confirm-ok">OK</button>\n        </div>\n      `,n.appendChild(r),document.body.appendChild(n),setTimeout(()=>{n.classList.add("pb-confirm-show"),r.classList.add("pb-confirm-show")},10);const a=p=>{n.classList.remove("pb-confirm-show"),r.classList.remove("pb-confirm-show"),setTimeout(()=>{n.remove(),o(p)},300)},i=r.querySelector(".pb-confirm-cancel"),s=r.querySelector(".pb-confirm-ok");i?.addEventListener("click",()=>a(!1)),s?.addEventListener("click",()=>a(!0)),n.addEventListener("click",p=>{p.target===n&&a(!1)});const d=p=>{"Escape"===p.key&&(a(!1),document.removeEventListener("keydown",d))};document.addEventListener("keydown",d);const c=p=>{"Enter"===p.key&&(a(!0),document.removeEventListener("keydown",c))};document.addEventListener("keydown",c)})}showDeletePageModal(e,t){const o=[`Deseja remover definitivamente a p\xe1gina "${e}"?`,"Esta a\xe7\xe3o n\xe3o pode ser desfeita."];return t&&o.splice(1,0,`Link atual: ${t}`),this.showConfirmModal(o.join("\n"),"Excluir P\xe1gina")}reattachEventListeners(){this.canvas.querySelectorAll(".pb-droppable-section").forEach(r=>{this.makeDroppable(r,["container","heading","text","image","button","divider","spacer","columns","advanced-component"]),this.setupDynamicMinHeight(r)}),this.canvas.querySelectorAll(".pb-droppable-container").forEach(r=>{this.makeDroppable(r,["columns","heading","text","image","button","divider","spacer","imagem-clicavel","advanced-component"]),this.setupDynamicMinHeight(r)}),this.canvas.querySelectorAll(".pb-column").forEach(r=>{this.makeDroppable(r,["heading","text","image","button","divider","spacer","video","imagem-clicavel","advanced-component"]),this.setupDynamicMinHeight(r)}),this.canvas.querySelectorAll(".pb-element-image").forEach(r=>{const a=r.querySelector("img");a&&this.setupImageLinkHandler(a,r)}),console.log("\u{1f504} Event listeners reconfigurados")}updateUndoRedoButtons(){const e=document.getElementById("undoBtn"),t=document.getElementById("redoBtn");e&&(e.style.opacity=this.historyIndex>0?"1":"0.5",e.style.cursor=this.historyIndex>0?"pointer":"not-allowed",e.disabled=this.historyIndex<=0),t&&(t.style.opacity=this.historyIndex<this.history.length-1?"1":"0.5",t.style.cursor=this.historyIndex<this.history.length-1?"pointer":"not-allowed",t.disabled=this.historyIndex>=this.history.length-1)}setupDeviceSwitcher(){const e=document.querySelectorAll(".pb-device-btn");0!==e.length?(e.forEach(t=>{t.addEventListener("click",o=>{const r=o.currentTarget.getAttribute("data-device");r&&this.switchDevice(r)})}),console.log("\u2705 Device Switcher configurado")):console.warn("Device buttons not found")}switchDevice(e){this.currentDevice=e,document.querySelectorAll(".pb-device-btn").forEach(n=>n.classList.remove("active"));const o=document.querySelector(`.pb-device-btn[data-device="${e}"]`);o&&o.classList.add("active"),this.canvas.classList.remove("device-desktop","device-tablet","device-mobile"),this.canvas.classList.add(`device-${e}`),console.log("\u{1f4f1} Device alterado para:",e)}setupComponentsManager(){const e=document.getElementById("manageComponentsBtn"),t=document.getElementById("componentsManagerModal"),o=document.getElementById("modalOverlay");e&&t&&o?(e.addEventListener("click",()=>{t.style.display="flex",console.log("\u{1f4e6} Modal do gerenciador aberto")}),o.addEventListener("click",()=>{t.style.display="none",console.log("\u{1f4e6} Modal do gerenciador fechado")}),document.addEventListener("keydown",n=>{"Escape"===n.key&&"flex"===t.style.display&&(t.style.display="none",console.log("\u{1f4e6} Modal do gerenciador fechado (ESC)"))}),console.log("\u2705 Gerenciador de componentes configurado")):console.warn("\u26a0\ufe0f Elementos do modal n\xe3o encontrados")}setupPagesManager(){try{console.log("\u{1f527} ========== INICIANDO GERENCIADOR DE P\xc1GINAS ==========");const e=document.getElementById("pagesPanel"),t=document.getElementById("togglePagesPanelBtn"),o=document.getElementById("closePanelPageBtn"),n=document.getElementById("loadModelBtn"),r=document.getElementById("savePagesBtn");if(console.log("\u{1f50d} Elementos encontrados:",{pagesPanel:!!e,toggleBtn:!!t,closeBtn:!!o,loadModelBtn:!!n,savePagesBtn:!!r}),!e)return void console.error("\u274c pagesPanel n\xe3o encontrado! N\xe3o posso continuar.");this.pagesPanel=e,console.log("\u2705 pagesPanel atribu\xeddo a this.pagesPanel"),t?(t.addEventListener("click",i=>{console.log("\u{1f5b1}\ufe0f Toggle button clicado!"),i.stopPropagation(),this.togglePagesPanel()}),console.log("\u2705 Event listener adicionado a toggleBtn")):console.warn("\u26a0\ufe0f toggleBtn n\xe3o encontrado"),o?(o.addEventListener("click",i=>{console.log("\u{1f5b1}\ufe0f Close button clicado!"),i.stopPropagation(),this.togglePagesPanel(!1)}),console.log("\u2705 Event listener adicionado a closeBtn")):console.warn("\u26a0\ufe0f closeBtn n\xe3o encontrado"),document.addEventListener("keydown",i=>{"Escape"===i.key&&e.classList.contains("active")&&(console.log("\u{1f5b1}\ufe0f ESC pressionado, fechando painel"),this.togglePagesPanel(!1))}),console.log("\u2705 ESC listener adicionado"),n?(n.addEventListener("click",()=>{console.log("\u{1f5b1}\ufe0f Load model button clicado!"),this.loadModelTemplate()}),console.log("\u2705 Event listener adicionado a loadModelBtn")):console.warn("\u26a0\ufe0f loadModelBtn n\xe3o encontrado"),r?(r.addEventListener("click",()=>{console.log("\u{1f5b1}\ufe0f Save button clicado!"),this.performSave("panel")}),console.log("\u2705 Event listener adicionado a savePagesBtn")):console.warn("\u26a0\ufe0f savePagesBtn n\xe3o encontrado");const a=document.getElementById("saveModelBtn");a?(a.addEventListener("click",()=>{console.log("\u{1f5b1}\ufe0f Save Model button clicado!"),this.saveModel()}),console.log("\u2705 Event listener adicionado a saveModelBtn")):console.warn("\u26a0\ufe0f saveModelBtn n\xe3o encontrado"),this.setupPagesTabs(),t&&t.addEventListener("click",()=>{setTimeout(()=>{this.loadAvailableModels()},100)}),e.addEventListener("transitionend",()=>{console.log("transitionend disparado")}),console.log("transitionend listener adicionado"),console.log("GERENCIADOR DE P\xc1GINAS INICIALIZADO")}catch(e){console.error("\u274c ERRO CR\xcdTICO em setupPagesManager():",e),console.error("Stack:",e.stack)}}setupPagesTabs(){const e=document.querySelectorAll(".pb-pages-tab-btn"),t=document.querySelectorAll(".pb-pages-tab");console.log(`\u{1f527} Configurando ${e.length} tabs...`),e.forEach(o=>{o.addEventListener("click",()=>{const n=o.getAttribute("data-tab");if(!n)return;console.log(`\u{1f4d1} Clicando na tab: ${n}`),e.forEach(a=>a.classList.remove("active")),t.forEach(a=>{a.style.display="none"}),o.classList.add("active");const r=document.getElementById(n);r&&(r.style.display="flex",r.style.flexDirection="column",r.style.gap="12px","tabListPages"===n&&this.loadPages(),"tabCreatePage"===n&&this.loadAvailableModels())})})}togglePagesPanel(e){try{const t=document.getElementById("pagesPanel");if(!t)return void console.error("\u274c pagesPanel n\xe3o encontrado em togglePagesPanel!");const o=t.classList.contains("active");void 0===e?(t.classList.toggle("active"),console.log("\u{1f504} Painel toggled:",{wasActive:o,nowActive:t.classList.contains("active")})):e?(t.classList.add("active"),console.log("\u{1f513} Abrindo painel..."),setTimeout(()=>{console.log("\u{1f4c2} Painel aberto (via setTimeout), carregando dados..."),this.loadPages(),this.loadAvailableModels()},50)):(t.classList.remove("active"),console.log("\u{1f512} Fechando painel..."))}catch(t){console.error("\u274c ERRO em togglePagesPanel():",t)}}loadAvailableModels(){if(console.log("\u{1f504} [loadAvailableModels] Iniciando..."),this.isLoadingModelos)return void console.log("\u23f8\ufe0f  [loadAvailableModels] J\xe1 em execu\xe7\xe3o, ignorando");const e=Date.now();if(e-this.lastLoadedModelosTime<2e3&&this.lastLoadedModelosTime>0)return void console.log("\u23f8\ufe0f  [loadAvailableModelos] Chamada muito recentemente, ignorando (debounce)");this.isLoadingModelos=!0,this.lastLoadedModelosTime=e;const t=document.getElementById("pageModelSelect");if(!t)return console.warn("\u26a0\ufe0f [loadAvailableModelos] Select de modelo N\xc3O encontrado no DOM!"),void(this.isLoadingModelos=!1);console.log("\u2705 [loadAvailableModelos] Select encontrado, fazendo requisi\xe7\xe3o...");const o=this.getApiUrl("modelo");console.log("\u{1f4e1} URL da API:",o);const n=window.localStorage.getItem("auth_token");console.log("\u{1f511} Token JWT dispon\xedvel:",!!n);const r={"Content-Type":"application/json",Accept:"application/json"};n&&(r.Authorization=`Bearer ${n}`,console.log("\u2705 Header Authorization adicionado")),this.http.get(o,{headers:r}).pipe((0,ge.W)(a=>{if(console.error("\u274c Erro na requisi\xe7\xe3o:",a.status,a.statusText),console.error("   Erro completo:",a),(a.error instanceof ProgressEvent||"string"==typeof a.error)&&(console.error("\u274c Resposta n\xe3o \xe9 JSON (provavelmente erro 500 ou CORS)"),console.error("   Conte\xfado recebido:",a.error?.toString?.()?.substring(0,200))),200===a.status&&a.error)return console.log("Resposta HTTP 200, processando normalmente"),(0,be.of)(a.error);throw a})).subscribe({next:a=>{console.log("\u2705 Resposta recebida da API:",a),console.log("   Type:",typeof a),console.log("   Is Array:",Array.isArray(a));let i=[];if(Array.isArray(a)?(i=a,console.log("\u2705 Resposta \xe9 um array")):a&&"object"==typeof a&&(console.log("\u26a0\ufe0f Resposta n\xe3o \xe9 array direto, tentando extrair..."),console.log("   Chaves dispon\xedveis:",Object.keys(a)),a.data&&Array.isArray(a.data)?(i=a.data,console.log("\u2705 Extra\xeddo de response.data")):a.modelos&&Array.isArray(a.modelos)?(i=a.modelos,console.log("\u2705 Extra\xeddo de response.modelos")):a.models&&Array.isArray(a.models)&&(i=a.models,console.log("\u2705 Extra\xeddo de response.models"))),console.log("\u{1f4e6} Modelos parseados:",i.length),console.log("   Dados:",i),!t||!t.parentElement)return console.warn("\u26a0\ufe0f Select foi removido do DOM!"),void(this.isLoadingModelos=!1);const s=t.querySelectorAll("option");if(console.log("\u{1f4dd} Op\xe7\xf5es existentes antes:",s.length),s.length>1&&Array.from(s).slice(1).forEach((d,c)=>{console.log(`   Removendo [${c}]:`,d.textContent),d.remove()}),console.log("\u{1f4dd} Op\xe7\xf5es ap\xf3s limpeza:",t.querySelectorAll("option").length),i&&i.length>0){console.log("\u2728 Adicionando",i.length,"modelos ao select..."),i.forEach((c,p)=>{try{const g=document.createElement("option");g.value=c.id?.toString()||`modelo_${p}`;const u=c.title||c.tituloTema||`Modelo ${c.id}`;g.textContent=u,g.setAttribute("data-modelo-id",c.id?.toString()||""),t.appendChild(g),console.log(`\u2705 [${p}] Adicionado: value="${g.value}", text="${u}"`)}catch(g){console.error(`\u274c Erro ao adicionar modelo [${p}]:`,g?.message)}});const d=t.querySelectorAll("option").length;console.log("\u2728 Total de op\xe7\xf5es agora:",d),console.log("\u2728 Modelos vis\xedveis:",Array.from(t.options).map(c=>c.textContent).join(", "))}else{console.warn("\u26a0\ufe0f Nenhum modelo encontrado na API ou array vazio");const d=document.createElement("option");d.value="",d.textContent="Nenhum modelo dispon\xedvel",d.disabled=!0,t.appendChild(d)}this.modelos=i,console.log("\u{1f4be} Modelos armazenados na classe:",this.modelos.length)},error:a=>{console.error("\u274c ERRO ao carregar modelos:",a),console.error("   Status:",a.status),console.error("   Mensagem:",a.message),console.error("   Response:",a.error);const i=t.querySelectorAll("option");i.length>1&&Array.from(i).slice(1).forEach(d=>d.remove());const s=document.createElement("option");s.value="",s.textContent=`\u274c Erro ao carregar (${a.status})`,s.disabled=!0,t.appendChild(s)},complete:()=>{this.isLoadingModelos=!1,console.log("\u2705 loadAvailableModels finalizado (flag reset)")}})}loadModelTemplate(){const e=document.getElementById("pageModelSelect"),t=document.getElementById("newPageTitle");if(!e)return void console.warn("\u26a0\ufe0f Select de modelo n\xe3o encontrado");const o=e.value;console.log("\u{1f4e6} Carregando modelo:",o),o?this.loadModelFromApi(o,t):this.showNotification("\u274c Selecione um modelo","error")}loadModelFromApi(e,t){console.log("\u{1f504} Carregando modelo da API com ID:",e);const o=this.modelos.find(n=>n.id?.toString()===e);if(o)console.log("\u2705 Modelo encontrado na lista. Carregando conte\xfado..."),this.applyModelToCanvas(o,t);else{console.warn("\u26a0\ufe0f Modelo n\xe3o encontrado na lista carregada. Tentando via API...");const n=`${this.getApiUrl("modelo")}/${e}`;this.http.get(n).subscribe({next:r=>{console.log("\u2705 Modelo carregado da API:",r),this.applyModelToCanvas(r,t)},error:r=>{console.error("\u274c Erro ao carregar modelo da API:",r),alert("\u274c Erro ao carregar modelo: "+(r.error?.message||r.statusText))}})}}applyModelToCanvas(e,t){const o=e.title||e.tituloTema||`Modelo ${e.id}`;console.log("\u{1f4dd} Aplicando modelo ao canvas:",o);const n=document.querySelector(".pb-canvas");if(!n)return void console.warn("\u26a0\ufe0f Canvas n\xe3o encontrado");let r=e.conteudo||e.conteudoJson;if(r){if("string"==typeof r)try{r=JSON.parse(r),console.log("\u2705 conteudoJson parseado de string para objeto")}catch(d){return console.error("\u274c Erro ao parsear conteudoJson, tratando como HTML:",d),n.innerHTML=r,void console.log("\u2705 Conte\xfado HTML legado carregado")}console.log("\u{1f4e6} Tipo de conteudoJson:",typeof r),console.log("\u{1f4e6} Tem meta?",!!r.meta),console.log("\u{1f4e6} Tem layout?",!!r.layout);const s={meta:r.meta||{exportedAt:(new Date).toISOString(),elementCount:0,device:"desktop",zoomLevel:100,previewMode:!1},layout:r.layout||[]};console.log("\u{1f680} Importando layout usando importPayloadDirectly()..."),this.importPayloadDirectly(s,o)}else console.log("\u2139\ufe0f Modelo sem conte\xfado"),n.innerHTML='<div class="pb-droppable-section"><div class="pb-droppable-container"><p>Modelo sem conte\xfado predefinido</p></div></div>';t&&(t.value=o,console.log("\u{1f4dd} T\xedtulo sugerido:",o));const a=document.getElementById("newPageLink"),i=document.getElementById("newPageDesc");a&&e.link&&(a.value=e.link),i&&e.descricao&&(i.value=e.descricao),this.showNotification(`\u2705 Modelo "${o}" carregado com sucesso!`,"success",2e3)}loadPages(){var e=this;return(0,H.A)(function*(){if(e.isLoadingPages)return void console.log("\u23f8\ufe0f  loadPages() j\xe1 em execu\xe7\xe3o, ignorando chamada");const t=Date.now();if(t-e.lastLoadedTime<2e3)console.log("\u23f8\ufe0f  loadPages() chamada muito recentemente, ignorando (debounce)");else{e.isLoadingPages=!0,e.lastLoadedTime=t;try{const o=e.pagesPanel?.querySelector("#pagesList");if(!o)return void(e.isLoadingPages=!1);console.log("Iniciando carregamento..."),o.innerHTML='<div class="pb-pages-loading">Carregando p\xe1ginas e modelos...</div>';const n=e.getApiUrl("pagina"),r=e.getApiUrl("modelo");console.log("\ufffd URL P\xe1ginas:",n),console.log("\ufffd URL Modelos:",r);try{console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("\u{1f4e1} Fazendo requisi\xe7\xf5es HTTP..."),console.log("URL Paginas:",n),console.log("URL Modelos:",r);const[a,i]=yield Promise.all([e.http.get(n).pipe((0,ge.W)(c=>{if(200===c.status&&c.error)return console.log("[HTTP 200 catchError] P\xe1ginas - tratando como v\xe1lido"),(0,be.of)(c.error);throw c})).toPromise(),e.http.get(r).pipe((0,ge.W)(c=>{if(200===c.status&&c.error)return console.log("[HTTP 200 catchError] Modelos - tratando como v\xe1lido"),(0,be.of)(c.error);throw c})).toPromise()]);console.log("\u2705 Respostas HTTP recebidas"),console.log("Resposta Paginas (raw):",a),console.log("Resposta Modelos (raw):",i);let s=Array.isArray(a)?a:a?.data||a?.paginas||[];e.pages=s,console.log("Paginas processadas:",s.length),s.forEach((c,p)=>{console.log(`  [Pagina ${p}] id=${c.id} title=${c.title} keys=${Object.keys(c).join(",")}`)});let d=Array.isArray(i)?i:i?.data||i?.modelos||[];e.modelos=d,console.log("Modelos processados:",d.length),d.forEach((c,p)=>{console.log(`  [Modelo ${p}] id=${c.id} modelo_id=${c.modelo_id} tituloTema=${c.tituloTema} keys=${Object.keys(c).join(",")}`)}),console.log("Iniciando renderizacao..."),e.renderPagesAndModelsLists(s,d),console.log("Renderizacao concluida")}catch(a){console.error("Erro ao carregar dados:",a),e.handleLoadError(o,a,[n,r])}}catch(o){console.error("Erro em loadPages():",o)}finally{e.isLoadingPages=!1,console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log("loadPages finalizado"),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550")}}})()}handleLoadError(e,t,o){let n="Erro ao carregar dados",r="";0===t.status?(n="\u274c Erro de conex\xe3o (CORS ou servidor offline)",r="Verifique se o servidor est\xe1 rodando"):404===t.status?(n="\u274c Rota n\xe3o encontrada (404)",r="A URL da API pode estar incorreta."):500===t.status?(n="\u274c Erro no servidor (500)",r="O servidor retornou um erro. Verifique os logs do backend."):(401===t.status||403===t.status)&&(n=`\u274c Acesso negado (${t.status})`,r="Voc\xea n\xe3o tem permiss\xe3o ou n\xe3o est\xe1 autenticado."),e.innerHTML=`\n      <div class="pb-pages-error" style="padding: 16px; background: #fee2e2; border: 1px solid #fecaca; border-radius: 6px;">\n        <p style="margin: 0 0 8px 0; font-weight: 600; color: #dc2626;">${n}</p>\n        <small style="display: block; color: #991b1b; margin-bottom: 8px;"><strong>URLs:</strong> ${o.join(", ")}</small>\n        <small style="display: block; color: #991b1b; margin-bottom: 8px;"><strong>Status:</strong> ${t.status} ${t.statusText}</small>\n        ${r?`<small style="display: block; color: #b91c1c; margin-bottom: 8px;"><strong>\u{1f4a1} Sugest\xe3o:</strong> ${r}</small>`:""}\n      </div>\n    `}renderPagesAndModelsLists(e,t){const o=this.pagesPanel?.querySelector("#pagesList");if(!o)return void console.error("\u274c #pagesList n\xe3o encontrado no DOM!");console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550"),console.log('\u{1f4cb} [renderPagesAndModelsLists] P\xe1ginas ser\xe3o carregadas na aba "Minhas P\xe1ginas"'),console.log("   P\xe1ginas recebidas:",e.length),console.log("   Modelos recebidos:",t.length),console.log("\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550\u2550");let n="";const r=document.getElementById("tabListPages");r&&"none"!==r.style.display&&(e.length>0?(console.log("\u{1f4c4} Renderizando P\xc1GINAS na aba..."),e.forEach((a,i)=>{console.log(`  [P\xe1gina ${i+1}/${e.length}]:`,a);const s=this.renderPageItem(a,"pagina");console.log(s?`  \u2705 P\xe1gina ${i+1} renderizada com sucesso`:`  \u274c P\xe1gina ${i+1} N\xc3O foi renderizada (sem ID)`),n+=s})):console.log("\u2139\ufe0f  Nenhuma p\xe1gina para renderizar")),console.log("\u270d\ufe0f  Atualizando innerHTML com HTML renderizado..."),o.innerHTML=n,console.log("HTML renderizado. Procurando buttons..."),setTimeout(()=>{this.attachPageListeners(o)},0)}renderPageItem(e,t){console.log(`[renderPageItem] Processando ${t}:`,e);const o=e.id||e.modelo_id||e.modelId||e.idTema||e.id_modelo;if(!o)return console.warn(`[renderPageItem] \u26a0\ufe0f  ${t.toUpperCase()} sem ID - ser\xe1 ignorada:`,e),console.warn("[renderPageItem] Campos dispon\xedveis:",Object.keys(e)),"";console.log(`[renderPageItem] ID extra\xeddo: ${o}`);const n=e.title||e.tituloTema||e.titulo||"Sem t\xedtulo",r=e.descricao||e.link||e.tituloTema||e.titulo||"Sem descri\xe7\xe3o",a=e.link||"";return console.log(`[renderPageItem] Renderizando: t\xedtulo="${n}", tipo="${t}", id=${o}`),`\n      <div class="pb-page-item" data-id="${o}" data-type="${t}">\n        <div class="pb-page-info">\n          <h4 class="pb-page-title">${this.escapeHtml(n)}</h4>\n          <p class="pb-page-desc">${this.escapeHtml(r)}</p>\n          ${a?`<p class="pb-page-link">Link: ${this.escapeHtml(a)}</p>`:""}\n          ${e.isMenu?'<span class="pb-page-menu-badge">Menu</span>':""}\n          ${"modelo"===t?'<span class="pb-page-tipo-badge">Modelo</span>':""}\n        </div>\n        <div class="pb-page-actions">\n          <button class="pb-page-action-btn pb-page-view-btn" data-link="${a}" title="Visualizar p\xe1gina em nova aba">\n            <span class="action-icon">\u{1f441}\ufe0f</span>\n          </button>\n          <button class="pb-page-action-btn pb-page-edit-btn" data-id="${o}" data-type="${t}" title="Editar p\xe1gina">\n            <span class="action-icon">\u270f\ufe0f</span>\n          </button>\n          <button class="pb-page-action-btn pb-page-delete-btn" data-id="${o}" data-type="${t}" title="Deletar p\xe1gina">\n            <span class="action-icon">\u{1f5d1}\ufe0f</span>\n          </button>\n        </div>\n      </div>\n    `}attachPageListeners(e){if(console.log("\u{1f517} ========== INICIANDO ANEXA\xc7\xc3O DE LISTENERS =========="),!e||null===e.offsetParent)return console.error("\u274c ERRO: pagesList n\xe3o est\xe1 no DOM ou est\xe1 invis\xedvel!"),console.error("pagesList:",e),void console.error("offsetParent:",e?.offsetParent);console.log("\u2705 pagesList encontrado no DOM"),console.log("pagesList.innerHTML (primeiros 300 chars):",e.innerHTML?.substring(0,300)+"...");const t=e.querySelectorAll(".pb-page-edit-btn"),o=e.querySelectorAll(".pb-page-delete-btn"),n=e.querySelectorAll(".pb-page-view-btn");if(console.log("\u{1f518} Bot\xf5es encontrados:",{edit:t.length,delete:o.length,view:n.length,total:t.length+o.length+n.length}),0===t.length&&0===o.length){console.error("\u274c NENHUM BOT\xc3O ENCONTRADO! Verificando estrutura...");const r=e.querySelectorAll(".pb-page-item");console.log("Itens de p\xe1gina encontrados:",r.length),r.length>0&&console.log("Primeiro item HTML:",r[0].outerHTML?.substring(0,300));const a=e.querySelectorAll("div");return console.log("Total de divs em pagesList:",a.length),void console.log("Classes em pagesList:",e.className)}t.forEach((r,a)=>{r.addEventListener("click",i=>{i.stopPropagation(),i.preventDefault();const s=parseInt(r.getAttribute("data-id")||"0"),d=r.getAttribute("data-type");console.log("\ufffd\ufe0f EDIT BUTTON CLICADO!",{index:a,id:s,type:d,buttonElement:r}),s?this.editPage(s,d):console.error("\u274c ID inv\xe1lido no bot\xe3o:",s)})}),o.forEach((r,a)=>{r.addEventListener("click",i=>{i.stopPropagation(),i.preventDefault();const s=parseInt(r.getAttribute("data-id")||"0"),d=r.getAttribute("data-type");console.log("\ufffd\ufe0f DELETE BUTTON CLICADO!",{index:a,id:s,type:d,buttonElement:r}),s?this.deletePage(s,d):console.error("\u274c ID inv\xe1lido no bot\xe3o:",s)})}),console.log("\u2705 ========== LISTENERS ANEXADOS COM SUCESSO =========="),n.forEach((r,a)=>{r.addEventListener("click",i=>{i.stopPropagation(),i.preventDefault();const s=r.getAttribute("data-link");console.log("\u{1f441}\ufe0f VIEW BUTTON CLICADO!",{index:a,link:s,buttonElement:r}),s?window.open(s,"_blank"):(console.error("\u274c Link inv\xe1lido no bot\xe3o:",s),alert("Esta p\xe1gina n\xe3o possui um link v\xe1lido para visualizar"))})})}renderPagesList(e){this.renderPagesAndModelsLists(e,[])}editPage(e){var t=this;return(0,H.A)(function*(o,n="pagina"){console.log("\u{1f4dd} editPage() chamado com:",{id:o,type:n});const r=document.querySelector('[data-tab="tabCreatePage"]');r?(console.log('\u{1f4d1} Clicando na aba "Criar P\xe1gina"...'),r.click()):console.warn('\u26a0\ufe0f Bot\xe3o da aba "Criar P\xe1gina" n\xe3o encontrado');const a="pagina"===n?t.pages:t.modelos;console.log("\u{1f4cb} Lista usada:","pagina"===n?"p\xe1ginas":"modelos","- Total:",a.length);let i=a.find(h=>h.id===o);if(!i){console.warn("\u274c P\xe1gina n\xe3o encontrada com id:",o,"na lista de",n),console.log("   IDs dispon\xedveis:",a.map(x=>x.id).join(", "));const h=window.localStorage.getItem("auth_token"),f={"Content-Type":"application/json",Accept:"application/json"};h&&(f.Authorization=`Bearer ${h}`);const m=t.buildApiUrl(`api/v1/paginas-json/${o}`);return console.log("\u{1f50e} Tentando buscar p\xe1gina via API (fallback):",m),void t.http.get(m,{headers:f}).subscribe({next:x=>{console.log("\u{1f50e} Fallback GET recebido:",x);const C={id:x.id||x.data?.id||o,title:x.title||x.data?.title||x.titulo||"",descricao:x.descricao||x.data?.descricao||"",conteudo:x.conteudo||x.data?.conteudo||x.conteudoJson||x.data?.conteudoJson||"",conteudoJson:x.conteudoJson||x.data?.conteudoJson||void 0,link:x.link||x.data?.link||""};try{t.pages.push(C)}catch(v){console.warn("\u26a0\ufe0f N\xe3o foi poss\xedvel adicionar p\xe1gina \xe0 lista local:",v)}setTimeout(()=>t.editPage(o,n),50)},error:x=>{console.error("\u274c Fallback GET falhou para id",o,x),t.showNotification(`\u274c P\xe1gina com ID ${o} n\xe3o encontrada e n\xe3o foi poss\xedvel busc\xe1-la na API.`,"error",5e3)}})}console.log("\u2705 P\xe1gina encontrada:","modelo"===n?i.tituloTema:i.title),"pagina"===n?(t.currentEditingPageId=o,t.currentEditingModeloId=null):(t.currentEditingModeloId=o,t.currentEditingPageId=null),t.currentSaveType=n;try{localStorage.setItem("pageBuilder_editingPageId",String(o)),localStorage.setItem("pageBuilder_editingType",n)}catch(h){console.warn("N\xe3o foi poss\xedvel persistir editingId no localStorage:",h)}const s=document.getElementById("newPageTitle"),d=document.getElementById("newPageLink"),c=document.getElementById("newPageDesc"),p=document.getElementById("saveType");s&&(s.value=("modelo"===n?i.tituloTema:i.title)||"",console.log("\u{1f4dd} T\xedtulo:",s.value)),d&&(d.value=i.link||"",console.log("\u{1f517} Link:",d.value)),c&&(c.value=i.descricao||"",console.log("\u{1f4c4} Descri\xe7\xe3o:",c.value)),p&&(p.value=n,console.log("\u{1f3f7}\ufe0f Tipo:",p.value)),t.togglePagesPanel(!1),console.log(`\u{1f4e1} Requisi\xe7\xe3o GET para /api/v1/paginas-json/${o}`);const g=window.localStorage.getItem("auth_token"),u={"Content-Type":"application/json",Accept:"application/json"};g&&(u.Authorization=`Bearer ${g}`);const b=t.buildApiUrl(`api/v1/paginas-json/${o}`);console.log("\u{1f4e1} EditPage - chamando GET em:",b,"com headers:",u),t.http.get(b,{headers:u}).subscribe({next:h=>{console.log("\u{1f4e1} EditPage - resposta recebida (raw):",h);let f=h.conteudoJson||h.data?.conteudoJson||h.conteudo;if(!f)return void t.showNotification("\u26a0\ufe0f P\xe1gina sem conte\xfado","warning",3e3);let m=f;if("string"==typeof f){console.log("\u{1f4d6} Parseando JSON string...");try{m=JSON.parse(f)}catch(_){return console.error("\u274c Erro ao fazer parse do JSON string:",_),void t.showNotification("\u274c Erro ao processar JSON","error",3e3)}}console.log("\u2705 Payload parseado:",{temSections:!!m.sections,temLayout:!!m.layout,temRawHtml:!!m.rawHtml});const x=m.sections||m.layout||[],C={meta:{exportedAt:m.timestamp||(new Date).toISOString(),elementCount:x.length,device:"desktop",zoomLevel:100,previewMode:!1},layout:x};t.importPayloadDirectly(C,`${"pagina"===n?"P\xe1gina":"Modelo"} "${i&&("modelo"===n?i.tituloTema:i.title)||"Sem t\xedtulo"}"`)},error:h=>{console.error("\u{1f4e1} EditPage - erro na requisi\xe7\xe3o GET:",h);const f=h?.status,m=h?.statusText||"",x=h?.error||h;t.showNotification(`\u274c Erro ao carregar: ${f} ${m}`,"error",7e3),console.error("Detalhes do erro:",{status:f,statusText:m,body:x})}})}).apply(this,arguments)}deletePage(e){var t=this;return(0,H.A)(function*(o,n="pagina"){if("pagina"!==n)return void t.showNotification("A exclus\xe3o est\xe1 dispon\xedvel apenas para p\xe1ginas.","warning",3e3);const r=t.pages.find(p=>p.id===o);if(!r)return void t.showNotification("P\xe1gina n\xe3o encontrada na lista atual.","error",3e3);const a=r.title||"Sem t\xedtulo";if(!(yield t.showDeletePageModal(a,r.link)))return;const s=t.buildApiUrl(`api/v1/paginas-json/${o}`),d=window.localStorage.getItem("auth_token"),c={"Content-Type":"application/json"};d&&(c.Authorization=`Bearer ${d}`),t.http.delete(s,{headers:c}).subscribe({next:()=>{t.showNotification("\u2705 P\xe1gina deletada com sucesso!","success",3e3),t.currentEditingPageId===o&&(t.currentEditingPageId=null),t.loadPages()},error:p=>{t.showNotification(`\u274c Erro ao deletar: ${p.error?.message||p.error?.detail||p.statusText||"Erro desconhecido"}`,"error",5e3)}})}).apply(this,arguments)}convertHtmlToJson(e){if(!e||!e.trim())return{sections:[]};try{const t=document.createElement("div");t.innerHTML=e;const o=[];return t.querySelectorAll('.pb-droppable-section, .pb-element, [class*="pb-"]').forEach(n=>{const r=this.serializeElementToJson(n);r&&o.push(r)}),console.log("\u2705 HTML convertido para JSON:",{sections:o.length}),{version:"1.0",timestamp:(new Date).toISOString(),sections:o,rawHtml:e}}catch(t){return console.error("\u274c Erro ao converter HTML para JSON:",t),{version:"1.0",timestamp:(new Date).toISOString(),rawHtml:e,error:"Erro na convers\xe3o"}}}serializeElementToJson(e){const t={tag:e.tagName.toLowerCase(),class:e.className||void 0,id:e.id||void 0,attributes:{}};Array.from(e.attributes).forEach(n=>{n.name.startsWith("data-")&&(t.attributes[n.name]=n.value)});const o=e.getAttribute("style");return o&&(t.style=o),0===e.children.length?t.text=e.textContent||"":(t.children=[],Array.from(e.children).forEach(n=>{const r=this.serializeElementToJson(n);r&&t.children.push(r)})),t}verificarImagensBase64(e){const t=[],o=n=>{n&&("image"===n.type&&n.props?.src&&n.props.src.includes("base64")&&t.push({alt:n.props.alt||"Sem descri\xe7\xe3o",srcLength:n.props.src.length,srcPreview:n.props.src.substring(0,50)+"..."}),n.children&&Array.isArray(n.children)&&n.children.forEach(r=>o(r)),n.layout&&Array.isArray(n.layout)&&n.layout.forEach(r=>o(r)))};return e.layout&&Array.isArray(e.layout)&&e.layout.forEach(n=>o(n)),t}savePage(){var e=this;return(0,H.A)(function*(){const t=document.getElementById("newPageTitle"),o=document.getElementById("newPageLink"),n=document.getElementById("newPageDesc"),r=document.getElementById("newPageIsMenu");if(!t?.value)return void e.showNotification("\u274c Preencha o T\xedtulo","error");const a=!e.currentEditingPageId,i=a?"criar":"salvar/atualizar";if(!(yield e.showConfirmModal(`Tem certeza que deseja ${i} "${t.value.trim()}"?`,`\u{1f4be} Confirmar ${"criar"===i?"Cria\xe7\xe3o":"Atualiza\xe7\xe3o"} de P\xe1gina`)))return;const d=e.buildExportPayload();try{let c=e.currentEditingPageId;try{if(!c){const m=localStorage.getItem("pageBuilder_editingPageId");if(m){const x=Number(m);!isNaN(x)&&x>0&&(c=x,console.log("\u{1f501} Recuperado editingId do localStorage:",c))}}}catch(m){console.warn("Erro ao ler editingId do localStorage:",m)}const p=e.buildApiUrl(c?`api/v1/paginas-json/${c}`:"api/v1/paginas-json"),g={title:t.value.trim(),link:o.value.trim()||"/pagina",descricao:n?.value.trim()||"",isMenu:r?.checked||!1,conteudoJson:JSON.stringify(d)},u=c?"PUT":"POST",b=window.localStorage.getItem("auth_token"),h={"Content-Type":"application/json",Accept:"application/json"};b&&(h.Authorization=`Bearer ${b}`),("POST"===u?e.http.post(p,g,{headers:h}):e.http.put(p,g,{headers:h})).subscribe({next:m=>{e.showNotification(a?"\u2705 P\xe1gina criada com sucesso!":"\u2705 P\xe1gina atualizada com sucesso!","success",5e3),setTimeout(()=>{t.value="",o&&(o.value=""),n&&(n.value=""),r&&(r.checked=!1),e.currentEditingPageId=null,e.currentEditingModeloId=null;try{localStorage.removeItem("pageBuilder_editingPageId"),localStorage.removeItem("pageBuilder_editingType")}catch{}e.loadPages()},1e3)},error:m=>{e.showNotification(`\u274c Erro: ${m.error?.message||m.error?.detail||m.statusText||"Erro desconhecido"}`,"error",5e3)}})}catch{e.showNotification("\u274c Erro ao processar formul\xe1rio","error",5e3)}})()}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}saveModel(){var e=this;return(0,H.A)(function*(){const t=document.getElementById("modelTitle"),o=document.getElementById("modelDesc");if(!t?.value)return void e.showNotification("\u274c Preencha o Nome do Modelo","error");if(!(yield e.showConfirmModal(`Tem certeza que deseja salvar o modelo "${t.value.trim()}"?`,"\u{1f4be} Confirmar Cria\xe7\xe3o de Modelo")))return;const r=e.buildExportPayload(),a=e.verificarImagensBase64(r);a.length>0?(console.log("\u{1f5bc}\ufe0f [saveModel] Imagens com base64 encontradas:",a),console.log("\u{1f4e4} [saveModel] PRONTO PARA ENVIAR - JSON cont\xe9m imagens em base64")):(console.warn("\u26a0\ufe0f [saveModel] PROBLEMA! Nenhuma imagem com base64 encontrada no JSON"),console.warn("\u{1f4ca} [saveModel] Layout:",r.layout));try{const i=e.buildApiUrl("api/v1/modelos-pagina"),s={tituloTema:t.value.trim(),conteudoJson:JSON.stringify(r)},d=window.localStorage.getItem("auth_token"),c={"Content-Type":"application/json",Accept:"application/json"};d&&(c.Authorization=`Bearer ${d}`),e.http.post(i,s,{headers:c}).subscribe({next:p=>{console.log("\u2705 Modelo salvo com sucesso:",p),e.showNotification("\u2705 Modelo criado com sucesso!","success",5e3),setTimeout(()=>{t.value="",o&&(o.value=""),e.currentEditingModeloId=null,e.loadPages()},1e3)},error:p=>{console.error("Erro ao salvar modelo:",p),e.showNotification(`\u274c Erro: ${p.error?.message||p.error?.detail||p.statusText||"Erro desconhecido"}`,"error",5e3)}})}catch(i){console.error("Erro ao processar formul\xe1rio de modelo:",i),e.showNotification("\u274c Erro ao processar formul\xe1rio","error",5e3)}})()}loadAdvancedComponents(){const e=document.getElementById("abralimpComponentsContainer"),t=document.getElementById("advancedComponentsContainer");e&&t?(console.log("\u{1f4e6} Carregando componentes avan\xe7ados..."),this.advancedComponentsService.registeredComponents$.subscribe(o=>{e.innerHTML="",t.innerHTML="";const n=o.filter(i=>i.active&&i.available),r=new Map;n.forEach(i=>r.set(i.id,i));const a=(i,s,d)=>{const c=i.map(p=>r.get(p)).filter(p=>!!p);c.length?c.forEach(p=>{const g=this.createAdvancedWidget(p);s.appendChild(g)}):s.innerHTML=`<p style="color: #9ca3af; font-size: 12px; padding: 10px;">${d}</p>`};a(this.abralimpComponentOrder,e,"Nenhum componente Abralimp dispon\xedvel"),a(this.advancedComponentOrder,t,"Nenhum componente avan\xe7ado dispon\xedvel"),setTimeout(()=>{this.setupDragAndDrop()},100),console.log(`\u2705 Componentes avan\xe7ados carregados: Abralimp (${e.querySelectorAll(".pb-widget").length}) | Avan\xe7ado (${t.querySelectorAll(".pb-widget").length})`)})):console.warn("\u26a0\ufe0f Containers de componentes avan\xe7ados n\xe3o encontrados")}createAdvancedWidget(e){const t=document.createElement("div");t.className="pb-widget",t.setAttribute("draggable","true"),t.setAttribute("data-widget-type",e.id),t.setAttribute("data-advanced-component","true");const o=document.createElement("span");o.className="pb-widget-icon",o.textContent=e.icon;const n=document.createElement("span");return n.className="pb-widget-label",n.textContent=e.name,t.appendChild(o),t.appendChild(n),t}setupCategoryToggle(){console.log("\u{1f53d} Configurando categorias colaps\xe1veis..."),document.querySelectorAll(".pb-category-title").forEach(t=>{const o=t,n=o.closest(".pb-category");if(!n)return void console.warn("\u26a0\ufe0f Categoria n\xe3o encontrada para t\xedtulo:",o.textContent);const r=o.querySelector("span")?.textContent||"";"collapsed"===localStorage.getItem(`pb-category-${r}`)&&n.classList.add("collapsed"),o.addEventListener("click",i=>{i.preventDefault(),i.stopPropagation(),n.classList.toggle("collapsed");const s=n.classList.contains("collapsed")?"collapsed":"expanded";localStorage.setItem(`pb-category-${r}`,s)})})}setupSearch(){const e=document.getElementById("widgetSearchInput"),t=document.getElementById("clearSearchBtn");!e||!t||(e.addEventListener("input",o=>{this.searchTerm=o.target.value.toLowerCase().trim(),t.style.display=this.searchTerm?"block":"none",this.filterWidgets()}),t.addEventListener("click",()=>{e.value="",this.searchTerm="",t.style.display="none",this.filterWidgets(),e.focus()}))}filterWidgets(){const e=document.querySelectorAll(".pb-widget"),t=document.querySelectorAll(".pb-category");if(!this.searchTerm)return e.forEach(o=>{o.classList.remove("search-hidden","search-highlighted")}),void t.forEach(o=>o.classList.remove("search-empty"));e.forEach(o=>{const n=o,r=n.querySelector(".pb-widget-label")?.textContent?.toLowerCase()||"",a=n.getAttribute("data-widget-type")?.toLowerCase()||"";r.includes(this.searchTerm)||a.includes(this.searchTerm)?(n.classList.remove("search-hidden"),n.classList.add("search-highlighted")):(n.classList.add("search-hidden"),n.classList.remove("search-highlighted"))}),t.forEach(o=>{const n=o;0===n.querySelectorAll(".pb-widget:not(.search-hidden)").length?n.classList.add("search-empty"):n.classList.remove("search-empty")})}setupZoom(){const e=document.getElementById("zoomInBtn"),t=document.getElementById("zoomOutBtn"),o=document.getElementById("zoomResetBtn"),n=document.getElementById("zoomLevel");!e||!t||!o||!n||(e.addEventListener("click",()=>this.changeZoom(1)),t.addEventListener("click",()=>this.changeZoom(-1)),o.addEventListener("click",()=>this.setZoom(100)),this.updateZoomDisplay())}changeZoom(e){const t=this.zoomLevels.indexOf(this.zoomLevel),o=Math.max(0,Math.min(this.zoomLevels.length-1,t+e));this.setZoom(this.zoomLevels[o])}setZoom(e){this.zoomLevel=e,this.zoomLevels.forEach(t=>{this.canvas.classList.remove(`zoom-${t}`)}),this.canvas.classList.add(`zoom-${e}`),this.updateZoomDisplay()}updateZoomDisplay(){const e=document.getElementById("zoomLevel");e&&(e.textContent=`${this.zoomLevel}%`)}setupClearAll(){var e=this;const t=document.getElementById("clearAllBtn");t&&t.addEventListener("click",(0,H.A)(function*(){const o=e.canvas?e.canvas.querySelectorAll(".pb-element").length:0;0!==o?(yield e.showConfirmModal(`Deseja realmente limpar todos os ${o} elementos do canvas?\n\nEsta a\xe7\xe3o n\xe3o pode ser desfeita.`,"Limpar Canvas"))&&e.clearCanvas():e.showNotification("O canvas j\xe1 est\xe1 vazio!","info")}))}clearCanvas(e=!1){this.canvas.querySelectorAll(".pb-element").forEach(o=>o.remove()),this.elements=[],this.selectedElement=null,this.checkEmptyState(),this.hideProperties(),this.updateElementCounter(),e||this.saveState()}setupKeyboardShortcuts(){document.addEventListener("keydown",e=>{if((e.ctrlKey||e.metaKey)&&"s"===e.key){e.preventDefault();const n=document.getElementById("saveBtn");n&&n.click()}(e.ctrlKey||e.metaKey)&&"z"===e.key&&!e.shiftKey&&(e.preventDefault(),this.undo()),(e.ctrlKey||e.metaKey)&&("y"===e.key||"z"===e.key&&e.shiftKey)&&(e.preventDefault(),this.redo()),(e.ctrlKey||e.metaKey)&&"p"===e.key&&(e.preventDefault(),this.togglePreview());const t=document.activeElement;("Delete"===e.key||"Backspace"===e.key)&&this.selectedElement&&!this.isPreviewMode&&!(t&&("INPUT"===t.tagName||"TEXTAREA"===t.tagName||"true"===t.contentEditable||t.isContentEditable))&&(e.preventDefault(),this.deleteElement(this.selectedElement)),(e.ctrlKey||e.metaKey)&&"d"===e.key&&this.selectedElement&&!this.isPreviewMode&&(e.preventDefault(),this.duplicateElement(this.selectedElement)),"Escape"===e.key&&this.selectedElement&&(this.selectedElement.classList.remove("selected"),this.selectedElement=null,this.hideProperties())})}updateElementCounter(){const e=document.querySelector(".counter-value");if(e){const t=this.canvas?this.canvas.querySelectorAll(".pb-element").length:0;e.textContent=t.toString()}}setupSaveButton(){var e=this;const t=document.getElementById("saveBtn");t?t.addEventListener("click",(0,H.A)(function*(){yield e.performSave("top")})):console.warn("\u26a0\ufe0f Bot\xe3o Salvar n\xe3o encontrado.")}performSave(){var e=this;return(0,H.A)(function*(t="top"){try{const o=document.getElementById("newPageTitle")?.value||"P\xe1gina",n=!e.currentEditingPageId,r=n?"criar":"salvar/atualizar";if(!(yield e.showConfirmModal(`Tem certeza que deseja ${r} "${o.trim()}"?`,`\u{1f4be} Confirmar ${"criar"===r?"Cria\xe7\xe3o":"Atualiza\xe7\xe3o"} de P\xe1gina`)))return;const i=e.buildExportPayload();"function"==typeof console.groupCollapsed?(console.groupCollapsed("\u{1f9fe} Page Builder JSON Export"),console.log("Objeto estruturado:",i),console.log("JSON bruto:",JSON.stringify(i,null,2)),console.groupEnd()):console.log("\u{1f9fe} Page Builder JSON Export",i);const s=yield e.savePageToBackend(i);if(!e.currentEditingPageId){const d=s?.id||s?.data?.id;d&&(e.currentEditingPageId=d)}e.showNotification(`\u2705 P\xe1gina ${n?"criada":"atualizada"} com sucesso!`,"success",2500),e.loadPages()}catch(o){console.error("\u274c Erro ao salvar:",o)}}).apply(this,arguments)}savePageToBackend(e){return new Promise((t,o)=>{try{const n=this.currentEditingPageId,r=this.buildApiUrl(n?`api/v1/paginas-json/${n}`:"api/v1/paginas-json"),a=document.getElementById("newPageTitle")?.value||"P\xe1gina",i=document.getElementById("newPageLink")?.value||"/pagina",s=document.getElementById("newPageDesc")?.value||"",d=document.getElementById("newPageIsMenu")?.checked||!1,c={title:a.trim(),link:i.trim(),descricao:s.trim(),isMenu:d,conteudoJson:JSON.stringify(e)},p=window.localStorage.getItem("auth_token"),g={"Content-Type":"application/json",Accept:"application/json"};p&&(g.Authorization=`Bearer ${p}`),("POST"==(n?"PUT":"POST")?this.http.post(r,c,{headers:g}):this.http.put(r,c,{headers:g})).subscribe({next:h=>{console.log("\u2705 P\xe1gina salva no backend:",h),t(h)},error:h=>{console.error("\u274c Erro ao salvar no backend:",h),this.showNotification(`Erro ao salvar: ${h.error?.message||h.error?.detail||h.statusText||"Erro desconhecido"}`,"error",4e3),o(h)}})}catch(n){console.error("\u274c Erro ao processar salvamento:",n),o(n)}})}setupViewJsonButton(){const e=document.getElementById("viewJsonBtn"),t=document.getElementById("viewJsonModal"),o=document.getElementById("closeJsonModalBtn"),n=document.getElementById("jsonModalOverlay"),r=document.getElementById("jsonViewer"),a=document.getElementById("copyJsonBtn"),i=document.getElementById("downloadJsonBtn");if(!e||!t||!r)return;e.addEventListener("click",()=>{try{const d=this.buildExportPayload(),c=JSON.stringify(d,null,2);r.textContent=c,t.style.display="flex",document.body.style.overflow="hidden"}catch(d){console.error("Erro ao gerar JSON:",d),this.showNotification("Erro ao gerar JSON","error")}});const s=()=>{t.style.display="none",document.body.style.overflow="auto"};o?.addEventListener("click",s),n?.addEventListener("click",s),a?.addEventListener("click",()=>{const d=r.textContent;d&&navigator.clipboard.writeText(d).then(()=>{this.showNotification("JSON copiado para a \xe1rea de transfer\xeancia!","success",1500)})}),i?.addEventListener("click",()=>{try{const d=this.buildExportPayload();this.triggerJsonDownload(d),this.showNotification("JSON baixado com sucesso!","success",1500)}catch(d){console.error("Erro ao baixar JSON:",d),this.showNotification("Erro ao baixar JSON","error")}})}setupImportButton(){const e=document.getElementById("importBtn");if(!e)return void console.warn("\u26a0\ufe0f Bot\xe3o Importar n\xe3o encontrado.");const t=document.createElement("input");t.type="file",t.accept="application/json",t.style.display="none",document.body.appendChild(t),e.addEventListener("click",()=>t.click()),t.addEventListener("change",()=>{const o=t.files?.[0];o&&this.importPayloadFromFile(o)})}importPayloadFromFile(e){const t=new FileReader;t.onload=()=>{try{const o="string"==typeof t.result?t.result:"";if(!o)throw new Error("Arquivo vazio.");const n=JSON.parse(o);this.importLayoutFromPayload(n,!0)}catch(o){console.error("\u274c Erro ao importar JSON:",o),this.showNotification("N\xe3o foi poss\xedvel importar o JSON. Verifique o arquivo.","error",4e3)}},t.onerror=()=>{console.error("\u274c Erro na leitura do arquivo JSON."),this.showNotification("Erro ao ler o arquivo selecionado.","error",4e3)},t.readAsText(e,"utf-8")}importPayloadDirectly(e,t=""){try{if(!e||!Array.isArray(e.layout))throw new Error("Payload de layout inv\xe1lido.");console.log(`\u{1f680} Importando layout para ${t||"p\xe1gina"}...`),this.importLayoutFromPayload(e,!1),console.log("\u2705 Layout importado com sucesso!"),t&&this.showNotification(`\u2705 ${t} carregado com sucesso!`,"success",2e3)}catch(o){console.error("\u274c Erro ao importar payload:",o),this.showNotification(`\u274c Erro ao importar: ${o}`,"error",4e3)}}buildExportPayload(){document.querySelectorAll(".pb-drop-target, .pb-drop-placeholder, .pb-drop-active").forEach(o=>{o.classList.contains("pb-drop-target")||o.classList.contains("pb-drop-placeholder")?o.remove():o.classList.remove("pb-drop-active")}),this.normalizeAdvancedComponentsBeforeExport();const e=this.serializeChildren(this.canvas),t=this.canvas?this.canvas.querySelectorAll(".pb-element").length:0;return console.log("\n\u2705 LAYOUT FINAL - TYPES E DEPTHS:"),e.forEach((o,n)=>{console.log(`[${n}] type="${o.type}" depth=${o.depth}`),o.columns&&o.columns.forEach((r,a)=>{console.log(`  [${a}] Coluna com ${r.children?.length||0} filhos:`),r.children?.forEach((i,s)=>{console.log(`    [${s}] type="${i.type}" depth=${i.depth}`)})})}),{meta:{exportedAt:(new Date).toISOString(),elementCount:t,device:this.currentDevice,zoomLevel:this.zoomLevel,previewMode:this.isPreviewMode},layout:e}}serializeChildren(e,t=0){if(!e)return[];const o=[];return console.log(`[serializeChildren] CHAMADO COM depth=${t}, container="${e.className?.substring(0,40)}"`),Array.from(e.children).filter(a=>{if(!(a instanceof HTMLElement))return!1;const i=a,s=i.classList.contains("pb-element");return s&&console.log(`  \u2192 Encontrado .pb-element: ${i.getAttribute("data-element-type")} (classe: ${i.className.substring(0,40)})`),s}).forEach(a=>{a.classList.contains("pb-drop-placeholder")||a.classList.contains("pb-drop-target")||o.push(this.serializeElement(a,t))}),Array.from(e.children).filter(a=>a instanceof HTMLElement&&"true"===a.getAttribute("data-advanced-component")&&!a.classList.contains("pb-element")).forEach(a=>{const i=a.getAttribute("data-component-id")||a.getAttribute("data-element-type")||"advanced-component";o.push(this.serializeAdvancedComponent(a,a,i,t))}),o.length>0||Array.from(e.children).forEach(a=>{if(!(a instanceof HTMLElement))return;const i=a;if(!(i.classList.contains("pb-drop-placeholder")||i.classList.contains("pb-drop-target")||i.classList.contains("pb-drop-indicator")||i.classList.contains("pb-drop-active"))&&this.isContentElement(i)){const s=this.detectElementType(i),d=this.serializeRawElement(i,s);d&&o.push(d)}}),o}normalizeAdvancedComponentsBeforeExport(){if(!this.canvas)return;console.log("\n\u{1f50d} ANTES DE NORMALIZAR:");const e=this.canvas.querySelectorAll('[data-advanced-component="true"]');console.log(`  Encontrados ${e.length} componentes avan\xe7ados`),e.forEach((n,r)=>{const a=n,i=a.parentElement;console.log(`    [${r}] ${a.getAttribute("data-component-id")} \u2192 id=${a.id} parent: ${i?.tagName}.${i?.className?.substring(0,40)}`)});const t=Array.from(this.canvas.querySelectorAll('[data-advanced-component="true"]'));console.log(`\n  Processando ${t.length} componentes:`),t.forEach((n,r)=>{const a=n.getAttribute("data-component-id")||n.getAttribute("data-element-type")||"advanced-component";console.log(`\n  [${r}] Processando "${a}" (id=${n.id})`);const i=n.closest(".pb-element");if(console.log(`    existingWrapper encontrado: ${!!i}`),i)return console.log(`    existingWrapper.id=${i.id}, classes=${i.className.substring(0,40)}`),i.getAttribute("data-element-type")||(i.setAttribute("data-element-type",a),console.log("    \u2705 data-element-type setado")),void console.log("    \u2705 Componente j\xe1 tem wrapper .pb-element \u2192 RETORNANDO");console.log("    \u26a0\ufe0f Sem wrapper .pb-element \u2192 CRIANDO NOVO WRAPPER");const s=n.parentElement;if(!s)return void console.log("    \u274c Sem parent \u2192 RETORNANDO");const d=n.nextSibling;s.removeChild(n);const c=this.createElementWrapper(n,a);d?s.insertBefore(c,d):s.appendChild(c),this.elements.push({id:c.id,type:a,data:this.safeParseJSON(n.getAttribute("data-component-props")),element:c})}),console.log("\n\u{1f50d} DEPOIS DE NORMALIZAR:");const o=this.canvas.querySelectorAll('[data-advanced-component="true"]');console.log(`  Encontrados ${o.length} componentes avan\xe7ados`),o.forEach((n,r)=>{const a=n,i=a.parentElement;console.log(`    [${r}] ${a.getAttribute("data-component-id")} \u2192 id=${a.id} parent: ${i?.tagName}.${i?.className?.substring(0,40)}`)})}isContentElement(e){const t=e.tagName.toLowerCase();return!!(["img","button","h1","h2","h3","h4","h5","h6","p","hr","video","iframe"].includes(t)||e.classList.contains("pb-basic-button")||e.classList.contains("pb-basic-spacer")||"true"===e.getAttribute("data-image-widget"))}serializeRawElement(e,t){const o={id:e.id||null,type:t};if("image"===t){const n=e,r=n.getAttribute("src")||n.src||"",a=this.extractElementStyles(n),i="true"===n.getAttribute("data-is-url"),d=n.closest(".pb-element-image")?.getAttribute("data-component-props")||"{}",c=this.safeParseJSON(d);o.props={src:r,alt:n.getAttribute("alt")||c.altText||"",isUrl:i,...a,linkUrl:c.linkUrl||void 0,abrirEm:c.abrirEm||void 0,alinhamento:c.alinhamento||void 0,borderRadius:c.borderRadius||void 0,altText:c.altText||void 0}}else if("button"===t){const n=e,r=this.extractElementStyles(n);o.props={text:n.textContent?.trim()??"",...r}}else if("text"===t||"heading"===t){const n=e,r=this.extractElementStyles(n),a=this.normalizeInnerHtml(n);o.props={text:a||(n.textContent?.trim()??""),...r}}return o}serializeElement(e,t){const o=this.detectElementType(e);("columns"===o||"noticia-destaque"===o)&&console.log(`\n  \u{1f504} serializeElement: type="${o}", depth=${t}, wrapper.id=${e.id?.substring(0,20)}, parent=${e.parentElement?.className?.substring(0,40)}`);const n=e.querySelector('[data-advanced-component="true"]');if(n)return this.serializeAdvancedComponent(e,n,o,t);let r=["columns","container","section"].includes(o)?e:this.getElementContent(e);const a={id:e.id||null,type:o,depth:t};if(!r)return a.children=[],a;switch(o){case"heading":{const i=r,s=this.extractElementStyles(i),d=this.extractElementStyles(e),c=this.normalizeInnerHtml(i);a.props={tag:i.tagName.toLowerCase(),text:c||(i.textContent?.trim()??""),...s,...d};break}case"text":{const i=r,s=this.extractElementStyles(i),d=this.extractElementStyles(e),c=this.normalizeInnerHtml(i);a.props={text:c||(i.textContent?.trim()??""),...s,...d};break}case"image":{const i=r,s=i.getAttribute("src")||i.src||"",d=this.extractElementStyles(i),c=this.extractElementStyles(e),p="true"===i.getAttribute("data-is-url"),g=e.getAttribute("data-component-props")||"{}",u=this.safeParseJSON(g);a.props={src:s,alt:i.getAttribute("alt")||u.altText||"",isUrl:p,...d,...c,linkUrl:u.linkUrl||void 0,abrirEm:u.abrirEm||void 0,alinhamento:u.alinhamento||void 0,borderRadius:this.normalizeCssUnit(u.borderRadius)||this.normalizeCssUnit(i.style.borderRadius)||this.normalizeCssUnit(e.style.borderRadius)||void 0,altText:u.altText||void 0};break}case"button":{const i=r,s=i.querySelector("button");if(a.props={text:s?.textContent?.trim()??""},i.style.textAlign&&(a.props.align=i.style.textAlign),i.style.background&&(a.props.containerBackground=i.style.background),i.style.marginTop&&(a.props.marginTop=i.style.marginTop),i.style.marginBottom&&(a.props.marginBottom=i.style.marginBottom),s){const d=window.getComputedStyle(s);s.style.background&&(a.props.background=s.style.background),s.style.color&&(a.props.color=s.style.color),s.style.padding&&(a.props.padding=s.style.padding),s.style.borderRadius&&(a.props.borderRadius=s.style.borderRadius),s.style.fontSize&&(a.props.fontSize=s.style.fontSize),s.style.fontWeight&&(a.props.fontWeight=s.style.fontWeight),s.style.border&&(a.props.border=s.style.border);const c=s.style.borderWidth||d.borderTopWidth,p=s.style.borderStyle||d.borderTopStyle,g=s.style.borderColor||d.borderTopColor;c&&(a.props.borderWidth=c),p&&(a.props.borderStyle=p),g&&(a.props.borderColor=g),s.style.width&&(a.props.width=s.style.width),s.style.display&&(a.props.display=s.style.display),s.style.boxShadow&&(a.props.boxShadow=s.style.boxShadow);const u=s.dataset.fullWidth;u?a.props.fullWidth="true"===u:"block"===s.style.display&&"100%"===s.style.width&&(a.props.fullWidth=!0);const b=s.dataset.hoverBackground,h=s.dataset.hoverColor,f=s.dataset.hoverBorderColor,m=s.dataset.hoverShadow;b&&(a.props.hoverBackground=b),h&&(a.props.hoverColor=h),f&&(a.props.hoverBorderColor=f),m&&(a.props.hoverShadow=m)}break}case"divider":{const i=r,s=this.extractElementStyles(i),d=this.extractElementStyles(e);a.props={...s,...d},i.style.borderTop&&(a.props.border=i.style.borderTop),i.style.margin&&(a.props.margin=i.style.margin),i.style.width&&(a.props.width=i.style.width),i.style.height&&(a.props.height=i.style.height),i.style.minHeight?a.props.minHeight=i.style.minHeight:s.minHeight&&(a.props.minHeight=s.minHeight);const c=i.getAttribute("data-align");if(c)a.props.align=c;else{const p=this.detectHorizontalAlignment(i);p&&(a.props.align=p)}i.style.marginTop&&(a.props.marginTop=i.style.marginTop),i.style.marginBottom&&(a.props.marginBottom=i.style.marginBottom);break}case"spacer":{const i=r,s=this.extractElementStyles(i),d=this.extractElementStyles(e);a.props={height:i.style.height||"",...s,...d},i.style.background&&(a.props.background=i.style.background),i.style.marginTop&&(a.props.marginTop=i.style.marginTop),i.style.marginBottom&&(a.props.marginBottom=i.style.marginBottom);const c=i.getAttribute("data-pattern");c&&(a.props.pattern="true"===c);break}case"section":{const i=r,s=this.extractElementStyles(i),d=this.extractElementStyles(e);a.props={background:i.style.background||"",padding:i.style.padding||"",minHeight:i.style.minHeight||"",...s,...d},a.children=this.serializeChildren(i,t+1);break}case"container":{const i=r,s=this.extractElementStyles(i),d=this.extractElementStyles(e);a.props={background:i.style.background||"",padding:i.style.padding||"",maxWidth:i.style.maxWidth||"",...s,...d},a.children=this.serializeChildren(i,t+1);break}case"columns":{const i=r;let s=i.querySelector(".pb-columns-container"),d=[];if(s)d=Array.from(s.children).filter(c=>c instanceof HTMLElement&&c.classList.contains("pb-column"));else if(d=Array.from(i.children).filter(c=>c instanceof HTMLElement&&c.classList.contains("pb-column")),0===d.length){const c=i.querySelectorAll(".pb-column");d=Array.from(c)}a.props={columns:parseInt(i.getAttribute("data-columns-count")||d.length.toString(),10),background:i.style.background||""},s&&s.style.gap&&(a.props.gap=s.style.gap),s&&s.style.alignItems&&(a.props.alignItems=s.style.alignItems),s&&s.style.justifyContent&&(a.props.justifyContent=s.style.justifyContent),i.style.textAlign&&(a.props.textAlign=i.style.textAlign),a.columns=d.map((c,p)=>{const g=this.serializeChildren(c,t+1);return{index:p,props:{padding:c.style.padding||"",background:c.style.background||"",flex:c.style.flex||"",width:c.style.width||"",display:c.style.display||"",minWidth:c.style.minWidth||"",textAlign:c.style.textAlign||"",alignItems:c.style.alignItems||"",justifyContent:c.style.justifyContent||"",alignContent:c.style.alignContent||"",verticalAlign:c.style.verticalAlign||"",margin:c.style.margin||"",gap:c.style.gap||""},children:g}});break}case"video":{const i=r;a.props={html:i.innerHTML.trim(),background:i.style.background||""};break}case"gallery":{const i=r,s=Array.from(i.querySelectorAll("img"));a.props={images:s.map(d=>d.src),columns:i.style.gridTemplateColumns||"",gap:i.style.gap||""};break}case"imagem-clicavel":{const s=r.querySelector(".imagem-clicavel");if(s){const c=s.src||"",p=this.extractElementStyles(e);a.props={imagemUrl:c,altText:s.getAttribute("alt")||"",linkUrl:s.getAttribute("data-link")||"",abrirEm:s.getAttribute("data-target")||"_blank",alinhamento:p.textAlign||"left",...p}}const d=e.querySelector(".imagem-clicavel-children");if(d&&d.children.length>0){const c=d.querySelector(".pb-drop-placeholder");c&&c.remove(),a.children=this.serializeChildren(d,t+1),c&&d.appendChild(c)}break}case"accordion":{const i=e.querySelector(".pb-basic-accordion");if(i){const d=Array.from(i.querySelectorAll(".accordion-item")).map(c=>{const p=c.getAttribute("data-item-id")||this.generateAccordionItemId(),g=c.querySelector(".accordion-title"),u=c.querySelector(".accordion-content-inner"),b=u?.querySelector(".pb-drop-placeholder")||null;b&&b.remove();const h=u?this.serializeChildren(u,t+1):[];return b&&u&&!u.contains(b)&&u.appendChild(b),{id:p,title:g?.textContent?.trim()||"Item",open:c.classList.contains("open"),children:h}});a.props={allowMultiple:"true"===i.getAttribute("data-allow-multiple"),items:d}}break}default:{a.props={html:r.innerHTML,text:r.textContent?.trim()??""};const i=this.serializeChildren(r,t+1);i.length&&(a.children=i);break}}return a}serializeAdvancedComponent(e,t,o,n){const r=t.getAttribute("data-component-id")||o||"advanced-component",a=this.applyAdvancedComponentNormalizers(r,this.safeParseJSON(t.getAttribute("data-component-props"))),i=t.getAttribute("data-component-meta"),s=i?this.safeParseJSON(i):void 0,d=t.querySelector(".advanced-component-preview"),c=this.extractElementStyles(e),p=this.extractElementStyles(t);let u,g={};try{const m=t.querySelector('[data-spacing-target="true"]');if(m)g=this.extractElementStyles(m);else{const x=Array.from(t.children).find(C=>{try{const v=C.style;return!(!v||!(v.padding||v.margin||v.marginTop||v.marginBottom||v.paddingTop||v.paddingBottom))}catch{return!1}});x&&(g=this.extractElementStyles(x))}}catch{g={}}if(d){const m=d.cloneNode(!0);m.querySelectorAll(".cards-add-btn-wrapper, .cards-add-btn").forEach(x=>x.remove()),m.querySelectorAll(".card-delete-btn, .accordion-delete-btn").forEach(x=>x.remove()),m.querySelectorAll(".accordion-add-btn").forEach(x=>x.remove()),u=m.innerHTML}const b=this.serializeChildren(t,n+1);console.log(`[serializeAdvancedComponent] type="${r}", depth RECEBIDO=${n}, parent=${e.parentElement?.className?.substring(0,40)}`);const h=this.mergeAdvancedStyleProps(a,c,p,g),f={id:e.id||null,type:r,advanced:!0,props:h};return s&&Object.keys(s).length&&(f.meta=s),u&&(f.snapshot=u),b.length&&(f.children=b),f.depth=n,console.log(`[serializeAdvancedComponent] ANTES DE RETORNAR: node.depth=${f.depth}`),f}normalizeInnerHtml(e){const t=e.innerHTML||"";return/<[^>]+>/.test(t)?t:t.replace(/\r\n|\r|\n/g,"<br/>")}decodeHtmlEntities(e){if(null==e)return"";const t=String(e);if(!/&lt;|&gt;|&amp;|&quot;|&#39;/.test(t))return t;try{const o=document.createElement("textarea");return o.innerHTML=t,o.value}catch{return t}}loadLayoutFromPayload(e){this.importLayoutFromPayload(e,!1)}importLayoutFromPayload(e,t){if(!e||!Array.isArray(e.layout))throw new Error("Payload de layout inv\xe1lido.");const o=!!e.meta?.previewMode;this.isPreviewMode&&this.togglePreview(),this.clearCanvas(!0),this.hideProperties(),this.selectedElement=null,this.removeEmptyState(),this.populateFromLayout(e.layout,this.canvas),e.meta?.device&&this.switchDevice(e.meta.device),"number"==typeof e.meta?.zoomLevel&&this.setZoom(e.meta.zoomLevel),this.checkEmptyState(),this.updateElementCounter(),this.reattachEventListeners(),this.history=[],this.historyIndex=-1,this.saveState(),this.isPreviewMode!==o&&this.togglePreview(),t&&this.showNotification("Layout importado com sucesso!","success",2500)}populateFromLayout(e,t,o=0){e.forEach(n=>this.createElementFromNode(n,t,o))}createElementFromNode(e,t,o){if(!e||!e.type)return;const n=e.advanced?this.advancedComponentsService.getComponentById(e.type):void 0,r={...this.mapPropsForCreation(e,n),depth:o},a=this.createElement(e.type,r),i=this.createElementWrapper(a,e.type);e.id&&(i.id=e.id),t.appendChild(i),this.removeDirectPlaceholder(t),this.isContainerLikeElement(t)&&this.updateContainerLikePlaceholder(t),this.elements.push({id:i.id,type:e.type,data:e.props||{},element:i}),this.applyPropsToElement(e,a,n),this.applyWrapperStyles(i,e),"columns"===e.type?this.populateColumns(e,a,o):"accordion"===e.type?this.populateAccordion(e,i,a,o):e.children?.length&&this.populateFromLayout(e.children,a,o+1)}populateColumns(e,t,o=0){const n=t.querySelector(".pb-columns-container");if(!n)return;e.props?.background&&(t.style.background=e.props.background),e.props?.gap&&(n.style.gap=e.props.gap);const r=Array.from(n.querySelectorAll(".pb-column"));!e.columns||0===e.columns.length||(e.columns.forEach(a=>{const i=r[a.index]??r[0];if(!i)return;const s=a.props||{};s.padding&&(i.style.padding=s.padding),s.background&&(i.style.background=s.background),s.flex?i.style.flex=s.flex:s.width&&(i.style.flex=s.width),s.width&&(i.style.width=s.width,i.style.maxWidth=s.width,i.setAttribute("data-column-width",s.width)),i.getAttribute("data-droppable")||this.makeDroppable(i,["heading","text","image","button","divider","spacer","video","columns","container","section","advanced-component"]),a.children&&a.children.length&&(this.removeDirectPlaceholder(i),this.populateFromLayout(a.children,i,o+1))}),this.refreshColumnsWrapperStructure(t))}populateAccordion(e,t,o,n=0){const r=t.closest(".pb-element-accordion")||t;console.log("\u{1f4d1} [populateAccordion] Populando acorde\xe3o com children:",e.children?.length||0),this.setupAccordionDropZones(r)}removeDirectPlaceholder(e){e.querySelector(":scope > .pb-drop-placeholder")?.remove()}mapPropsForCreation(e,t){const o=e.props||{};switch(e.type){case"heading":{const r=this.decodeHtmlEntities(o.html??o.text??"");return{level:o.tag||o.level||"h2",text:r,align:o.align,color:o.color,background:o.background}}case"text":return{text:this.decodeHtmlEntities(o.html??o.text??""),align:o.align,color:o.color,fontSize:o.fontSize,lineHeight:o.lineHeight,background:o.background};case"image":return{src:o.src,alt:o.alt,width:o.width,height:o.height,maxWidth:o.maxWidth,borderRadius:this.normalizeCssUnit(o.borderRadius),background:o.background,border:o.border,isUrl:o.isUrl};case"button":return{text:o.text,background:o.background,color:o.color,padding:o.padding,borderRadius:this.normalizeCssUnit(o.borderRadius),fontSize:o.fontSize,fontWeight:o.fontWeight,border:o.border,borderWidth:o.borderWidth,borderStyle:o.borderStyle,borderColor:o.borderColor,align:o.align,containerBackground:o.containerBackground,width:o.width,display:o.display,fullWidth:o.fullWidth,marginTop:o.marginTop,marginBottom:o.marginBottom,boxShadow:o.boxShadow,hoverBackground:o.hoverBackground,hoverColor:o.hoverColor,hoverBorderColor:o.hoverBorderColor,hoverShadow:o.hoverShadow};case"divider":{const n=this.parseDividerBorder(o.border),r=this.parseMarginValues(o.margin),a=o.minHeight||o.height,i={height:n.height,style:n.style,color:n.color,margin:o.margin,marginTop:o.marginTop??r.top,marginBottom:o.marginBottom??r.bottom,align:o.align,width:o.width};return a&&(i.blockHeight=a),i}case"spacer":return{height:o.height,background:o.background,marginTop:o.marginTop,marginBottom:o.marginBottom,pattern:o.pattern};case"section":return{padding:o.padding,background:o.background,minHeight:o.minHeight};case"container":return{padding:o.padding,background:o.background,maxWidth:o.maxWidth};case"columns":return{columns:o.columns??e.columns?.length??2,gap:o.gap,background:o.background};case"video":return{background:o.background};case"gallery":{let n;if(o.columns){const r=String(o.columns).trim(),a=r.match(/repeat\s*\((\d+)/i);if(a)n=parseInt(a[1],10);else{const i=parseInt(r,10);n=Number.isNaN(i)?void 0:i}}return{images:o.images,columns:n,gap:o.gap,background:o.background}}case"imagem-clicavel":return{imagemUrl:o.imagemUrl||"",linkUrl:o.linkUrl||"https://example.com",altText:o.altText||"Imagem",largura:o.largura||"100%",maxLargura:o.maxLargura||"400px",borderRadius:this.normalizeCssUnit(o.borderRadius)||"8px",abrirEm:o.abrirEm||"_blank",alinhamento:o.alinhamento||"left",classeCustomizada:o.classeCustomizada||""};case"accordion":return o;default:return e.advanced&&t?{...t.defaultProps,...o}:o}}applyPropsToElement(e,t,o){const n=e.props||{};switch(e.type){case"heading":{const r=t,a=n.html??n.text??"";"string"==typeof a&&/<[^>]+>/.test(a)?r.innerHTML=String(a):r.textContent="string"==typeof a&&a.length>0?a:"",n.align&&(r.style.textAlign=n.align),n.color&&(r.style.color=n.color),n.background&&(r.style.background=n.background),n.margin&&(r.style.margin=n.margin);break}case"text":{const r=t,a=n.html??n.text??"";"string"==typeof a&&/<[^>]+>/.test(a)?r.innerHTML=String(a):"string"==typeof a&&a.length>0?(r.textContent=a,r.style.whiteSpace="pre-line"):r.textContent="",n.align&&(r.style.textAlign=n.align),n.color&&(r.style.color=n.color),n.fontSize&&(r.style.fontSize=n.fontSize),n.lineHeight&&(r.style.lineHeight=n.lineHeight),n.background&&(r.style.background=n.background);break}case"image":{const r=t,a=r.parentElement;if(n.src&&(r.src=n.src),n.alt&&(r.alt=n.alt),n.width&&(r.style.width=n.width),n.height&&(r.style.height=n.height),n.maxWidth&&(r.style.maxWidth=n.maxWidth),n.borderRadius&&(r.style.borderRadius=n.borderRadius),n.background&&(r.style.background=n.background),n.border&&(r.style.border=n.border),n.isUrl&&r.setAttribute("data-is-url","true"),a){const i={alinhamento:n.alinhamento,borderRadius:n.borderRadius,linkUrl:n.linkUrl,abrirEm:n.abrirEm,altText:n.altText||n.alt};Object.keys(i).forEach(s=>void 0===i[s]&&delete i[s]),a.setAttribute("data-component-props",JSON.stringify(i)),this.applyImageStyles(r,a),this.setupImageLinkHandler(r,a)}break}case"button":{const r=t,a=r.querySelector("button");if(n.align&&(r.style.textAlign=n.align),"containerBackground"in n&&(r.style.background=n.containerBackground||"transparent"),"marginTop"in n&&n.marginTop&&(r.style.marginTop=n.marginTop),"marginBottom"in n&&n.marginBottom&&(r.style.marginBottom=n.marginBottom),a){if("text"in n&&"string"==typeof n.text&&(a.textContent=n.text.trim().length?n.text:"Clique Aqui"),n.background&&(a.style.background=n.background),n.color&&(a.style.color=n.color),n.padding&&(a.style.padding=n.padding),n.borderRadius&&(a.style.borderRadius=n.borderRadius),n.fontSize&&(a.style.fontSize=n.fontSize),n.fontWeight&&(a.style.fontWeight=n.fontWeight),n.border&&(a.style.border=n.border),n.borderWidth&&(a.style.borderWidth=n.borderWidth),n.borderStyle&&(a.style.borderStyle=n.borderStyle),n.borderColor&&(a.style.borderColor=n.borderColor),"width"in n&&(n.width?a.style.width=n.width:a.style.removeProperty("width")),"display"in n&&n.display&&(a.style.display=n.display),"boxShadow"in n&&(n.boxShadow?a.style.boxShadow=n.boxShadow:a.style.removeProperty("box-shadow")),"fullWidth"in n){const s=!!n.fullWidth;a.dataset.fullWidth=s?"true":"false",s?(a.style.display="block",n.width||(a.style.width="100%")):"display"in n||(a.style.display="inline-block","width"in n||a.style.removeProperty("width"))}const i=window.getComputedStyle(a);this.applyButtonHoverStyles(a,{background:a.style.background||i.backgroundColor,color:a.style.color||i.color,borderColor:a.style.borderColor||i.borderTopColor,boxShadow:a.style.boxShadow||i.boxShadow,hoverBackground:n.hoverBackground,hoverColor:n.hoverColor,hoverBorderColor:n.hoverBorderColor,hoverShadow:n.hoverShadow})}break}case"divider":{const r=t;n.border&&(r.style.borderTop=n.border),n.width&&(r.style.width=n.width);const a=this.parseMarginValues(n.margin),i=n.marginTop??a.top??(r.style.marginTop||"20px"),s=n.marginBottom??a.bottom??(r.style.marginBottom||"20px"),d=n.align??r.getAttribute("data-align")??"center";this.setDividerLayout(r,d,i,s),r.setAttribute("data-align",d);break}case"spacer":{const r=t;if(n.height&&(r.style.height=n.height),n.background&&(r.style.background=n.background),"marginTop"in n&&n.marginTop&&(r.style.marginTop=n.marginTop),"marginBottom"in n&&n.marginBottom&&(r.style.marginBottom=n.marginBottom),("marginTop"in n||"marginBottom"in n)&&(r.style.margin=`${n.marginTop??r.style.marginTop??"0px"} 0 ${n.marginBottom??r.style.marginBottom??"0px"}`),"pattern"in n){const a=!1!==n.pattern;r.dataset.pattern=a?"true":"false",r.style.backgroundImage=a?this.getSpacerPattern():"none"}break}case"section":{const r=t;n.background&&(r.style.background=n.background),n.padding&&(r.style.padding=n.padding),n.minHeight&&(r.style.minHeight=n.minHeight);break}case"container":{const r=t;n.background&&(r.style.background=n.background),n.padding&&(r.style.padding=n.padding),n.maxWidth&&(r.style.maxWidth=n.maxWidth);break}case"columns":{const r=t;n.background&&(r.style.background=n.background),n.columns&&r.setAttribute("data-columns-count",String(n.columns));const a=r.querySelector(".pb-columns-container");a&&n.gap&&(a.style.gap=n.gap);break}case"video":{const r=t;n.background&&(r.style.background=n.background),n.html&&(r.innerHTML=n.html);break}case"gallery":{const r=t;n.background&&(r.style.background=n.background),n.columns&&(r.style.gridTemplateColumns=n.columns),n.gap&&(r.style.gap=n.gap),Array.isArray(n.images)&&(r.innerHTML="",n.images.forEach(a=>{const i=document.createElement("img");i.src=a,i.style.width="100%",i.style.height="200px",i.style.objectFit="cover",i.style.borderRadius="4px",r.appendChild(i)}));break}case"imagem-clicavel":{const a=t.querySelector(".imagem-clicavel");a&&n.imagemUrl&&(a.src=n.imagemUrl,a.setAttribute("src",n.imagemUrl)),a&&n.altText&&(a.alt=n.altText,a.setAttribute("alt",n.altText)),a&&n.linkUrl&&a.setAttribute("data-link",n.linkUrl),a&&n.abrirEm&&a.setAttribute("data-target",n.abrirEm),a&&n.borderRadius&&(a.style.borderRadius=n.borderRadius);break}case"accordion":{const r=t.classList?.contains("pb-element-accordion")?t:t.closest(".pb-element-accordion");r&&this.applyAccordionProps(r,n,e.depth??0);break}default:if(e.advanced){const r=t,a=o?.id||e.type,i=o?{...o.defaultProps,...n}:n,s=this.applyAdvancedComponentNormalizers(a,i);r.setAttribute("data-component-props",JSON.stringify(s)),this.applyAdvancedContainerStyles(r,s),e.meta&&Object.keys(e.meta).length?r.setAttribute("data-component-meta",JSON.stringify(e.meta)):r.removeAttribute("data-component-meta");const d=r.querySelector(".advanced-component-preview");if(o){const c=this.extensionsService.renderComponent(a,s);c&&d?d.innerHTML=c:e.snapshot&&d&&(d.innerHTML=e.snapshot),this.extensionsService.setupInlineEditing(r,a,o),"titulo-texto-pagina"===a?this.setupInlineEditingForTituloTexto(r,o):"mvv-cards"===a?this.setupInlineEditingForMvvCards(r,o):"cta-section"===a&&this.setupInlineEditingForCtaSection(r,o)}else e.snapshot&&d?d.innerHTML=e.snapshot:e.snapshot&&(r.innerHTML=e.snapshot)}}}applyWrapperStyles(e,t){if(t.advanced)return;const o=t.props||{};o.textAlign&&(e.style.textAlign=o.textAlign,"image"===t.type?"center"===o.textAlign?(e.style.display="flex",e.style.justifyContent="center",e.style.alignItems="center"):"right"===o.textAlign?(e.style.display="flex",e.style.justifyContent="flex-end",e.style.alignItems="center"):(e.style.display="flex",e.style.justifyContent="flex-start",e.style.alignItems="center"):e.style.display="block"),o.margin&&(e.style.margin=o.margin),o.padding&&(e.style.padding=o.padding),o.marginTop&&(e.style.marginTop=o.marginTop),o.marginBottom&&(e.style.marginBottom=o.marginBottom),o.marginLeft&&(e.style.marginLeft=o.marginLeft),o.marginRight&&(e.style.marginRight=o.marginRight)}applyAdvancedContainerStyles(e,t){e&&t&&["margin","marginTop","marginBottom","marginLeft","marginRight","padding","paddingTop","paddingBottom","paddingLeft","paddingRight","background","backgroundColor","border","borderRadius","width","maxWidth","minWidth","height","minHeight","boxShadow","textAlign","display","gap","alignItems","justifyContent"].forEach(r=>{const a=t[r],i=(r=>r.replace(/([A-Z])/g,"-$1").toLowerCase())(r);null!=a&&""!==String(a).trim()?e.style.setProperty(i,String(a)):e.style.removeProperty(i)})}mergeAdvancedStyleProps(e,t={},o={},n={}){const r={...e||{}};return new Set([...Object.keys(t||{}),...Object.keys(o||{}),...Object.keys(n||{})]).forEach(i=>{delete r[i];const s=n&&void 0!==n[i]?n[i]:o&&void 0!==o[i]?o[i]:t?.[i];null!=s&&""!==String(s).trim()&&(r[i]=s)}),r}parseDividerBorder(e){if(!e)return{};const t=e.trim().split(/\s+/);if(t.length<3)return{};const[o,n,...r]=t;return{height:o,style:n,color:r.join(" ")}}getElementContentForExport(e){const t=Array.from(e.children);for(const o of t)if(!o.classList.contains("pb-element-controls"))return o;return null}extractElementStyles(e){const t={};return e.style.textAlign&&(t.textAlign=e.style.textAlign),e.style.verticalAlign&&(t.verticalAlign=e.style.verticalAlign),e.style.color&&(t.color=e.style.color),e.style.background&&(t.background=e.style.background),e.style.backgroundColor&&(t.backgroundColor=e.style.backgroundColor),e.style.fontSize&&(t.fontSize=e.style.fontSize),e.style.fontWeight&&(t.fontWeight=e.style.fontWeight),e.style.fontFamily&&(t.fontFamily=e.style.fontFamily),e.style.lineHeight&&(t.lineHeight=e.style.lineHeight),e.style.padding&&(t.padding=e.style.padding),e.style.paddingTop&&(t.paddingTop=e.style.paddingTop),e.style.paddingBottom&&(t.paddingBottom=e.style.paddingBottom),e.style.paddingLeft&&(t.paddingLeft=e.style.paddingLeft),e.style.paddingRight&&(t.paddingRight=e.style.paddingRight),e.style.margin&&(t.margin=e.style.margin),e.style.marginTop&&(t.marginTop=e.style.marginTop),e.style.marginBottom&&(t.marginBottom=e.style.marginBottom),e.style.marginLeft&&(t.marginLeft=e.style.marginLeft),e.style.marginRight&&(t.marginRight=e.style.marginRight),e.style.width&&(t.width=e.style.width),e.style.height&&(t.height=e.style.height),e.style.maxWidth&&(t.maxWidth=e.style.maxWidth),e.style.minWidth&&(t.minWidth=e.style.minWidth),e.style.minHeight&&(t.minHeight=e.style.minHeight),e.style.flex&&(t.flex=e.style.flex),e.style.flexBasis&&(t.flexBasis=e.style.flexBasis),e.style.display&&"block"!==e.style.display&&(t.display=e.style.display),e.style.gap&&(t.gap=e.style.gap),e.style.alignItems&&(t.alignItems=e.style.alignItems),e.style.justifyContent&&(t.justifyContent=e.style.justifyContent),e.style.alignContent&&(t.alignContent=e.style.alignContent),e.style.borderRadius&&(t.borderRadius=e.style.borderRadius),e.style.border&&(t.border=e.style.border),e.style.boxShadow&&(t.boxShadow=e.style.boxShadow),t}persistAdvancedStylesIfNeeded(e){if(!e)return;const t=e.hasAttribute("data-advanced-component")?e:e.closest('[data-advanced-component="true"]');if(!t)return;const o=this.safeParseJSON(t.getAttribute("data-component-props"))||{},n=t.getAttribute("data-component-id"),r=t.closest(".pb-element"),a=r?this.extractElementStyles(r):{},i=this.extractElementStyles(t);let s={};const d=t.querySelector('[data-spacing-target="true"]');if(d)s=this.extractElementStyles(d);else{const g=Array.from(t.children).find(u=>{try{const b=u.style;return!(!b||!(b.padding||b.margin||b.marginTop||b.marginBottom||b.paddingTop||b.paddingBottom))}catch{return!1}});g&&(s=this.extractElementStyles(g))}const c=this.mergeAdvancedStyleProps(o,a,i,s),p=this.applyAdvancedComponentNormalizers(n,c);t.setAttribute("data-component-props",JSON.stringify(p))}normalizeCssUnit(e){if(null==e)return;const t=String(e).trim();return""!==t?/^[-+]?[0-9]*\.?[0-9]+$/.test(t)?`${t}px`:(/(px|%|rem|em|vh|vw)$/.test(t),t):void 0}detectElementType(e){const t=e.getAttribute("data-element-type");if(t)return t;const o=Array.from(e.classList).find(n=>n.startsWith("pb-element-")&&"pb-element-wrapper"!==n);return o?o.replace("pb-element-",""):"unknown"}safeParseJSON(e){if(!e)return{};try{return JSON.parse(e)}catch(t){return console.warn("\u26a0\ufe0f N\xe3o foi poss\xedvel fazer parse das props do componente avan\xe7ado.",t),{}}}triggerJsonDownload(e){try{const t=JSON.stringify(e,null,2),o=new Blob([t],{type:"application/json"}),n=URL.createObjectURL(o),r=document.createElement("a");r.href=n,r.download=`page-builder-export-${(new Date).toISOString().replace(/[:.]/g,"-")}.json`,r.style.display="none",document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}catch(t){console.warn("\u26a0\ufe0f N\xe3o foi poss\xedvel iniciar o download do JSON.",t)}}createImageLibraryModal(){const e=document.createElement("div");e.id="imageLibraryModal",e.className="pb-image-modal",e.style.display="none",e.innerHTML='\n      <div class="pb-image-modal-overlay"></div>\n      <div class="pb-image-modal-content">\n        <div class="pb-image-modal-header">\n          <h3>\u{1f5bc}\ufe0f Biblioteca de Imagens</h3>\n          <button class="pb-image-modal-close">\u2715</button>\n        </div>\n\n        <div class="pb-image-modal-tabs">\n          <button class="pb-image-tab active" data-tab="upload">\u{1f4e4} Upload</button>\n          <button class="pb-image-tab" data-tab="library">\u{1f4da} Biblioteca</button>\n          <button class="pb-image-tab" data-tab="url">\u{1f517} URL</button>\n        </div>\n\n        <div class="pb-image-modal-body">\n          \x3c!-- Tab Upload --\x3e\n          <div class="pb-image-tab-content active" id="tab-upload">\n            <div class="pb-image-upload-area">\n              <input type="file" id="imageFileInput" accept="image/*" style="display: none;">\n              <div class="pb-image-dropzone" id="imageDropzone">\n                <div class="pb-dropzone-icon">\u{1f5bc}\ufe0f</div>\n                <p class="pb-dropzone-text">Arraste uma imagem ou clique para selecionar</p>\n                <p class="pb-dropzone-formats">PNG, JPG, GIF, SVG (M\xe1x: 5MB)</p>\n              </div>\n\n              <div class="pb-image-preview-container" id="imagePreviewContainer" style="display: none;">\n                <div class="pb-crop-canvas-wrapper" style="position: relative; width: 100%; max-height: 400px; overflow: hidden; background: #f3f4f6; border-radius: 8px;">\n                  <canvas id="cropCanvas" style="display: block; max-width: 100%; max-height: 400px; cursor: crosshair;"></canvas>\n                </div>\n                <div class="pb-image-crop-tools">\n                  <button class="pb-crop-btn" data-aspect="free">\u{1f532} Livre</button>\n                  <button class="pb-crop-btn active" data-aspect="1:1">\u2b1c 1:1</button>\n                  <button class="pb-crop-btn" data-aspect="16:9">\u25ad 16:9</button>\n                  <button class="pb-crop-btn" data-aspect="4:3">\u25ac 4:3</button>\n                  <button class="pb-crop-btn" data-aspect="original">\u{1f4d0} Original</button>\n                </div>\n                <div class="pb-image-resize-tools">\n                  <label>Largura: <input type="number" id="imageWidth" min="50" max="2000" step="10"> px</label>\n                  <label>Altura: <input type="number" id="imageHeight" min="50" max="2000" step="10"> px</label>\n                  <label><input type="checkbox" id="maintainAspect" checked> Manter propor\xe7\xe3o</label>\n                </div>\n              </div>\n            </div>\n          </div>\n\n          \x3c!-- Tab Biblioteca --\x3e\n          <div class="pb-image-tab-content" id="tab-library">\n            <div class="pb-image-library-grid" id="imageLibraryGrid">\n              <p class="pb-library-empty">Nenhuma imagem na biblioteca ainda.</p>\n            </div>\n          </div>\n\n          \x3c!-- Tab URL --\x3e\n          <div class="pb-image-tab-content" id="tab-url">\n            <div class="pb-image-url-form">\n              <label for="imageUrlInput">URL da Imagem:</label>\n              <input type="url" id="imageUrlInput" placeholder="https://exemplo.com/imagem.jpg">\n              <button class="pb-btn-primary" id="loadImageUrl">Carregar Imagem</button>\n              <div class="pb-url-preview" id="urlPreview" style="display: none;">\n                <img id="urlPreviewImage" src="" alt="Preview">\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <div class="pb-image-modal-footer">\n          <button class="pb-btn-secondary" id="cancelImageBtn">Cancelar</button>\n          <button class="pb-btn-primary" id="insertImageBtn">Inserir Imagem</button>\n        </div>\n      </div>\n    ',document.body.appendChild(e),this.imageModal=e,console.log("\u2705 Modal de imagens criado e adicionado ao DOM",{modalId:e.id,modalInDOM:document.getElementById("imageLibraryModal"),imageModal:this.imageModal}),this.setupImageModalEvents()}setupImageModalEvents(){if(!this.imageModal)return;this.imageModal.querySelectorAll(".pb-image-tab").forEach(c=>{c.addEventListener("click",()=>{const p=c.getAttribute("data-tab");this.switchImageTab(p)})});const t=this.imageModal.querySelector("#imageDropzone"),o=this.imageModal.querySelector("#imageFileInput");t.addEventListener("click",()=>o.click()),t.addEventListener("dragover",c=>{c.preventDefault(),t.classList.add("dragover")}),t.addEventListener("dragleave",()=>{t.classList.remove("dragover")}),t.addEventListener("drop",c=>{c.preventDefault(),t.classList.remove("dragover");const p=c.dataTransfer?.files;p&&p[0]&&this.handleImageFile(p[0])}),o.addEventListener("change",c=>{const p=c.target;p.files&&p.files[0]&&this.handleImageFile(p.files[0])}),this.imageModal.querySelector("#loadImageUrl")?.addEventListener("click",()=>this.loadImageFromUrl()),this.imageWidthInput=this.imageModal.querySelector("#imageWidth"),this.imageHeightInput=this.imageModal.querySelector("#imageHeight"),this.maintainAspectCheckbox=this.imageModal.querySelector("#maintainAspect"),this.imageWidthInput?.addEventListener("input",()=>this.handleWidthInputChange()),this.imageHeightInput?.addEventListener("input",()=>this.handleHeightInputChange()),this.maintainAspectCheckbox?.addEventListener("change",()=>{this.maintainAspectCheckbox?.checked&&this.syncResizeInputsFromWidth(!0)});const r=this.imageModal.querySelectorAll(".pb-crop-btn");r.forEach(c=>{c.addEventListener("click",()=>{switch(r.forEach(g=>g.classList.remove("active")),c.classList.add("active"),c.getAttribute("data-aspect")){case"free":this.cropData.aspectRatio=0,this.cropData.useOriginalBounds=!1,this.setResizeAspectRatio(this.cropData.naturalAspectRatio||1);break;case"1:1":this.cropData.aspectRatio=1,this.cropData.useOriginalBounds=!1,this.setResizeAspectRatio(1);break;case"16:9":this.cropData.aspectRatio=16/9,this.cropData.useOriginalBounds=!1,this.setResizeAspectRatio(16/9);break;case"4:3":this.cropData.aspectRatio=4/3,this.cropData.useOriginalBounds=!1,this.setResizeAspectRatio(4/3);break;case"original":this.cropData.aspectRatio=this.cropData.imageWidth/this.cropData.imageHeight||1,this.cropData.useOriginalBounds=!0,this.setResizeAspectRatio(this.cropData.aspectRatio)}this.resetCropArea(),this.syncResizeInputsFromWidth()})});const a=this.imageModal.querySelector(".pb-image-modal-close"),i=this.imageModal.querySelector("#cancelImageBtn"),s=this.imageModal.querySelector("#insertImageBtn");a?.addEventListener("click",()=>this.closeImageModal()),i?.addEventListener("click",()=>this.closeImageModal()),s?.addEventListener("click",()=>this.insertSelectedImage()),this.imageModal.querySelector(".pb-image-modal-overlay")?.addEventListener("click",()=>this.closeImageModal())}openImageLibrary(e){console.log("\u{1f680} openImageLibrary chamado",{imgElement:e,imageModal:this.imageModal,modalExists:!!this.imageModal}),this.currentImageElement=e,this.imageModal?(console.log("\u2705 Abrindo modal..."),this.imageModal.style.display="flex",console.log("\u{1f4ca} Display aplicado:",this.imageModal.style.display),console.log("\u{1f4ca} Modal no DOM:",document.getElementById("imageLibraryModal")),console.log("\u{1f4ca} Modal computedStyle:",window.getComputedStyle(this.imageModal).display),this.renderImageLibrary()):console.error("\u274c Modal n\xe3o existe!")}openImageLibraryForProperty(e){console.log("\u{1f5bc}\ufe0f Abrindo biblioteca para sele\xe7\xe3o de URL"),this.imageSelectionCallback=e,this.imageModal?(this.imageModal.style.display="flex",this.renderImageLibrary()):console.error("\u274c Modal n\xe3o existe!")}setupImageSelectionMode(){const e=this.imageModal?.querySelectorAll(".pb-library-image");e&&(e.forEach(t=>{t.onclick=null}),e.forEach(t=>{const o=t;o.onclick=()=>{const n=o.src;console.log("\u2705 Imagem selecionada:",n),this.imageSelectionCallback&&(this.imageSelectionCallback(n),this.imageSelectionCallback=null),this.closeImageModal()},o.style.cursor="pointer",o.title="Click para selecionar esta imagem"}))}closeImageModal(){this.imageModal&&(this.imageModal.style.display="none",this.currentImageElement=null,this.resetImageForm(),this.imageSelectionCallback=null)}switchImageTab(e){this.imageModal&&(this.imageModal.querySelectorAll(".pb-image-tab").forEach(n=>{n.classList.toggle("active",n.getAttribute("data-tab")===e)}),this.imageModal.querySelectorAll(".pb-image-tab-content").forEach(n=>{n.classList.toggle("active",n.id===`tab-${e}`)}))}handleImageFile(e){if(!e.type.startsWith("image/"))return void this.showNotification("Por favor, selecione um arquivo de imagem v\xe1lido.","error");if(e.size>5242880)return void this.showNotification("A imagem n\xe3o pode ter mais de 5MB.","error");const t=new FileReader;t.onload=o=>{const n=o.target?.result;this.showImagePreview(n,e.name),this.addImageToLibrary(n,e.name,e.size)},t.readAsDataURL(e)}showImagePreview(e,t){if(!this.imageModal)return;const o=this.imageModal.querySelector("#imageDropzone"),n=this.imageModal.querySelector("#imagePreviewContainer");o.style.display="none",n.style.display="block";const r=new Image;r.onload=()=>{const a=this.imageModal.querySelector("#cropCanvas"),i=a.getContext("2d");this.cropCanvas=a,this.cropContext=i,this.cropData.currentImage=e,this.cropData.imageWidth=r.width,this.cropData.imageHeight=r.height,this.cropData.naturalAspectRatio=r.width&&r.height?r.width/r.height:1,this.cropData.useOriginalBounds=!1,this.setResizeAspectRatio(this.cropData.naturalAspectRatio);let c=r.width,p=r.height;c>800&&(p*=800/c,c=800),p>400&&(c*=400/p,p=400),a.width=c,a.height=p,i.drawImage(r,0,0,c,p),this.cropData.aspectRatio=1,this.resetCropArea(),this.setupCropListeners(),this.imageWidthInput&&(this.imageWidthInput.value=r.width.toString()),this.imageHeightInput&&(this.imageHeightInput.value=r.height.toString()),this.syncResizeInputsFromWidth(!0)},r.src=e}resetCropArea(){if(!this.cropCanvas)return;const e=this.cropCanvas;if(this.cropData.useOriginalBounds)return this.cropData.x=0,this.cropData.y=0,this.cropData.width=e.width,this.cropData.height=e.height,void this.drawCropArea();if(0===this.cropData.aspectRatio)this.cropData.width=.8*e.width,this.cropData.height=.8*e.height;else{const o=.8*e.width,n=.8*e.height;o/this.cropData.aspectRatio<=n?(this.cropData.width=o,this.cropData.height=o/this.cropData.aspectRatio):(this.cropData.height=n,this.cropData.width=n*this.cropData.aspectRatio)}this.cropData.x=(e.width-this.cropData.width)/2,this.cropData.y=(e.height-this.cropData.height)/2,this.drawCropArea()}setResizeAspectRatio(e){this.resizeAspectRatio="number"!=typeof e||!Number.isFinite(e)||e<=0?1:e}getResizeAspectRatio(){return this.resizeAspectRatio>0?this.resizeAspectRatio:1}handleWidthInputChange(){this.syncResizeInputsFromWidth()}handleHeightInputChange(){this.syncResizeInputsFromHeight()}syncResizeInputsFromWidth(e=!1){if(!this.imageWidthInput||!this.imageHeightInput||!e&&!this.maintainAspectCheckbox?.checked)return;const t=parseInt(this.imageWidthInput.value,10);if(!Number.isFinite(t)||t<=0)return;const o=this.getResizeAspectRatio(),n=Math.max(1,Math.round(t/o));this.imageHeightInput.value=n.toString()}syncResizeInputsFromHeight(e=!1){if(!this.imageWidthInput||!this.imageHeightInput||!e&&!this.maintainAspectCheckbox?.checked)return;const t=parseInt(this.imageHeightInput.value,10);if(!Number.isFinite(t)||t<=0)return;const o=this.getResizeAspectRatio(),n=Math.max(1,Math.round(t*o));this.imageWidthInput.value=n.toString()}drawCropArea(){if(!this.cropCanvas||!this.cropContext)return;const e=this.cropCanvas,t=this.cropContext,o=new Image;o.onload=()=>{t.clearRect(0,0,e.width,e.height),t.drawImage(o,0,0,e.width,e.height),t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,e.width,e.height),t.clearRect(this.cropData.x,this.cropData.y,this.cropData.width,this.cropData.height),t.drawImage(o,0,0,e.width,e.height),t.fillStyle="rgba(0, 0, 0, 0.5)",t.fillRect(0,0,e.width,this.cropData.y),t.fillRect(0,this.cropData.y,this.cropData.x,this.cropData.height),t.fillRect(this.cropData.x+this.cropData.width,this.cropData.y,e.width-(this.cropData.x+this.cropData.width),this.cropData.height),t.fillRect(0,this.cropData.y+this.cropData.height,e.width,e.height-(this.cropData.y+this.cropData.height)),t.strokeStyle="#667eea",t.lineWidth=3,t.strokeRect(this.cropData.x,this.cropData.y,this.cropData.width,this.cropData.height),t.strokeStyle="rgba(255, 255, 255, 0.3)",t.lineWidth=1,t.setLineDash([5,5]),t.beginPath(),t.moveTo(this.cropData.x+this.cropData.width/3,this.cropData.y),t.lineTo(this.cropData.x+this.cropData.width/3,this.cropData.y+this.cropData.height),t.moveTo(this.cropData.x+2*this.cropData.width/3,this.cropData.y),t.lineTo(this.cropData.x+2*this.cropData.width/3,this.cropData.y+this.cropData.height),t.moveTo(this.cropData.x,this.cropData.y+this.cropData.height/3),t.lineTo(this.cropData.x+this.cropData.width,this.cropData.y+this.cropData.height/3),t.moveTo(this.cropData.x,this.cropData.y+2*this.cropData.height/3),t.lineTo(this.cropData.x+this.cropData.width,this.cropData.y+2*this.cropData.height/3),t.stroke(),t.setLineDash([]);t.fillStyle="#ffffff",t.strokeStyle="#667eea",t.lineWidth=2;const r=(a,i)=>{t.fillRect(a-6,i-6,12,12),t.strokeRect(a-6,i-6,12,12)};r(this.cropData.x,this.cropData.y),r(this.cropData.x+this.cropData.width,this.cropData.y),r(this.cropData.x,this.cropData.y+this.cropData.height),r(this.cropData.x+this.cropData.width,this.cropData.y+this.cropData.height),this.cropData.width>100&&(r(this.cropData.x+this.cropData.width/2,this.cropData.y),r(this.cropData.x+this.cropData.width/2,this.cropData.y+this.cropData.height)),this.cropData.height>100&&(r(this.cropData.x,this.cropData.y+this.cropData.height/2),r(this.cropData.x+this.cropData.width,this.cropData.y+this.cropData.height/2))},o.src=this.cropData.currentImage}setupCropListeners(){if(!this.cropCanvas)return;const e=this.cropCanvas;let t=null;const o=10,n=(a,i)=>{const s=this.cropData.x,d=this.cropData.y,c=this.cropData.width,p=this.cropData.height;return Math.abs(a-(s+c))<o&&Math.abs(i-(d+p))<o?"se":Math.abs(a-(s+c))<o&&Math.abs(i-d)<o?"ne":Math.abs(a-s)<o&&Math.abs(i-(d+p))<o?"sw":Math.abs(a-s)<o&&Math.abs(i-d)<o?"nw":Math.abs(a-(s+c))<o&&i>d&&i<d+p?"e":Math.abs(a-s)<o&&i>d&&i<d+p?"w":Math.abs(i-(d+p))<o&&a>s&&a<s+c?"s":Math.abs(i-d)<o&&a>s&&a<s+c?"n":null};e.addEventListener("mousedown",a=>{const i=e.getBoundingClientRect(),s=a.clientX-i.left,d=a.clientY-i.top;t=n(s,d),t&&(this.cropData.resizeStartX=s,this.cropData.resizeStartY=d,this.cropData.isDragging=!0),s>=this.cropData.x&&s<=this.cropData.x+this.cropData.width&&d>=this.cropData.y&&d<=this.cropData.y+this.cropData.height&&(this.cropData.isDragging=!0,this.cropData.startX=s-this.cropData.x,this.cropData.startY=d-this.cropData.y),this.cropData.isDragging&&(this.cropData.useOriginalBounds=!1)}),e.addEventListener("mousemove",a=>{const i=e.getBoundingClientRect(),s=a.clientX-i.left,d=a.clientY-i.top;if(this.cropData.isDragging){if(t){const c=s-this.cropData.resizeStartX,p=d-this.cropData.resizeStartY,g=this.cropData.x,u=this.cropData.y,b=this.cropData.width,h=this.cropData.height;switch(t){case"se":this.cropData.aspectRatio>0?(this.cropData.width=Math.max(50,b+c),this.cropData.height=this.cropData.width/this.cropData.aspectRatio):(this.cropData.width=Math.max(50,b+c),this.cropData.height=Math.max(50,h+p));break;case"sw":this.cropData.aspectRatio>0?(this.cropData.width=Math.max(50,b-c),this.cropData.height=this.cropData.width/this.cropData.aspectRatio,this.cropData.x=g+(b-this.cropData.width)):(this.cropData.width=Math.max(50,b-c),this.cropData.height=Math.max(50,h+p),this.cropData.x=g+(b-this.cropData.width));break;case"ne":this.cropData.aspectRatio>0?(this.cropData.width=Math.max(50,b+c),this.cropData.height=this.cropData.width/this.cropData.aspectRatio,this.cropData.y=u+(h-this.cropData.height)):(this.cropData.width=Math.max(50,b+c),this.cropData.height=Math.max(50,h-p),this.cropData.y=u+(h-this.cropData.height));break;case"nw":this.cropData.aspectRatio>0?(this.cropData.width=Math.max(50,b-c),this.cropData.height=this.cropData.width/this.cropData.aspectRatio,this.cropData.x=g+(b-this.cropData.width),this.cropData.y=u+(h-this.cropData.height)):(this.cropData.width=Math.max(50,b-c),this.cropData.height=Math.max(50,h-p),this.cropData.x=g+(b-this.cropData.width),this.cropData.y=u+(h-this.cropData.height));break;case"e":this.cropData.width=Math.max(50,b+c),this.cropData.aspectRatio>0&&(this.cropData.height=this.cropData.width/this.cropData.aspectRatio);break;case"w":this.cropData.width=Math.max(50,b-c),this.cropData.x=g+(b-this.cropData.width),this.cropData.aspectRatio>0&&(this.cropData.height=this.cropData.width/this.cropData.aspectRatio);break;case"s":this.cropData.height=Math.max(50,h+p),this.cropData.aspectRatio>0&&(this.cropData.width=this.cropData.height*this.cropData.aspectRatio);break;case"n":this.cropData.height=Math.max(50,h-p),this.cropData.y=u+(h-this.cropData.height),this.cropData.aspectRatio>0&&(this.cropData.width=this.cropData.height*this.cropData.aspectRatio)}this.cropData.x<0&&(this.cropData.x=0),this.cropData.y<0&&(this.cropData.y=0),this.cropData.x+this.cropData.width>e.width&&(this.cropData.width=e.width-this.cropData.x,this.cropData.aspectRatio>0&&(this.cropData.height=this.cropData.width/this.cropData.aspectRatio)),this.cropData.y+this.cropData.height>e.height&&(this.cropData.height=e.height-this.cropData.y,this.cropData.aspectRatio>0&&(this.cropData.width=this.cropData.height*this.cropData.aspectRatio)),this.cropData.resizeStartX=s,this.cropData.resizeStartY=d}else{let c=s-this.cropData.startX,p=d-this.cropData.startY;c=Math.max(0,Math.min(c,e.width-this.cropData.width)),p=Math.max(0,Math.min(p,e.height-this.cropData.height)),this.cropData.x=c,this.cropData.y=p}this.drawCropArea()}else{const c=n(s,d);e.style.cursor=(a=>a&&{nw:"nw-resize",ne:"ne-resize",sw:"sw-resize",se:"se-resize",n:"n-resize",s:"s-resize",e:"e-resize",w:"w-resize"}[a]||"move")(c)}}),e.addEventListener("mouseup",()=>{this.cropData.isDragging=!1,t=null}),e.addEventListener("mouseleave",()=>{this.cropData.isDragging=!1,t=null,e.style.cursor="default"})}applyCrop(){if(!this.cropCanvas)return"";const e=this.cropCanvas,t=new Image;t.src=this.cropData.currentImage;const o=this.cropData.imageWidth/e.width,n=this.cropData.imageHeight/e.height,r=document.createElement("canvas"),a=r.getContext("2d");return r.width=this.cropData.width*o,r.height=this.cropData.height*n,a.drawImage(t,this.cropData.x*o,this.cropData.y*n,this.cropData.width*o,this.cropData.height*n,0,0,r.width,r.height),r.toDataURL("image/png")}loadImageFromUrl(){if(!this.imageModal)return;const t=this.imageModal.querySelector("#imageUrlInput").value.trim();if(!t)return void this.showNotification("Por favor, insira uma URL v\xe1lida.","warning");const o=this.imageModal.querySelector("#urlPreview"),n=this.imageModal.querySelector("#urlPreviewImage");n.src=t,n.onload=()=>{o.style.display="block";const r={id:"img_"+Date.now(),src:t,name:"Imagem externa",width:n.naturalWidth||n.width,height:n.naturalHeight||n.height,size:0,uploadedAt:new Date,isUrl:!0};this.imageLibrary.push(r),this.renderImageLibrary(),console.log("\u2705 URL carregada e adicionada \xe0 biblioteca:",r),this.currentSelectedLibraryImage=r,this.showNotification('Imagem carregada com sucesso! Clique em "Inserir Imagem" para adicionar ao canvas.',"success")},n.onerror=()=>{this.showNotification("N\xe3o foi poss\xedvel carregar a imagem. Verifique a URL.","error")}}addImageToLibraryAsync(e,t,o,n=!1){return new Promise((r,a)=>{const i=new Image;i.crossOrigin="anonymous",i.onload=()=>{const s={id:"img_"+Date.now(),src:e,name:t,width:i.width,height:i.height,size:o,uploadedAt:new Date,isUrl:n};this.imageLibrary.push(s),this.renderImageLibrary(),console.log("\u2705 Imagem adicionada \xe0 biblioteca:",{...s,isUrl:s.isUrl,srcPreview:e.substring(0,50)}),r(s)},i.onerror=s=>{console.error("\u274c Erro ao carregar imagem para biblioteca:",s),a(new Error(`N\xe3o foi poss\xedvel carregar a imagem: ${e}`))},i.src=e})}addImageToLibrary(e,t,o,n=!1){const r=new Image;r.crossOrigin="anonymous",r.onload=()=>{const a={id:"img_"+Date.now(),src:e,name:t,width:r.width,height:r.height,size:o,uploadedAt:new Date,isUrl:n};this.imageLibrary.push(a),this.renderImageLibrary(),console.log("\u2705 Imagem adicionada \xe0 biblioteca:",{...a,isUrl:a.isUrl,srcPreview:e.substring(0,50)})},r.src=e}renderImageLibrary(){var e=this;if(!this.imageModal)return;const t=this.imageModal.querySelector("#imageLibraryGrid");0!==this.imageLibrary.length?(t.innerHTML="",this.imageLibrary.forEach((o,n)=>{const r=document.createElement("div");r.className="pb-library-item",r.innerHTML=`\n        <img src="${o.src}" alt="${o.name}">\n        <div class="pb-library-item-info">\n          <span class="pb-library-item-name">${o.name}</span>\n          <span class="pb-library-item-size">${o.width}x${o.height}</span>\n        </div>\n        <div class="pb-library-item-actions">\n          <button class="pb-library-select-btn" data-index="${n}">Selecionar</button>\n          <button class="pb-library-copy-btn" data-index="${n}" title="Copiar URL">\u{1f4cb}</button>\n          <button class="pb-library-delete-btn" data-index="${n}" title="Remover">\u{1f5d1}\ufe0f</button>\n        </div>\n      `,r.querySelector(".pb-library-select-btn")?.addEventListener("click",()=>{this.selectLibraryImage(o)}),r.querySelector(".pb-library-copy-btn")?.addEventListener("click",function(){var d=(0,H.A)(function*(c){c.stopPropagation(),yield e.copyImageUrlToClipboard(o.src)});return function(c){return d.apply(this,arguments)}}()),r.querySelector(".pb-library-delete-btn")?.addEventListener("click",function(){var d=(0,H.A)(function*(c){c.stopPropagation(),(yield e.showConfirmModal("Deseja remover esta imagem da biblioteca?","Remover Imagem"))&&e.removeImageFromLibrary(n)});return function(c){return d.apply(this,arguments)}}()),t.appendChild(r)})):t.innerHTML='<p class="pb-library-empty">Nenhuma imagem na biblioteca ainda.</p>'}copyImageUrlToClipboard(e){var t=this;return(0,H.A)(function*(){try{if(navigator.clipboard&&navigator.clipboard.writeText)yield navigator.clipboard.writeText(e),t.showNotification("URL copiada com sucesso!","success",2e3);else{const o=document.createElement("textarea");o.value=e,o.style.position="fixed",o.style.left="-999999px",o.style.top="-999999px",document.body.appendChild(o),o.focus(),o.select();try{document.execCommand("copy"),t.showNotification("URL copiada com sucesso!","success",2e3)}catch(n){console.error("Fallback: Erro ao copiar",n),t.showNotification("Erro ao copiar URL","error",3e3)}document.body.removeChild(o)}}catch(o){console.error("Erro ao copiar URL:",o),t.showNotification("Erro ao copiar URL","error",3e3)}})()}convertImageToWebPBase64(e,t,o){return(0,H.A)(function*(){return new Promise((n,r)=>{const a=new Image;a.crossOrigin="anonymous",a.onload=()=>{const i=t||a.width,s=o||a.height,d=document.createElement("canvas");d.width=i,d.height=s;const c=d.getContext("2d");if(c){c.drawImage(a,0,0,i,s);try{const p=d.toDataURL("image/webp",.85);console.log("\u2705 Imagem convertida para WebP base64",{originalUrl:e,width:i,height:s,base64Length:p.length}),n(p)}catch(p){console.error("\u274c Erro ao converter para WebP:",p);const g=d.toDataURL("image/png");n(g)}}else r(new Error("N\xe3o foi poss\xedvel obter contexto 2D do canvas"))},a.onerror=()=>{console.error("\u274c Erro ao carregar imagem:",e),r(new Error(`Erro ao carregar imagem: ${e}`))},a.src=e})})()}selectLibraryImageWithConversion(e){var t=this;return(0,H.A)(function*(){let o,n;if(t.imageModal){const r=t.imageModal.querySelector("#imageWidth"),a=t.imageModal.querySelector("#imageHeight");r?.value&&(o=parseInt(r.value)),a?.value&&(n=parseInt(a.value))}try{let r=e.src;if(e.isUrl?console.log("\u{1f517} URL Direta detectada, usando sem convers\xe3o:",r.substring(0,50)):(console.log("\u{1f4e6} Convertendo imagem para WebP base64..."),r=yield t.convertImageToWebPBase64(e.src,o,n)),t.imageSelectionCallback)return console.log("\u{1f4cb} Modo Propriedade: Retornando imagem"),t.imageSelectionCallback(r),t.imageSelectionCallback=null,t.closeImageModal(),void t.showNotification("Imagem inserida!","success",2e3);if(t.currentImageElement){console.log("\u270f\ufe0f Modo Edi\xe7\xe3o: Atualizando imagem"),t.currentImageElement.src=r,t.currentImageElement.alt=e.name,o&&(t.currentImageElement.style.width=o+"px"),n&&(t.currentImageElement.style.height=n+"px");const s=t.currentImageElement.closest(".imagem-clicavel-wrapper");if(s&&"imagem-clicavel"===s.getAttribute("data-element-type")){console.log("\u{1f504} Atualizando dados de imagem-clicavel");const d=s.getAttribute("data-component-props")||"{}",c=t.safeParseJSON(d);c.imagemUrl=r,c.altText=e.name,s.setAttribute("data-component-props",JSON.stringify(c))}return t.currentImageElement=null,t.closeImageModal(),t.saveState(),void t.showNotification("Imagem atualizada!","success",2e3)}console.log("\u{1f5bc}\ufe0f Modo Canvas: Adicionando nova imagem");let a=o||250;"number"==typeof a&&a>600&&(a=600),t.addElement("image",{src:r,alt:e.name,width:a,height:n||"auto"}),t.closeImageModal(),t.showNotification("Imagem adicionada ao canvas! (m\xe1x 600px - voc\xea pode aumentar)","success",2e3)}catch(r){console.error("\u274c Erro ao processar imagem:",r),t.showNotification("Erro ao processar imagem. Tente novamente.","error",3e3)}})()}selectLibraryImage(e){this.selectLibraryImageWithConversion(e).catch(t=>{console.error("\u274c Erro ao selecionar imagem da biblioteca:",t),this.showNotification("Erro ao processar imagem. Tente novamente.","error",3e3)})}removeImageFromLibrary(e){this.imageLibrary.splice(e,1),this.renderImageLibrary()}insertSelectedImage(){if(!this.imageModal)return;const e=this.imageModal.querySelector("#imageWidth"),t=this.imageModal.querySelector("#imageHeight"),o=this.imageModal.querySelector(".pb-image-tab.active")?.getAttribute("data-tab");if(this.imageSelectionCallback){let r="";return this.currentSelectedLibraryImage?(console.log("\u{1f4da} Modo Propriedade: Usando imagem da biblioteca",this.currentSelectedLibraryImage),r=this.currentSelectedLibraryImage.src,this.currentSelectedLibraryImage=null):"url"===o?r=this.imageModal.querySelector("#imageUrlInput").value.trim():this.cropData.currentImage&&(r=this.applyCrop()),void(r?(console.log("\u{1f4cb} Modo Propriedade: Retornando URL",r),this.imageSelectionCallback(r),this.imageSelectionCallback=null,this.closeImageModal(),this.showNotification("URL da imagem inserida!","success",2e3)):this.showNotification("Por favor, selecione ou carregue uma imagem primeiro.","warning"))}if(this.currentImageElement){let r="";return this.currentSelectedLibraryImage?(console.log("\u{1f4da} Modo Edi\xe7\xe3o: Usando imagem da biblioteca",this.currentSelectedLibraryImage),r=this.currentSelectedLibraryImage.src,this.currentSelectedLibraryImage=null):this.cropData.currentImage&&(r=this.applyCrop()),void(r?(this.currentImageElement.src=r,e.value&&t.value?(this.currentImageElement.style.width=e.value+"px",this.currentImageElement.style.height=t.value+"px"):(this.currentImageElement.style.width="auto",this.currentImageElement.style.height="auto"),r.startsWith("data:")?this.currentImageElement.removeAttribute("data-is-url"):this.currentImageElement.setAttribute("data-is-url","true"),this.closeImageModal(),this.saveState(),this.showNotification("Imagem atualizada com sucesso!","success",2e3)):this.showNotification("Por favor, selecione ou carregue uma imagem primeiro.","warning"))}let n="";if(this.currentSelectedLibraryImage?(console.log("\u{1f4da} Usando imagem da biblioteca:",this.currentSelectedLibraryImage),n=this.currentSelectedLibraryImage.src,this.currentSelectedLibraryImage=null):"url"===o?n=this.imageModal.querySelector("#imageUrlInput").value.trim():this.cropData.currentImage&&(n=this.applyCrop()),n){console.log("\u{1f5bc}\ufe0f Modo Canvas: Adicionando imagem",n);let r=e.value?parseInt(e.value):250;r>600&&(r=600);const a=t.value?parseInt(t.value):null;this.addElement("image",{src:n,alt:"Imagem",width:r,height:a||"auto",isUrl:!n.startsWith("data:")}),this.closeImageModal(),this.showNotification("Imagem adicionada ao canvas! (m\xe1x 600px - voc\xea pode aumentar)","success",2e3)}else this.showNotification("Por favor, selecione ou carregue uma imagem primeiro.","warning")}resetImageForm(){if(!this.imageModal)return;const e=this.imageModal.querySelector("#imageDropzone"),t=this.imageModal.querySelector("#imagePreviewContainer"),o=this.imageModal.querySelector("#imageFileInput"),n=this.imageModal.querySelector("#imageUrlInput"),r=this.imageModal.querySelector("#urlPreview");e.style.display="flex",t.style.display="none",r.style.display="none",o.value="",n.value="",this.switchImageTab("upload")}addAccordionItem(e,t){try{console.log("\u{1f195} addAccordionItem iniciado"),console.log("Container:",e),console.log("Component:",t);const o=e.getAttribute("data-component-id")||t?.id||"accordion";console.log("\u2705 Component ID:",o);let n=t;(!t||!t.id)&&(n=this.advancedComponentsService.getComponentById(o),console.log("\u2705 Component obtido do servi\xe7o:",n));const r=e.getAttribute("data-component-props")||"{}";console.log("\u2705 Props JSON:",r);const a=JSON.parse(r);console.log("\u2705 Props parseado:",a),(!a.items||!Array.isArray(a.items))&&(a.items=[],console.log("\u2705 Items inicializado como array vazio"));const i=`item-${Date.now()}`,d={id:i,titulo:`Item ${a.items.length+1}`,aberto:!1};console.log("\u2705 Novo item:",d),a.items.push(d),console.log("\u2705 Items ap\xf3s push:",a.items);const c=JSON.stringify(a);console.log("\u2705 Props stringify:",c),e.setAttribute("data-component-props",c),console.log("\u2705 Atributo data-component-props atualizado"),this.rerenderAdvancedComponentPreview(e,o,a,n),n&&(console.log("\u2705 Abrindo propriedades..."),this.showAdvancedComponentProperties(e,n)),this.saveState(),console.log("\u2705 Estado salvo"),this.showNotification("\u2705 Item adicionado ao acorde\xe3o!","success",2e3),console.log(`\u2705 Item ${i} adicionado ao acorde\xe3o`)}catch(o){console.error("\u274c Erro ao adicionar item:",o),this.showNotification("\u274c Erro ao adicionar item!","error",2e3)}}removeAccordionItem(e,t,o){try{const n=o.getAttribute("data-item-id");if(!n)return void console.warn("\u26a0\ufe0f Item ID n\xe3o encontrado");console.log("\u{1f5d1}\ufe0f removeAccordionItem iniciado",{itemId:n});const r=e.getAttribute("data-component-id")||t?.id||"accordion";console.log("Component ID:",r);let a=t;(!t||!t.id)&&(a=this.advancedComponentsService.getComponentById(r),console.log("Component obtido do servi\xe7o:",a));const i=e.getAttribute("data-component-props")||"{}",s=JSON.parse(i);if(!s.items||!Array.isArray(s.items))return void console.warn("\u26a0\ufe0f Props items n\xe3o encontrado");if(s.items.length<=1)return void alert("\u274c Acorde\xe3o deve ter pelo menos um item. N\xe3o \xe9 poss\xedvel remover o \xfanico item existente.");if(!confirm(`Tem certeza que deseja remover este item?\n\n(O acorde\xe3o ter\xe1 ${s.items.length-1} item${s.items.length-1!=1?"s":""})`))return;const d=s.items.length;s.items=s.items.filter(c=>c.id!==n),e.setAttribute("data-component-props",JSON.stringify(s)),this.rerenderAdvancedComponentPreview(e,r,s,a),a&&this.showAdvancedComponentProperties(e,a),this.saveState(),this.showNotification("\u2705 Item removido!","success",2e3),console.log(`\u2705 Item ${n} removido. Total: ${d} \u2192 ${s.items.length}`)}catch(n){console.error("\u274c Erro ao remover item:",n),this.showNotification("\u274c Erro ao remover item!","error",2e3)}}addCardToGrid(e,t){try{console.log("\u{1f195} addCardToGrid iniciado");const o=e.getAttribute("data-component-id")||t?.id||"cards-grid";let n=t;(!t||!t.id)&&(n=this.advancedComponentsService.getComponentById(o));const r=e.getAttribute("data-component-props")||"{}",a=JSON.parse(r);(!a.cards||!Array.isArray(a.cards))&&(a.cards=[]);const i=`card-${Date.now()}`;a.cards.push({id:i,titulo:"T\xedtulo",descricao:"Higicast \xe9 o podcast da Abralimp. Bate papos descontra\xeddos e cheios de conte\xfado de primeira. Confira a playlist!",imagem:"/assets/images/noticia-principal.jpg",link:"#",textoBotao:"Confira mais"}),e.setAttribute("data-component-props",JSON.stringify(a)),this.rerenderAdvancedComponentPreview(e,o,a,n),n&&this.showAdvancedComponentProperties(e,n),this.saveState(),this.showNotification("\u2705 Card adicionado!","success",2e3),console.log(`\u2705 Card ${i} adicionado`)}catch(o){console.error("\u274c Erro ao adicionar card:",o),this.showNotification("\u274c Erro ao adicionar card!","error",2e3)}}removeCardFromGrid(e,t,o){try{const n=o.getAttribute("data-card-id");if(!n)return void console.warn("\u26a0\ufe0f Card ID n\xe3o encontrado");console.log("\u{1f5d1}\ufe0f removeCardFromGrid iniciado",{cardId:n});const r=e.getAttribute("data-component-id")||t?.id||"cards-grid";let a=t;(!t||!t.id)&&(a=this.advancedComponentsService.getComponentById(r));const i=e.getAttribute("data-component-props")||"{}",s=JSON.parse(i);if(!s.cards||!Array.isArray(s.cards))return void console.warn("\u26a0\ufe0f Props cards n\xe3o encontrado");if(s.cards.length<=1)return void alert("\u274c Grid deve ter pelo menos um card. N\xe3o \xe9 poss\xedvel remover o \xfanico card existente.");if(!confirm("Tem certeza que deseja remover este card?"))return;const d=s.cards.length;s.cards=s.cards.filter(c=>c.id!==n),e.setAttribute("data-component-props",JSON.stringify(s)),this.rerenderAdvancedComponentPreview(e,r,s,a),a&&this.showAdvancedComponentProperties(e,a),this.saveState(),this.showNotification("\u2705 Card removido!","success",2e3),console.log(`\u2705 Card ${n} removido. Total: ${d} \u2192 ${s.cards.length}`)}catch(n){console.error("\u274c Erro ao remover card:",n),this.showNotification("\u274c Erro ao remover card!","error",2e3)}}static{this.\u0275fac=function(t){return new(t||S)(l.rXU(fe),l.rXU(ce.S),l.rXU(me.Qq),l.rXU(oe.N,8),l.rXU(oe.R,8))}}static{this.\u0275cmp=l.VBU({type:S,selectors:[["app-page-builder"]],decls:409,vars:4,consts:[[1,"page-builder-container"],[1,"pb-sidebar"],[1,"pb-sidebar-header"],["aria-label","Toggle Sidebar","title","Esconder/Mostrar",1,"pb-toggle-sidebar"],[1,"icon"],[1,"pb-search-container"],["type","text","id","widgetSearchInput","placeholder","\u{1f50d} Buscar widgets...","aria-label","Buscar widgets",1,"pb-search-input"],["id","clearSearchBtn","title","Limpar busca",1,"pb-search-clear",2,"display","none"],[1,"pb-sidebar-content"],[1,"pb-category"],[1,"pb-category-title"],["aria-label","Expandir/Recolher",1,"pb-category-toggle"],[1,"toggle-icon"],[1,"pb-widgets-grid"],["draggable","true","data-widget-type","container",1,"pb-widget"],[1,"pb-widget-icon"],[1,"pb-widget-label"],["draggable","true","data-widget-type","columns",1,"pb-widget"],["draggable","true","data-widget-type","heading",1,"pb-widget"],["draggable","true","data-widget-type","text",1,"pb-widget"],["draggable","true","data-widget-type","image",1,"pb-widget"],["draggable","true","data-widget-type","button",1,"pb-widget"],["draggable","true","data-widget-type","divider",1,"pb-widget"],["draggable","true","data-widget-type","spacer",1,"pb-widget"],["draggable","true","data-widget-type","accordion",1,"pb-widget"],["id","abralimpComponentsContainer",1,"pb-widgets-grid"],["id","advancedComponentsContainer",1,"pb-widgets-grid"],["id","pagesPanel",1,"pb-pages-panel"],[1,"pb-pages-panel-header"],[1,"pb-pages-header-content"],[1,"pb-pages-header-icon"],[1,"pb-pages-header-text"],[1,"pb-pages-title"],[1,"pb-pages-subtitle"],["id","closePanelPageBtn","title","Fechar (ESC)",1,"pb-close-panel-btn"],[1,"pb-pages-tabs-nav"],["data-tab","tabCreatePage","title","Criar uma nova p\xe1gina ou editar existente",1,"pb-pages-tab-btn","active"],[1,"tab-icon"],[1,"tab-label"],[1,"tab-indicator"],["class","pb-pages-tab-btn","data-tab","tabCreateModel","title","Criar um template reutiliz\xe1vel",4,"ngIf"],["data-tab","tabListPages","title","Ver todas as suas p\xe1ginas",1,"pb-pages-tab-btn"],[1,"pb-pages-status-bar"],[1,"pb-status-item"],[1,"status-label"],["id","pageStatusText",1,"status-value"],[1,"pb-pages-panel-content"],["id","tabCreatePage",1,"pb-pages-tab","active"],["id","editStatus",1,"pb-edit-status",2,"display","none"],[1,"pb-edit-status-content"],[1,"status-badge","status-editing"],["id","statusInfo",1,"status-info"],[1,"pb-form-card"],[1,"pb-form-card-header"],[1,"pb-form-step-badge"],[1,"pb-form-card-body"],[1,"pb-form-group"],["for","pageModelSelect",1,"pb-form-label"],[1,"label-icon"],["id","pageModelSelect",1,"pb-form-input","pb-form-select"],["value",""],[1,"form-help"],["id","loadModelBtn",1,"pb-btn","pb-btn-primary","pb-btn-block","pb-btn-animated"],[1,"btn-icon"],[1,"btn-text"],["for","newPageTitle",1,"pb-form-label"],["title","Campo obrigat\xf3rio",1,"label-required"],["type","text","id","newPageTitle","placeholder","Ex: Sobre Nossa Empresa","maxlength","100",1,"pb-form-input"],[1,"pb-form-group","mt-3"],["for","newPageLink",1,"pb-form-label"],["type","text","id","newPageLink","placeholder","/sobre","maxlength","50",1,"pb-form-input"],["for","newPageDesc",1,"pb-form-label"],["id","newPageDesc","placeholder","Breve descri\xe7\xe3o desta p\xe1gina...","rows","3","maxlength","300",1,"pb-form-input","pb-form-textarea"],[1,"pb-form-checkbox-enhanced"],["type","checkbox","id","newPageIsMenu"],[1,"checkbox-custom"],[1,"checkbox-label-text"],[1,"checkbox-icon"],[1,"checkbox-main"],[1,"checkbox-sub"],[1,"pb-form-card","pb-form-card-action"],["id","savePagesBtn",1,"pb-btn","pb-btn-success","pb-btn-block","pb-btn-lg","pb-btn-animated"],[1,"btn-subtext"],[1,"pb-form-helper-box"],[1,"helper-icon"],[1,"helper-text"],["id","tabCreateModel",1,"pb-pages-tab"],["id","editStatusModel",1,"pb-edit-status",2,"display","none"],["id","statusInfoModel",1,"status-info"],["for","modelTitle",1,"pb-form-label"],["type","text","id","modelTitle","placeholder","Ex: Landing Page Pro","maxlength","100",1,"pb-form-input"],["for","modelDesc",1,"pb-form-label"],["id","modelDesc","placeholder","Descreva o prop\xf3sito e as caracter\xedsticas deste modelo...","rows","3","maxlength","300",1,"pb-form-input","pb-form-textarea"],["id","saveModelBtn",1,"pb-btn","pb-btn-success","pb-btn-block","pb-btn-lg","pb-btn-animated"],["id","tabListPages",1,"pb-pages-tab"],[1,"pb-pages-search-box"],["type","text","id","pagesSearchInput","placeholder","\u{1f50d} Buscar p\xe1ginas...","aria-label","Buscar p\xe1ginas",1,"pb-pages-search"],[1,"pb-pages-list-container"],["id","pagesList",1,"pb-pages-list"],[1,"pb-pages-loading"],[1,"pb-loading-spinner"],["id","pagesEmpty",1,"pb-pages-empty",2,"display","none"],[1,"pb-empty-state-premium"],[1,"pb-empty-icon"],["onclick","document.querySelector('[data-tab=tabCreatePage]').click()",1,"pb-btn","pb-btn-primary","pb-btn-sm"],[1,"pb-pages-panel-footer"],[1,"pb-footer-info"],[1,"footer-icon"],[1,"footer-text"],["id","togglePagesPanelBtn","title","Gerenciar P\xe1ginas",1,"pb-advanced-config-button"],[1,"pb-config-icon"],[1,"pb-canvas-wrapper"],[1,"pb-canvas-header"],[1,"pb-canvas-actions"],["id","undoBtn","title","Desfazer (Ctrl+Z)",1,"pb-btn","pb-btn-icon"],["id","redoBtn","title","Refazer (Ctrl+Y)",1,"pb-btn","pb-btn-icon"],[1,"pb-divider-vertical"],["id","clearAllBtn","title","Limpar Tudo",1,"pb-btn","pb-btn-icon"],["id","previewBtn","title","Visualizar (Ctrl+P)",1,"pb-btn","pb-btn-icon"],["id","saveBtn","title","Salvar (Ctrl+S)",1,"pb-btn","pb-btn-primary"],["id","newPageBtn","title","Criar Nova P\xe1gina",1,"pb-btn","pb-btn-success",2,"margin-left","8px"],["class","pb-btn","id","viewJsonBtn","title","Ver JSON",4,"ngIf"],["class","pb-btn","id","importBtn","title","Importar JSON",4,"ngIf"],["class","pb-btn","id","exportBtn","title","Exportar HTML",4,"ngIf"],[1,"pb-canvas-controls"],[1,"pb-zoom-controls"],["id","zoomOutBtn","title","Diminuir Zoom",1,"pb-btn","pb-btn-icon"],["id","zoomLevel",1,"pb-zoom-level"],["id","zoomInBtn","title","Aumentar Zoom",1,"pb-btn","pb-btn-icon"],["id","zoomResetBtn","title","Resetar Zoom",1,"pb-btn","pb-btn-icon"],[1,"pb-device-switcher"],["data-device","desktop","title","Desktop (1920px)",1,"pb-device-btn","active"],["data-device","tablet","title","Tablet (768px)",1,"pb-device-btn"],["data-device","mobile","title","Mobile (375px)",1,"pb-device-btn"],["id","canvas",1,"pb-canvas","device-desktop"],[1,"pb-canvas-empty"],[1,"pb-empty-state"],["id","propertiesPanel",1,"pb-properties-panel"],[1,"pb-properties-header"],["id","closePanelBtn",1,"pb-close-btn"],["id","propertiesContent",1,"pb-properties-content"],[1,"pb-no-selection"],["id","viewJsonModal",1,"pb-modal",2,"display","none"],["id","jsonModalOverlay",1,"pb-modal-overlay"],[1,"pb-modal-content",2,"max-width","90%","max-height","90vh","display","flex","flex-direction","column"],[1,"pb-modal-header"],["id","closeJsonModalBtn",1,"pb-modal-close"],[1,"pb-modal-body",2,"flex","1","overflow","auto"],[2,"display","flex","gap","10px","margin-bottom","15px"],["id","copyJsonBtn","title","Copiar para \xe1rea de transfer\xeancia",1,"pb-btn","pb-btn-small"],["id","downloadJsonBtn","title","Baixar arquivo JSON",1,"pb-btn","pb-btn-small"],["id","jsonViewer",2,"background","#1e1e1e","color","#d4d4d4","padding","15px","border-radius","4px","font-family","'Courier New', monospace","font-size","12px","max-height","100%","overflow","auto","white-space","pre-wrap","word-wrap","break-word"],["id","componentsManagerModal",1,"pb-modal",2,"display","none"],["id","modalOverlay",1,"pb-modal-overlay"],[1,"pb-modal-content"],["id","closeModalBtn",1,"pb-modal-close"],[1,"pb-modal-body"],["data-tab","tabCreateModel","title","Criar um template reutiliz\xe1vel",1,"pb-pages-tab-btn"],["id","viewJsonBtn","title","Ver JSON",1,"pb-btn"],["id","importBtn","title","Importar JSON",1,"pb-btn"],["id","exportBtn","title","Exportar HTML",1,"pb-btn"]],template:function(t,o){1&t&&(l.j41(0,"div",0)(1,"aside",1)(2,"div",2)(3,"h2"),l.EFF(4,"\u{1f4e6} Widgets"),l.k0s(),l.j41(5,"button",3)(6,"span",4),l.EFF(7,"\u2630"),l.k0s()()(),l.j41(8,"div",5),l.nrm(9,"input",6),l.j41(10,"button",7),l.EFF(11,"\xd7"),l.k0s()(),l.j41(12,"div",8)(13,"div",9)(14,"h3",10)(15,"span"),l.EFF(16,"LAYOUT"),l.k0s(),l.j41(17,"button",11)(18,"span",12),l.EFF(19,"\u25bc"),l.k0s()()(),l.j41(20,"div",13)(21,"div",14)(22,"span",15),l.EFF(23,"\u22a1"),l.k0s(),l.j41(24,"span",16),l.EFF(25,"Container"),l.k0s()(),l.j41(26,"div",17)(27,"span",15),l.EFF(28,"||"),l.k0s(),l.j41(29,"span",16),l.EFF(30,"Colunas"),l.k0s()()()(),l.j41(31,"div",9)(32,"h3",10)(33,"span"),l.EFF(34,"B\xc1SICO"),l.k0s(),l.j41(35,"button",11)(36,"span",12),l.EFF(37,"\u25bc"),l.k0s()()(),l.j41(38,"div",13)(39,"div",18)(40,"span",15),l.EFF(41,"T"),l.k0s(),l.j41(42,"span",16),l.EFF(43,"T\xedtulo"),l.k0s()(),l.j41(44,"div",19)(45,"span",15),l.EFF(46,"\u2261"),l.k0s(),l.j41(47,"span",16),l.EFF(48,"Texto"),l.k0s()(),l.j41(49,"div",20)(50,"span",15),l.EFF(51,"\u{1f5bc}"),l.k0s(),l.j41(52,"span",16),l.EFF(53,"Imagem"),l.k0s()(),l.j41(54,"div",21)(55,"span",15),l.EFF(56,"\u2b1c"),l.k0s(),l.j41(57,"span",16),l.EFF(58,"Bot\xe3o"),l.k0s()(),l.j41(59,"div",22)(60,"span",15),l.EFF(61,"\u2014"),l.k0s(),l.j41(62,"span",16),l.EFF(63,"Divisor"),l.k0s()(),l.j41(64,"div",23)(65,"span",15),l.EFF(66,"\u2195"),l.k0s(),l.j41(67,"span",16),l.EFF(68,"Espa\xe7ador"),l.k0s()(),l.j41(69,"div",24)(70,"span",15),l.EFF(71,"\u25a4"),l.k0s(),l.j41(72,"span",16),l.EFF(73,"Acorde\xe3o"),l.k0s()()()(),l.j41(74,"div",9)(75,"h3",10)(76,"span"),l.EFF(77,"ABRALIMP"),l.k0s(),l.j41(78,"button",11)(79,"span",12),l.EFF(80,"\u25bc"),l.k0s()()(),l.nrm(81,"div",25),l.k0s(),l.j41(82,"div",9)(83,"h3",10)(84,"span"),l.EFF(85,"AVAN\xc7ADO"),l.k0s(),l.j41(86,"button",11)(87,"span",12),l.EFF(88,"\u25bc"),l.k0s()()(),l.nrm(89,"div",26),l.k0s()()(),l.j41(90,"aside",27)(91,"div",28)(92,"div",29)(93,"div",30),l.EFF(94,"\u{1f4c4}"),l.k0s(),l.j41(95,"div",31)(96,"h2",32),l.EFF(97,"Gerenciador de P\xe1ginas"),l.k0s(),l.j41(98,"p",33),l.EFF(99,"Crie e organize suas p\xe1ginas"),l.k0s()()(),l.j41(100,"button",34)(101,"span"),l.EFF(102,"\u2715"),l.k0s()()(),l.j41(103,"div",35)(104,"button",36)(105,"span",37),l.EFF(106,"\u{1f4c4}"),l.k0s(),l.j41(107,"span",38),l.EFF(108,"Criar P\xe1gina"),l.k0s(),l.nrm(109,"span",39),l.k0s(),l.DNE(110,ke,6,0,"button",40),l.j41(111,"button",41)(112,"span",37),l.EFF(113,"\u{1f4da}"),l.k0s(),l.j41(114,"span",38),l.EFF(115,"Minhas P\xe1ginas"),l.k0s(),l.nrm(116,"span",39),l.k0s()(),l.j41(117,"div",42)(118,"div",43)(119,"span",44),l.EFF(120,"Status:"),l.k0s(),l.j41(121,"span",45),l.EFF(122,"Pronto para criar"),l.k0s()()(),l.j41(123,"div",46)(124,"div",47)(125,"div",48)(126,"div",49)(127,"span",50),l.EFF(128,"\u270f\ufe0f Modo Edi\xe7\xe3o"),l.k0s(),l.nrm(129,"span",51),l.k0s()(),l.j41(130,"div",52)(131,"div",53)(132,"div",54),l.EFF(133,"1"),l.k0s(),l.j41(134,"h4"),l.EFF(135,"Selecione um Template"),l.k0s(),l.j41(136,"p"),l.EFF(137,"Escolha um modelo para come\xe7ar"),l.k0s()(),l.j41(138,"div",55)(139,"div",56)(140,"label",57)(141,"span",58),l.EFF(142,"\u{1f3a8}"),l.k0s(),l.j41(143,"span"),l.EFF(144,"Modelo Base"),l.k0s()(),l.j41(145,"select",59)(146,"option",60),l.EFF(147,"Selecione um modelo..."),l.k0s()(),l.j41(148,"small",61),l.EFF(149,"Escolha um template ou comece do zero"),l.k0s()(),l.j41(150,"button",62)(151,"span",63),l.EFF(152,"\u26a1"),l.k0s(),l.j41(153,"span",64),l.EFF(154,"Carregar Template"),l.k0s()()()(),l.j41(155,"div",52)(156,"div",53)(157,"div",54),l.EFF(158,"2"),l.k0s(),l.j41(159,"h4"),l.EFF(160,"Informa\xe7\xf5es da P\xe1gina"),l.k0s(),l.j41(161,"p"),l.EFF(162,"Preencha os detalhes essenciais"),l.k0s()(),l.j41(163,"div",55)(164,"div",56)(165,"label",65)(166,"span",58),l.EFF(167,"\u{1f4dd}"),l.k0s(),l.j41(168,"span"),l.EFF(169,"T\xedtulo"),l.k0s(),l.j41(170,"span",66),l.EFF(171,"*"),l.k0s()(),l.nrm(172,"input",67),l.j41(173,"small",61),l.EFF(174,"Ser\xe1 exibido como t\xedtulo da p\xe1gina"),l.k0s()(),l.j41(175,"div",68)(176,"label",69)(177,"span",58),l.EFF(178,"\u{1f517}"),l.k0s(),l.j41(179,"span"),l.EFF(180,"Link/Rota"),l.k0s()(),l.nrm(181,"input",70),l.j41(182,"small",61),l.EFF(183,"URL amig\xe1vel (ex: /sobre)"),l.k0s()(),l.j41(184,"div",68)(185,"label",71)(186,"span",58),l.EFF(187,"\u{1f4c4}"),l.k0s(),l.j41(188,"span"),l.EFF(189,"Descri\xe7\xe3o"),l.k0s()(),l.nrm(190,"textarea",72),l.j41(191,"small",61),l.EFF(192,"Usada para SEO e refer\xeancia (m\xe1x. 300 caracteres)"),l.k0s()(),l.j41(193,"label",73),l.nrm(194,"input",74)(195,"span",75),l.j41(196,"span",76)(197,"span",77),l.EFF(198,"\u{1f4cc}"),l.k0s(),l.j41(199,"span",78),l.EFF(200,"Adicionar ao Menu Principal"),l.k0s(),l.j41(201,"span",79),l.EFF(202,"Deixe vis\xedvel no menu de navega\xe7\xe3o"),l.k0s()()()()(),l.j41(203,"div",80)(204,"div",53)(205,"div",54),l.EFF(206,"3"),l.k0s(),l.j41(207,"h4"),l.EFF(208,"Finalizar"),l.k0s(),l.j41(209,"p"),l.EFF(210,"Salve suas altera\xe7\xf5es"),l.k0s()(),l.j41(211,"div",55)(212,"button",81)(213,"span",63),l.EFF(214,"\u{1f4be}"),l.k0s(),l.j41(215,"span",64),l.EFF(216,"Salvar P\xe1gina"),l.k0s(),l.j41(217,"span",82),l.EFF(218,"Seus dados ser\xe3o sincronizados"),l.k0s()(),l.j41(219,"div",83)(220,"span",84),l.EFF(221,"\u2139\ufe0f"),l.k0s(),l.j41(222,"span",85),l.EFF(223,"Dica: Pressione "),l.j41(224,"kbd"),l.EFF(225,"Ctrl+S"),l.k0s(),l.EFF(226," para salvar rapidamente"),l.k0s()()()()(),l.j41(227,"div",86)(228,"div",87)(229,"div",49)(230,"span",50),l.EFF(231,"\u270f\ufe0f Modo Edi\xe7\xe3o"),l.k0s(),l.nrm(232,"span",88),l.k0s()(),l.j41(233,"div",52)(234,"div",53)(235,"div",54),l.EFF(236,"1"),l.k0s(),l.j41(237,"h4"),l.EFF(238,"Informa\xe7\xf5es do Modelo"),l.k0s(),l.j41(239,"p"),l.EFF(240,"Defina os detalhes do seu template"),l.k0s()(),l.j41(241,"div",55)(242,"div",56)(243,"label",89)(244,"span",58),l.EFF(245,"\u2b50"),l.k0s(),l.j41(246,"span"),l.EFF(247,"Nome do Modelo"),l.k0s(),l.j41(248,"span",66),l.EFF(249,"*"),l.k0s()(),l.nrm(250,"input",90),l.j41(251,"small",61),l.EFF(252,"Como voc\xea quer chamar este template"),l.k0s()(),l.j41(253,"div",68)(254,"label",91)(255,"span",58),l.EFF(256,"\u{1f4dd}"),l.k0s(),l.j41(257,"span"),l.EFF(258,"Descri\xe7\xe3o"),l.k0s()(),l.nrm(259,"textarea",92),l.j41(260,"small",61),l.EFF(261,"Descri\xe7\xe3o para refer\xeancia (m\xe1x. 300 caracteres)"),l.k0s()()()(),l.j41(262,"div",80)(263,"div",53)(264,"div",54),l.EFF(265,"2"),l.k0s(),l.j41(266,"h4"),l.EFF(267,"Finalizar"),l.k0s(),l.j41(268,"p"),l.EFF(269,"Salve seu modelo"),l.k0s()(),l.j41(270,"div",55)(271,"button",93)(272,"span",63),l.EFF(273,"\u{1f4be}"),l.k0s(),l.j41(274,"span",64),l.EFF(275,"Salvar Modelo"),l.k0s(),l.j41(276,"span",82),l.EFF(277,"Template ser\xe1 reutiliz\xe1vel"),l.k0s()(),l.j41(278,"div",83)(279,"span",84),l.EFF(280,"\u2139\ufe0f"),l.k0s(),l.j41(281,"span",85),l.EFF(282,"Dica: Pressione "),l.j41(283,"kbd"),l.EFF(284,"Ctrl+M"),l.k0s(),l.EFF(285," para salvar como modelo rapidamente"),l.k0s()()()()(),l.j41(286,"div",94)(287,"div",95),l.nrm(288,"input",96),l.k0s(),l.j41(289,"div",97)(290,"div",98)(291,"div",99),l.nrm(292,"div",100),l.j41(293,"span"),l.EFF(294,"Carregando suas p\xe1ginas..."),l.k0s()()(),l.j41(295,"div",101)(296,"div",102)(297,"span",103),l.EFF(298,"\u{1f4da}"),l.k0s(),l.j41(299,"h5"),l.EFF(300,"Nenhuma p\xe1gina criada"),l.k0s(),l.j41(301,"p"),l.EFF(302,"Voc\xea ainda n\xe3o tem p\xe1ginas. Crie sua primeira p\xe1gina agora!"),l.k0s(),l.j41(303,"button",104)(304,"span",63),l.EFF(305,"\u2728"),l.k0s(),l.j41(306,"span"),l.EFF(307,"Criar Primeira P\xe1gina"),l.k0s()()()()()()(),l.j41(308,"div",105)(309,"div",106)(310,"span",107),l.EFF(311,"\u{1f4a1}"),l.k0s(),l.j41(312,"span",108),l.EFF(313,"D\xfavidas? Use as abas acima para criar, editar ou gerenciar suas p\xe1ginas"),l.k0s()()()(),l.j41(314,"button",109)(315,"span",110),l.EFF(316,"\u2699\ufe0f"),l.k0s()(),l.j41(317,"main",111)(318,"div",112)(319,"div",113)(320,"button",114)(321,"span"),l.EFF(322,"\u21b6"),l.k0s()(),l.j41(323,"button",115)(324,"span"),l.EFF(325,"\u21b7"),l.k0s()(),l.nrm(326,"div",116),l.j41(327,"button",117)(328,"span"),l.EFF(329,"\u{1f5d1}\ufe0f"),l.k0s()(),l.nrm(330,"div",116),l.j41(331,"button",118)(332,"span"),l.EFF(333,"\u{1f441}"),l.k0s()(),l.nrm(334,"div",116),l.j41(335,"button",119),l.EFF(336,"\u{1f4be} Salvar"),l.k0s(),l.j41(337,"button",120),l.EFF(338,"\u2795 Nova P\xe1gina"),l.k0s(),l.DNE(339,Oe,2,0,"button",121),l.DNE(340,Se,2,0,"button",122),l.DNE(341,_e,2,0,"button",123),l.k0s(),l.j41(342,"div",124)(343,"div",125)(344,"button",126)(345,"span"),l.EFF(346,"\u2212"),l.k0s()(),l.j41(347,"span",127),l.EFF(348,"100%"),l.k0s(),l.j41(349,"button",128)(350,"span"),l.EFF(351,"+"),l.k0s()(),l.j41(352,"button",129)(353,"span"),l.EFF(354,"\u27f2"),l.k0s()()(),l.j41(355,"div",130)(356,"button",131)(357,"span"),l.EFF(358,"\u{1f5a5}"),l.k0s()(),l.j41(359,"button",132)(360,"span"),l.EFF(361,"\u{1f4f1}"),l.k0s()(),l.j41(362,"button",133)(363,"span"),l.EFF(364,"\u{1f4f1}"),l.k0s()()()()(),l.j41(365,"div",134)(366,"div",135)(367,"div",136)(368,"span",103),l.EFF(369,"\u{1f3a8}"),l.k0s(),l.j41(370,"h3"),l.EFF(371,"Comece a criar sua p\xe1gina"),l.k0s(),l.j41(372,"p"),l.EFF(373,"Arraste widgets da barra lateral para come\xe7ar"),l.k0s()()()()(),l.j41(374,"aside",137)(375,"div",138)(376,"h3"),l.EFF(377,"Propriedades"),l.k0s(),l.j41(378,"button",139),l.EFF(379,"\xd7"),l.k0s()(),l.j41(380,"div",140)(381,"div",141)(382,"p"),l.EFF(383,"Selecione um elemento para editar"),l.k0s()()()(),l.j41(384,"div",142),l.nrm(385,"div",143),l.j41(386,"div",144)(387,"div",145)(388,"h2"),l.EFF(389,"\u{1f4cb} JSON Exportado"),l.k0s(),l.j41(390,"button",146),l.EFF(391,"\xd7"),l.k0s()(),l.j41(392,"div",147)(393,"div",148)(394,"button",149),l.EFF(395,"\u{1f4cb} Copiar JSON"),l.k0s(),l.j41(396,"button",150),l.EFF(397,"\u{1f4be} Baixar"),l.k0s()(),l.nrm(398,"pre",151),l.k0s()()(),l.j41(399,"div",152),l.nrm(400,"div",153),l.j41(401,"div",154)(402,"div",145)(403,"h2"),l.EFF(404,"\u2699\ufe0f Gerenciar Componentes Avan\xe7ados"),l.k0s(),l.j41(405,"button",155),l.EFF(406,"\xd7"),l.k0s()(),l.j41(407,"div",156),l.nrm(408,"app-advanced-components-manager"),l.k0s()()()()),2&t&&(l.R7$(110),l.Y8G("ngIf",o.showCreateModelTab),l.R7$(229),l.Y8G("ngIf",o.showAdminControls),l.R7$(1),l.Y8G("ngIf",o.showAdminControls),l.R7$(1),l.Y8G("ngIf",o.showAdminControls))},dependencies:[de.bT,X.xH,X.y7,Ee],styles:["@charset \"UTF-8\";*[_ngcontent-%COMP%]{margin:0;padding:0;box-sizing:border-box}body[_ngcontent-%COMP%]{font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,sans-serif;font-size:14px;color:#1f2937;overflow:hidden}.page-builder-container[_ngcontent-%COMP%]{display:flex;height:100vh;background:#fff}.pb-sidebar[_ngcontent-%COMP%]{width:280px;background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);border-right:1px solid rgba(99,102,241,.1);display:flex;flex-direction:column;overflow:hidden;transition:transform .3s ease;box-shadow:2px 0 10px #0000000d}.pb-sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-header[_ngcontent-%COMP%]{padding:24px 20px;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);border-bottom:2px solid rgba(255,255,255,.2);display:flex;justify-content:space-between;align-items:center;box-shadow:0 4px 12px #6366f126}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:18px;font-weight:700;color:#fff;letter-spacing:.3px;text-shadow:0 2px 4px rgba(0,0,0,.1)}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-header[_ngcontent-%COMP%]   .pb-toggle-sidebar[_ngcontent-%COMP%]{background:rgba(255,255,255,.15);border:1px solid rgba(255,255,255,.2);cursor:pointer;padding:8px 10px;font-size:18px;color:#fff;border-radius:6px;transition:all .2s ease;display:none}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-header[_ngcontent-%COMP%]   .pb-toggle-sidebar[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.25);transform:scale(1.05)}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px;background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%)}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:8px}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(99,102,241,.05);border-radius:4px}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);border-radius:4px;border:2px solid transparent;background-clip:padding-box}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#4f46e5 0%,#7c3aed 100%);background-clip:padding-box}.pb-search-container[_ngcontent-%COMP%]{padding:16px 20px;background:linear-gradient(135deg,#f8f9fa 0%,#e9ecef 100%);border-bottom:1px solid rgba(99,102,241,.1);position:relative}.pb-search-container[_ngcontent-%COMP%]   .pb-search-input[_ngcontent-%COMP%]{width:100%;padding:10px 36px 10px 14px;border:2px solid rgba(99,102,241,.2);border-radius:8px;font-size:13px;color:#1f2937;background:#ffffff;transition:all .3s ease;outline:none}.pb-search-container[_ngcontent-%COMP%]   .pb-search-input[_ngcontent-%COMP%]::placeholder{color:#6b7280}.pb-search-container[_ngcontent-%COMP%]   .pb-search-input[_ngcontent-%COMP%]:focus{border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}.pb-search-container[_ngcontent-%COMP%]   .pb-search-clear[_ngcontent-%COMP%]{position:absolute;right:28px;top:50%;transform:translateY(-50%);background:rgba(99,102,241,.1);border:none;border-radius:50%;width:22px;height:22px;font-size:16px;color:#6366f1;cursor:pointer;display:flex;align-items:center;justify-content:center;transition:all .2s ease}.pb-search-container[_ngcontent-%COMP%]   .pb-search-clear[_ngcontent-%COMP%]:hover{background:rgba(99,102,241,.2);transform:translateY(-50%) scale(1.1)}.pb-category[_ngcontent-%COMP%]{margin-bottom:24px}.pb-category[_ngcontent-%COMP%]   .pb-category-title[_ngcontent-%COMP%]{font-size:11px;font-weight:800;letter-spacing:1px;color:#6366f1;margin-bottom:14px;text-transform:uppercase;padding:8px 12px;background:linear-gradient(135deg,rgba(99,102,241,.08) 0%,rgba(139,92,246,.08) 100%);border-radius:6px;border-left:3px solid #6366f1;box-shadow:0 2px 4px #6366f10d;display:flex;justify-content:space-between;align-items:center;cursor:pointer;transition:all .3s ease}.pb-category[_ngcontent-%COMP%]   .pb-category-title[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,rgba(99,102,241,.12) 0%,rgba(139,92,246,.12) 100%);transform:translate(2px)}.pb-category[_ngcontent-%COMP%]   .pb-category-title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{pointer-events:none}.pb-category[_ngcontent-%COMP%]   .pb-category-title[_ngcontent-%COMP%]   .pb-category-toggle[_ngcontent-%COMP%]{background:transparent;border:none;color:#6366f1;font-size:10px;cursor:pointer;padding:0;transition:transform .3s ease;pointer-events:none}.pb-category[_ngcontent-%COMP%]   .pb-category-title[_ngcontent-%COMP%]   .pb-category-toggle[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{display:inline-block;transition:transform .3s ease}.pb-category.collapsed[_ngcontent-%COMP%]   .pb-category-title[_ngcontent-%COMP%]   .toggle-icon[_ngcontent-%COMP%]{transform:rotate(-90deg)}.pb-category.collapsed[_ngcontent-%COMP%]   .pb-widgets-grid[_ngcontent-%COMP%]{display:none}.pb-widgets-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:12px}.pb-widget[_ngcontent-%COMP%]{background:#ffffff;border:2px solid rgba(99,102,241,.15);border-radius:10px;padding:18px 12px;text-align:center;cursor:grab;transition:all .3s ease;-webkit-user-select:none;user-select:none;position:relative;overflow:hidden}.pb-widget[_ngcontent-%COMP%]:before{content:\"\";position:absolute;inset:0;background:linear-gradient(135deg,rgba(99,102,241,.05) 0%,rgba(139,92,246,.05) 100%);opacity:0;transition:opacity .3s ease;z-index:0}.pb-widget[_ngcontent-%COMP%]:hover{border-color:#6366f1;box-shadow:0 8px 20px #6366f133;transform:translateY(-4px) scale(1.02)}.pb-widget[_ngcontent-%COMP%]:hover:before{opacity:1}.pb-widget[_ngcontent-%COMP%]:hover   .pb-widget-icon[_ngcontent-%COMP%]{transform:scale(1.15);color:#6366f1}.pb-widget[_ngcontent-%COMP%]:active{cursor:grabbing;transform:translateY(-2px) scale(.98)}.pb-widget[_ngcontent-%COMP%]   .pb-widget-icon[_ngcontent-%COMP%]{display:block;font-size:28px;margin-bottom:10px;transition:all .3s ease;position:relative;z-index:1;color:#6366f1;text-shadow:0 2px 4px rgba(99,102,241,.1)}.pb-widget[_ngcontent-%COMP%]   .pb-widget-label[_ngcontent-%COMP%]{display:block;font-size:12px;color:#1f2937;font-weight:600;position:relative;z-index:1;letter-spacing:.3px}.pb-canvas-wrapper[_ngcontent-%COMP%]{flex:1;display:flex;flex-direction:column;overflow:hidden;background:#fff}.pb-canvas-header[_ngcontent-%COMP%]{height:60px;background:linear-gradient(135deg,#ffffff 0%,#f8f9fa 100%);border-bottom:2px solid rgba(99,102,241,.1);display:flex;justify-content:space-between;align-items:center;padding:0 24px;gap:20px;box-shadow:0 2px 8px #0000000d}.pb-canvas-header[_ngcontent-%COMP%]   .pb-canvas-actions[_ngcontent-%COMP%]{display:flex;gap:12px;align-items:center}.pb-canvas-header[_ngcontent-%COMP%]   .pb-divider-vertical[_ngcontent-%COMP%]{width:2px;height:28px;background:linear-gradient(180deg,rgba(99,102,241,.2) 0%,rgba(139,92,246,.2) 100%);border-radius:2px}.pb-btn[_ngcontent-%COMP%]{padding:10px 18px;border:2px solid rgba(99,102,241,.2);background:#ffffff;color:#1f2937;border-radius:8px;font-size:13px;font-weight:600;cursor:pointer;transition:all .3s ease;white-space:nowrap;position:relative;overflow:hidden}.pb-btn[_ngcontent-%COMP%]:before{content:\"\";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.3),transparent);transition:left .5s ease}.pb-btn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,rgba(99,102,241,.08) 0%,rgba(139,92,246,.08) 100%);border-color:#6366f1;transform:translateY(-2px);box-shadow:0 4px 12px #6366f126}.pb-btn[_ngcontent-%COMP%]:hover:before{left:100%}.pb-btn[_ngcontent-%COMP%]:active{transform:translateY(0)}.pb-btn[_ngcontent-%COMP%]:disabled{opacity:.4;cursor:not-allowed;transform:none}.pb-btn[_ngcontent-%COMP%]:disabled:hover{background:#ffffff;border-color:#6366f133;box-shadow:none}.pb-btn.pb-btn-primary[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);color:#fff;border-color:transparent;box-shadow:0 4px 12px #6366f14d;font-weight:700}.pb-btn.pb-btn-primary[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#4f46e5 0%,#7c3aed 100%);transform:translateY(-2px);box-shadow:0 6px 16px #6366f166}.pb-btn.pb-btn-icon[_ngcontent-%COMP%]{padding:10px 14px;font-size:18px;display:flex;align-items:center;justify-content:center}.pb-device-switcher[_ngcontent-%COMP%]{display:flex;gap:6px;background:linear-gradient(135deg,rgba(99,102,241,.08) 0%,rgba(139,92,246,.08) 100%);padding:6px;border-radius:10px;border:2px solid rgba(99,102,241,.15);box-shadow:0 2px 8px #6366f11a}.pb-device-switcher[_ngcontent-%COMP%]   .pb-device-btn[_ngcontent-%COMP%]{padding:8px 14px;background:transparent;border:none;border-radius:6px;cursor:pointer;font-size:16px;transition:all .3s ease;color:#6b7280}.pb-device-switcher[_ngcontent-%COMP%]   .pb-device-btn[_ngcontent-%COMP%]:hover{background:rgba(99,102,241,.15);color:#6366f1;transform:scale(1.05)}.pb-device-switcher[_ngcontent-%COMP%]   .pb-device-btn.active[_ngcontent-%COMP%]{background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);color:#fff;box-shadow:0 4px 12px #6366f14d;transform:scale(1.05)}.pb-canvas[_ngcontent-%COMP%]{flex:1;overflow-y:auto;background:linear-gradient(135deg,#f3f4f6 0%,#e5e7eb 100%);padding:40px 20px;position:relative}.pb-canvas.device-desktop[_ngcontent-%COMP%]   .pb-canvas-inner[_ngcontent-%COMP%]{max-width:100%}.pb-canvas.device-tablet[_ngcontent-%COMP%]   .pb-canvas-inner[_ngcontent-%COMP%]{max-width:768px;margin:0 auto}.pb-canvas.device-mobile[_ngcontent-%COMP%]   .pb-canvas-inner[_ngcontent-%COMP%]{max-width:375px;margin:0 auto}.pb-canvas[_ngcontent-%COMP%]::-webkit-scrollbar{width:10px}.pb-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:rgba(99,102,241,.05);border-radius:5px}.pb-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);border-radius:5px;border:2px solid transparent;background-clip:padding-box}.pb-canvas[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:linear-gradient(135deg,#4f46e5 0%,#7c3aed 100%);background-clip:padding-box}.pb-canvas-empty[_ngcontent-%COMP%]{min-height:400px;display:flex;align-items:center;justify-content:center}.pb-empty-state[_ngcontent-%COMP%]{text-align:center;color:#6b7280;padding:40px;background:linear-gradient(135deg,rgba(99,102,241,.05) 0%,rgba(139,92,246,.05) 100%);border-radius:16px;border:2px dashed rgba(99,102,241,.3);max-width:500px;margin:0 auto}.pb-empty-state[_ngcontent-%COMP%]   .pb-empty-icon[_ngcontent-%COMP%]{font-size:72px;display:block;margin-bottom:20px;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);-webkit-text-fill-color:transparent;-webkit-background-clip:text;background-clip:text;opacity:.8;animation:_ngcontent-%COMP%_pulse 2s ease-in-out infinite}.pb-empty-state[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:20px;font-weight:700;color:#1f2937;margin-bottom:12px;letter-spacing:.3px}.pb-empty-state[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:14px;color:#6b7280;line-height:1.6}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:.8;transform:scale(1)}50%{opacity:1;transform:scale(1.05)}}.pb-element[_ngcontent-%COMP%]{position:relative;margin:10px 0;min-height:50px;background:#fff;border:2px dashed transparent;border-radius:4px;transition:all .2s ease}.pb-element[_ngcontent-%COMP%]:hover{outline:2px solid rgba(99,102,241,.3)}.pb-element[_ngcontent-%COMP%]:hover   .pb-element-controls[_ngcontent-%COMP%]{opacity:1;visibility:visible}.pb-element.selected[_ngcontent-%COMP%]{outline:2px solid #6366f1;box-shadow:0 0 0 4px #6366f11a}.pb-element.dragging[_ngcontent-%COMP%]{opacity:.5}.pb-element.drag-over[_ngcontent-%COMP%]{border-color:#6366f1;background:rgba(99,102,241,.05)}.pb-element-controls[_ngcontent-%COMP%]{position:absolute;top:-40px;right:0;background:#6366f1;border-radius:4px;padding:4px;display:flex;gap:4px;opacity:0;visibility:hidden;transition:all .2s ease;z-index:10}.pb-element-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background:transparent;border:none;color:#fff;padding:6px 10px;cursor:pointer;border-radius:3px;font-size:12px;transition:background .2s ease}.pb-element-controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:rgba(255,255,255,.2)}.pb-element-heading[_ngcontent-%COMP%]{padding:20px}.pb-element-heading[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%], .pb-element-heading[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%], .pb-element-heading[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%], .pb-element-heading[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%], .pb-element-heading[_ngcontent-%COMP%]   h5[_ngcontent-%COMP%], .pb-element-heading[_ngcontent-%COMP%]   h6[_ngcontent-%COMP%]{margin:0;line-height:1.2}.pb-element-text[_ngcontent-%COMP%]{padding:20px;line-height:1.6}.pb-element-image[_ngcontent-%COMP%]{padding:20px}.pb-element-image[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:100%;height:auto;display:block}.pb-element-button[_ngcontent-%COMP%]{padding:20px}.pb-element-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{padding:12px 24px;font-size:16px;font-weight:600;border:none;border-radius:6px;cursor:pointer;background:#6366f1;color:#fff;transition:background .2s ease}.pb-element-button[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background:#4f46e5}.pb-element-divider[_ngcontent-%COMP%]{padding:20px}.pb-element-divider[_ngcontent-%COMP%]   hr[_ngcontent-%COMP%]{border:none;border-top:2px solid #e5e7eb;margin:0}.pb-element-spacer[_ngcontent-%COMP%]{min-height:50px;background:repeating-linear-gradient(45deg,transparent,transparent 10px,rgba(0,0,0,.02) 10px,rgba(0,0,0,.02) 20px)}.pb-element-section[_ngcontent-%COMP%]{padding:40px 20px;background:#fff;border:2px dashed #e5e7eb;min-height:150px}.pb-element-container[_ngcontent-%COMP%]{max-width:1200px;margin:0 auto;padding:20px;border:2px dashed #e5e7eb}.pb-element-columns[_ngcontent-%COMP%]{display:flex;gap:20px;padding:20px}.pb-element-columns[_ngcontent-%COMP%]   .pb-column[_ngcontent-%COMP%]{flex:1;border:2px dashed #e5e7eb;min-height:100px;padding:20px}.pb-element-video[_ngcontent-%COMP%]{padding:20px}.pb-element-video[_ngcontent-%COMP%]   video[_ngcontent-%COMP%]{max-width:100%;height:auto}.pb-element-gallery[_ngcontent-%COMP%]{padding:20px}.pb-element-gallery[_ngcontent-%COMP%]   .pb-gallery-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:15px}.pb-element-gallery[_ngcontent-%COMP%]   .pb-gallery-grid[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:100%;height:200px;object-fit:cover;border-radius:4px}.pb-properties-panel[_ngcontent-%COMP%]{width:320px;background:#fff;border-left:1px solid #e5e7eb;display:flex;flex-direction:column;transform:translate(100%);transition:transform .3s ease}.pb-properties-panel.active[_ngcontent-%COMP%]{transform:translate(0)}.pb-properties-panel[_ngcontent-%COMP%]   .pb-properties-header[_ngcontent-%COMP%]{padding:20px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}.pb-properties-panel[_ngcontent-%COMP%]   .pb-properties-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:16px;font-weight:600}.pb-properties-panel[_ngcontent-%COMP%]   .pb-properties-header[_ngcontent-%COMP%]   .pb-close-btn[_ngcontent-%COMP%]{background:none;border:none;font-size:24px;cursor:pointer;color:#6b7280;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease}.pb-properties-panel[_ngcontent-%COMP%]   .pb-properties-header[_ngcontent-%COMP%]   .pb-close-btn[_ngcontent-%COMP%]:hover{background:#f9fafb;color:#1f2937}.pb-properties-panel[_ngcontent-%COMP%]   .pb-properties-content[_ngcontent-%COMP%]{flex:1;overflow-y:auto;padding:20px}.pb-properties-panel[_ngcontent-%COMP%]   .pb-properties-content[_ngcontent-%COMP%]::-webkit-scrollbar{width:6px}.pb-properties-panel[_ngcontent-%COMP%]   .pb-properties-content[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:transparent}.pb-properties-panel[_ngcontent-%COMP%]   .pb-properties-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#cbd5e1;border-radius:3px}.pb-properties-panel[_ngcontent-%COMP%]   .pb-properties-content[_ngcontent-%COMP%]::-webkit-scrollbar-thumb:hover{background:#94a3b8}.pb-properties-panel[_ngcontent-%COMP%]   .pb-no-selection[_ngcontent-%COMP%]{text-align:center;color:#6b7280;padding:40px 20px}.pb-property-group[_ngcontent-%COMP%]{margin-bottom:24px}.pb-property-group[_ngcontent-%COMP%]   .pb-property-label[_ngcontent-%COMP%]{display:block;font-size:13px;font-weight:600;color:#1f2937;margin-bottom:8px}.pb-property-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%], .pb-property-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%], .pb-property-group[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%], .pb-property-group[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%], .pb-property-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%], .pb-property-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%;padding:8px 12px;border:1px solid #e5e7eb;border-radius:6px;font-size:14px;font-family:inherit;transition:all .2s ease}.pb-property-group[_ngcontent-%COMP%]   input[type=text][_ngcontent-%COMP%]:focus, .pb-property-group[_ngcontent-%COMP%]   input[type=number][_ngcontent-%COMP%]:focus, .pb-property-group[_ngcontent-%COMP%]   input[type=url][_ngcontent-%COMP%]:focus, .pb-property-group[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]:focus, .pb-property-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]:focus, .pb-property-group[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}.pb-property-group[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{resize:vertical;min-height:80px}.pb-property-group[_ngcontent-%COMP%]   input[type=color][_ngcontent-%COMP%]{height:40px;cursor:pointer}.pb-property-row[_ngcontent-%COMP%]{display:flex;gap:12px}.pb-property-row[_ngcontent-%COMP%]   .pb-property-group[_ngcontent-%COMP%]{flex:1}.pb-drop-zone[_ngcontent-%COMP%]{min-height:100px;border:2px dashed #e5e7eb;border-radius:8px;display:flex;align-items:center;justify-content:center;color:#6b7280;font-size:14px;transition:all .2s ease}.pb-drop-zone.drag-over[_ngcontent-%COMP%]{border-color:#6366f1;background:rgba(99,102,241,.05);color:#6366f1}.dragging-widget[_ngcontent-%COMP%]{opacity:.5}@media (max-width: 1024px){.pb-sidebar[_ngcontent-%COMP%]{position:absolute;left:0;top:0;bottom:0;z-index:100;box-shadow:0 10px 15px -3px #0000001a}.pb-sidebar.collapsed[_ngcontent-%COMP%]{transform:translate(-100%)}.pb-sidebar[_ngcontent-%COMP%]   .pb-sidebar-header[_ngcontent-%COMP%]   .pb-toggle-sidebar[_ngcontent-%COMP%]{display:block}.pb-properties-panel[_ngcontent-%COMP%]{position:absolute;right:0;top:0;bottom:0;z-index:100;box-shadow:0 10px 15px -3px #0000001a}}.preview-mode[_ngcontent-%COMP%]   .pb-sidebar[_ngcontent-%COMP%], .preview-mode[_ngcontent-%COMP%]   .pb-properties-panel[_ngcontent-%COMP%], .preview-mode[_ngcontent-%COMP%]   .pb-canvas-header[_ngcontent-%COMP%]{display:none}.preview-mode[_ngcontent-%COMP%]   .pb-element-controls[_ngcontent-%COMP%]{display:none!important}.preview-mode[_ngcontent-%COMP%]   .pb-element[_ngcontent-%COMP%]:hover{outline:none}.preview-mode[_ngcontent-%COMP%]   .pb-element.selected[_ngcontent-%COMP%]{outline:none;box-shadow:none}.preview-mode[_ngcontent-%COMP%]   .pb-canvas[_ngcontent-%COMP%]{padding:0}.pb-column[_ngcontent-%COMP%]{position:relative;min-height:80px;border:1px dashed #cbd5e1!important;border-radius:4px;transition:all .2s ease;pointer-events:auto!important;margin:5px!important;background:transparent!important;padding:20px!important}.pb-column[_ngcontent-%COMP%]:hover{border-color:#94a3b8!important;background:rgba(226,232,240,.3)!important}.pb-column.pb-drop-active[_ngcontent-%COMP%]{border-color:#6366f1!important;border-width:2px!important;background:rgba(99,102,241,.08)!important;box-shadow:0 0 0 3px #6366f11a}.pb-column[_ngcontent-%COMP%]   .pb-drop-placeholder[_ngcontent-%COMP%]{color:#9ca3af;text-align:center;padding:20px;pointer-events:none;font-size:13px;font-weight:500}.pb-column[_ngcontent-%COMP%]   .pb-element[_ngcontent-%COMP%]{margin-bottom:10px}.pb-column[_ngcontent-%COMP%]   .pb-element[_ngcontent-%COMP%]:last-child{margin-bottom:0}.pb-column[_ngcontent-%COMP%]   .pb-drop-target[_ngcontent-%COMP%]{height:4px;border-radius:2px;background:linear-gradient(90deg,transparent,#6366f1,transparent);margin:8px 0;transition:all .15s ease;display:none}.pb-column[_ngcontent-%COMP%]   .pb-drop-target.active[_ngcontent-%COMP%]{display:block}.pb-drop-target[_ngcontent-%COMP%]{display:none}.pb-drop-target.active[_ngcontent-%COMP%]{display:block}.pb-droppable-section[_ngcontent-%COMP%], .pb-droppable-container[_ngcontent-%COMP%]{position:relative;pointer-events:auto!important;transition:all .2s ease;border:1px dashed #cbd5e1!important;margin:5px!important}.pb-droppable-section[_ngcontent-%COMP%]:hover, .pb-droppable-container[_ngcontent-%COMP%]:hover{border-color:#94a3b8!important;background:rgba(226,232,240,.1)!important}.pb-droppable-section.pb-drop-active[_ngcontent-%COMP%], .pb-droppable-container.pb-drop-active[_ngcontent-%COMP%]{border-color:#6366f1!important;border-width:2px!important;background:rgba(99,102,241,.08)!important;box-shadow:0 0 0 3px #6366f11a}.pb-droppable-section[_ngcontent-%COMP%]   .pb-drop-placeholder[_ngcontent-%COMP%], .pb-droppable-container[_ngcontent-%COMP%]   .pb-drop-placeholder[_ngcontent-%COMP%]{color:#9ca3af;text-align:center;padding:20px;pointer-events:none;font-size:13px;font-weight:500}.pb-droppable-section[_ngcontent-%COMP%]{border-radius:4px;padding:40px 20px!important;min-height:150px}.pb-droppable-container[_ngcontent-%COMP%]{border-radius:4px;max-width:1200px;margin:0 auto!important;padding:20px!important;min-height:100px}[_nghost-%COMP%]{display:block;height:100vh;overflow:hidden}[_nghost-%COMP%]     *{-webkit-user-drag:auto}[_nghost-%COMP%]     .pb-widget{-webkit-user-select:none;user-select:none;cursor:grab}[_nghost-%COMP%]     .pb-widget:active{cursor:grabbing}[_nghost-%COMP%]     .pb-widget *{pointer-events:none}[_nghost-%COMP%]     .pb-element{-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-spacer-resize-handle, [_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-divider-resize-handle{opacity:0;transition:opacity .2s ease}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element:hover .pb-spacer-resize-handle, [_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element:hover .pb-divider-resize-handle, [_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-spacer-resize-handle.dragging, [_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-divider-resize-handle.dragging{opacity:1}[_nghost-%COMP%]     .pb-droppable-container.pb-droppable-empty, [_nghost-%COMP%]     .pb-droppable-section.pb-droppable-empty{outline:2px dashed rgba(99,102,241,.45);outline-offset:-6px;border-radius:16px;background:rgba(99,102,241,.03);transition:outline .2s ease,background .2s ease;position:relative}[_nghost-%COMP%]     .pb-droppable-container.pb-droppable-empty .pb-drop-placeholder, [_nghost-%COMP%]     .pb-droppable-section.pb-droppable-empty .pb-drop-placeholder{color:#6366f1e6}[_nghost-%COMP%]     .pb-spacer-resize-handle{position:absolute;bottom:6px;left:50%;transform:translate(-50%,50%);width:34px;height:34px;border-radius:50%;background:#ffffff;border:1px solid rgba(99,102,241,.3);box-shadow:0 6px 20px #6366f126;display:flex;align-items:center;justify-content:center;cursor:ns-resize;-webkit-user-select:none;user-select:none;pointer-events:auto;z-index:12}[_nghost-%COMP%]     .pb-spacer-resize-handle span{font-size:16px;color:#6366f1;font-weight:600;pointer-events:none}[_nghost-%COMP%]     .pb-spacer-resize-handle.dragging{border-color:#6366f1;box-shadow:0 8px 24px #6366f14d}[_nghost-%COMP%]     .pb-divider-resize-handle{position:absolute;right:-10px;top:50%;transform:translateY(-50%);width:24px;height:40px;border-radius:12px;background:#ffffff;border:1px solid rgba(236,72,153,.4);box-shadow:0 6px 20px #ec489933;display:flex;align-items:center;justify-content:center;cursor:ew-resize;-webkit-user-select:none;user-select:none;pointer-events:auto;z-index:12}[_nghost-%COMP%]     .pb-divider-resize-handle span{width:6px;height:22px;border-radius:3px;background:linear-gradient(180deg,#ec4899 0%,#8b5cf6 100%);display:block;pointer-events:none}[_nghost-%COMP%]     .pb-divider-resize-handle.dragging{border-color:#ec4899;box-shadow:0 12px 30px #ec489959}[_nghost-%COMP%]     .pb-canvas{-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .pb-canvas.pb-canvas-empty-active{border:2px dashed rgba(99,102,241,.35);border-radius:24px;background:rgba(99,102,241,.02);min-height:500px;transition:border .25s ease,background .25s ease;padding:24px;box-sizing:border-box}[_nghost-%COMP%]     .pb-element h1, [_nghost-%COMP%]     .pb-element h2, [_nghost-%COMP%]     .pb-element h3, [_nghost-%COMP%]     .pb-element h4, [_nghost-%COMP%]     .pb-element h5, [_nghost-%COMP%]     .pb-element h6, [_nghost-%COMP%]     .pb-element p, [_nghost-%COMP%]     .pb-element button{pointer-events:auto!important;cursor:text!important;user-select:text!important;-webkit-user-select:text!important;-moz-user-select:text!important}[_nghost-%COMP%]     .pb-element h1:focus, [_nghost-%COMP%]     .pb-element h2:focus, [_nghost-%COMP%]     .pb-element h3:focus, [_nghost-%COMP%]     .pb-element h4:focus, [_nghost-%COMP%]     .pb-element h5:focus, [_nghost-%COMP%]     .pb-element h6:focus, [_nghost-%COMP%]     .pb-element p:focus, [_nghost-%COMP%]     .pb-element button:focus{outline:2px solid #6366f1;outline-offset:2px;background:rgba(99,102,241,.05)}[_nghost-%COMP%]     .pb-element h1:empty:before, [_nghost-%COMP%]     .pb-element h2:empty:before, [_nghost-%COMP%]     .pb-element h3:empty:before, [_nghost-%COMP%]     .pb-element h4:empty:before, [_nghost-%COMP%]     .pb-element h5:empty:before, [_nghost-%COMP%]     .pb-element h6:empty:before, [_nghost-%COMP%]     .pb-element p:empty:before, [_nghost-%COMP%]     .pb-element button:empty:before{content:attr(data-placeholder);color:#9ca3af;font-style:italic}[_nghost-%COMP%]     .pb-element button:focus{cursor:text!important}[_nghost-%COMP%]     .pb-element button:not(:focus){cursor:pointer!important}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-section{border:2px dashed #cbd5e1!important;position:relative;min-height:100px}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-section:before{content:\"Se\\e7\\e3o\";position:absolute;top:8px;left:8px;font-size:11px;font-weight:600;color:#6b7280;background:#f3f4f6;padding:4px 8px;border-radius:4px;z-index:1;pointer-events:none}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-section:hover{border-color:#6366f1!important;background:rgba(99,102,241,.02)}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-section:hover:before{color:#6366f1;background:rgba(99,102,241,.1)}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-section.selected{border-color:#6366f1!important;border-style:solid!important}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-section.selected:before{color:#fff;background:#6366f1}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-container{border:2px dashed #cbd5e1!important;position:relative;min-height:80px}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-container:before{content:\"Container\";position:absolute;top:8px;left:8px;font-size:11px;font-weight:600;color:#6b7280;background:#f3f4f6;padding:4px 8px;border-radius:4px;z-index:1;pointer-events:none}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-container:hover{border-color:#8b5cf6!important;background:rgba(139,92,246,.02)}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-container:hover:before{color:#8b5cf6;background:rgba(139,92,246,.1)}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-container.selected{border-color:#8b5cf6!important;border-style:solid!important}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-container.selected:before{color:#fff;background:#8b5cf6}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns{border:2px dashed #cbd5e1!important;position:relative;min-height:100px}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns:before{content:\"Colunas\";position:absolute;top:8px;left:8px;font-size:11px;font-weight:600;color:#6b7280;background:#f3f4f6;padding:4px 8px;border-radius:4px;z-index:1;pointer-events:none}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns:hover{border-color:#ec4899!important;background:rgba(236,72,153,.02)}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns:hover:before{color:#ec4899;background:rgba(236,72,153,.1)}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns.selected{border-color:#ec4899!important;border-style:solid!important}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns.selected:before{color:#fff;background:#ec4899}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns .pb-column{border:2px dashed #e5e7eb!important;min-height:80px;position:relative;transition:all .2s ease}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns .pb-column:before{content:\"Coluna\";position:absolute;top:4px;left:4px;font-size:10px;font-weight:600;color:#9ca3af;background:#f9fafb;padding:2px 6px;border-radius:3px;z-index:1;pointer-events:none;opacity:.7}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns .pb-column:hover{border-color:#ec4899!important;background:rgba(236,72,153,.02)}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element-columns .pb-column:hover:before{color:#ec4899;background:rgba(236,72,153,.1);opacity:1}[_nghost-%COMP%]     .page-builder-container:not(.preview-mode) .pb-element.drag-over{border:2px solid #6366f1!important;background:rgba(99,102,241,.1)!important}[_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element-section, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element-container, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element-columns{border:none!important}[_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element-section:before, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element-container:before, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element-columns:before{display:none!important}[_nghost-%COMP%]     .page-builder-container.preview-mode .pb-column{border:none!important}[_nghost-%COMP%]     .page-builder-container.preview-mode .pb-column:before{display:none!important}[_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element-controls, [_nghost-%COMP%]     .page-builder-container.preview-mode .format-toolbar{display:none!important;visibility:hidden!important;opacity:0!important}[_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element *{user-select:none!important;-webkit-user-select:none!important;-moz-user-select:none!important;-ms-user-select:none!important;pointer-events:none!important;cursor:default!important}[_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element.selected{outline:none!important;box-shadow:none!important}[_nghost-%COMP%]     .page-builder-container.preview-mode [contenteditable]:empty:before{display:none!important}[_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element:hover{outline:none!important}[_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element:hover h1:after, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element:hover h2:after, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element:hover h3:after, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element:hover h4:after, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element:hover h5:after, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element:hover h6:after, [_nghost-%COMP%]     .page-builder-container.preview-mode .pb-element:hover p:after{display:none!important}[_nghost-%COMP%]     .pb-element:hover h1:not(:focus), [_nghost-%COMP%]     .pb-element:hover h2:not(:focus), [_nghost-%COMP%]     .pb-element:hover h3:not(:focus), [_nghost-%COMP%]     .pb-element:hover h4:not(:focus), [_nghost-%COMP%]     .pb-element:hover h5:not(:focus), [_nghost-%COMP%]     .pb-element:hover h6:not(:focus), [_nghost-%COMP%]     .pb-element:hover p:not(:focus){position:relative}[_nghost-%COMP%]     .pb-element:hover h1:not(:focus):after, [_nghost-%COMP%]     .pb-element:hover h2:not(:focus):after, [_nghost-%COMP%]     .pb-element:hover h3:not(:focus):after, [_nghost-%COMP%]     .pb-element:hover h4:not(:focus):after, [_nghost-%COMP%]     .pb-element:hover h5:not(:focus):after, [_nghost-%COMP%]     .pb-element:hover h6:not(:focus):after, [_nghost-%COMP%]     .pb-element:hover p:not(:focus):after{content:\"\\270e  Clique para editar\";position:absolute;right:0;top:-20px;font-size:11px;color:#6366f1;background:white;padding:2px 8px;border-radius:3px;box-shadow:0 1px 3px #0000001a;opacity:.7;pointer-events:none}[_nghost-%COMP%]     .advanced-component-container h1:after, [_nghost-%COMP%]     .advanced-component-container h2:after, [_nghost-%COMP%]     .advanced-component-container h3:after, [_nghost-%COMP%]     .advanced-component-container h4:after, [_nghost-%COMP%]     .advanced-component-container h5:after, [_nghost-%COMP%]     .advanced-component-container h6:after, [_nghost-%COMP%]     .advanced-component-container p:after{display:none!important}[_nghost-%COMP%]     .pb-element-controls{display:flex;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f}[_nghost-%COMP%]     .pb-element-controls button{transition:all .2s ease;font-weight:500}[_nghost-%COMP%]     .pb-element-controls button:hover{transform:translateY(-1px);box-shadow:0 2px 4px #00000026}[_nghost-%COMP%]     .pb-element-controls button:active{transform:translateY(0);box-shadow:none}[_nghost-%COMP%]     .pb-element-controls .pb-drag-handle{user-select:none;-webkit-user-select:none}[_nghost-%COMP%]     .pb-element-controls .pb-drag-handle:hover{transform:translateY(-1px) scale(1.05)}[_nghost-%COMP%]     .pb-element-controls .pb-drag-handle:active{cursor:grabbing!important;transform:scale(.95)}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;transform:translateY(-10px)}to{opacity:1;transform:translateY(0)}}[_nghost-%COMP%]     .pb-element:hover .pb-element-controls{animation:_ngcontent-%COMP%_slideDown .2s ease-out}[_nghost-%COMP%]     .pb-element-accordion{border:1px solid #e2e8f0;border-radius:12px;padding:16px;background:#fff;box-shadow:0 4px 12px #0f172a0f}[_nghost-%COMP%]     .pb-basic-accordion{display:flex;flex-direction:column;gap:12px}[_nghost-%COMP%]     .accordion-item{border:1px solid #e2e8f0;border-radius:10px;background:#fff;box-shadow:0 2px 8px #0f172a0a;overflow:hidden;transition:border-color .2s ease,box-shadow .2s ease}[_nghost-%COMP%]     .accordion-item.open{border-color:#805ad5;box-shadow:0 6px 18px #6200ee1a}[_nghost-%COMP%]     .accordion-header{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;cursor:pointer;background:#f8fafc;transition:background .2s ease}[_nghost-%COMP%]     .accordion-header:hover{background:#edf2ff}[_nghost-%COMP%]     .accordion-header-main{display:flex;align-items:center;gap:10px}[_nghost-%COMP%]     .accordion-icon{width:28px;height:28px;border-radius:50%;border:1px solid #d4d4f7;color:#5a67d8;font-weight:600;display:flex;align-items:center;justify-content:center;background:#fff;pointer-events:none}[_nghost-%COMP%]     .accordion-title{font-weight:600;color:#1f2937;font-size:15px;outline:none;min-width:120px;pointer-events:auto}[_nghost-%COMP%]     .accordion-title[contenteditable=true]:empty:before{content:attr(data-placeholder);color:#a0aec0;font-weight:400}[_nghost-%COMP%]     .accordion-header-actions{display:flex;align-items:center;gap:6px}[_nghost-%COMP%]     .accordion-header-actions .accordion-delete-btn{width:28px;height:28px;border-radius:50%;border:1px solid #fee2e2;background:#fff0f0;color:#dc2626;font-size:13px;cursor:pointer;transition:all .2s ease}[_nghost-%COMP%]     .accordion-header-actions .accordion-delete-btn:hover{background:#dc2626;color:#fff}[_nghost-%COMP%]     .accordion-content{border-top:1px solid #edf2f7;background:#f8fafc;padding:0 16px;display:block;max-height:0;overflow:hidden;transition:max-height .25s ease,padding .2s ease}[_nghost-%COMP%]     .accordion-item.open .accordion-content{max-height:1200px;padding:0 16px 16px}[_nghost-%COMP%]     .accordion-content-inner{min-height:50px;padding:16px;border:1px dashed #cbd5f5;border-radius:8px;background:#fff;transition:border-color .2s ease}[_nghost-%COMP%]     .accordion-content-inner.pb-drop-active{border-color:#7c3aed;background:rgba(124,58,237,.05)}[_nghost-%COMP%]     .accordion-add-btn{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;border:1px solid #c4b5fd;background:#f5f3ff;color:#5b21b6;font-weight:600;cursor:pointer;font-size:14px;transition:all .2s ease;align-self:flex-start}[_nghost-%COMP%]     .accordion-add-btn:hover{background:#ede9fe;border-color:#7c3aed;color:#4c1d95}[_nghost-%COMP%]     .accordion-add-btn .add-icon{width:22px;height:22px;display:inline-flex;align-items:center;justify-content:center;border-radius:50%;background:#7c3aed;color:#fff;font-weight:700;font-size:14px}[_nghost-%COMP%]     .accordion-content-inner .pb-drop-placeholder{border:1px dashed #d4d4f7;border-radius:6px;padding:16px;color:#6b7280;background:#f9fafc}[_nghost-%COMP%]     .format-toolbar{animation:_ngcontent-%COMP%_fadeInScale .3s cubic-bezier(.4,0,.2,1);display:flex!important;flex-wrap:nowrap!important;white-space:nowrap!important;overflow-x:auto!important;overflow-y:hidden!important;max-height:60px!important}[_nghost-%COMP%]     .format-toolbar::-webkit-scrollbar{height:4px}[_nghost-%COMP%]     .format-toolbar::-webkit-scrollbar-track{background:transparent}[_nghost-%COMP%]     .format-toolbar::-webkit-scrollbar-thumb{background:rgba(255,255,255,.2);border-radius:2px}[_nghost-%COMP%]     .format-toolbar::-webkit-scrollbar-thumb:hover{background:rgba(255,255,255,.3)}[_nghost-%COMP%]     .format-toolbar .format-btn{flex-shrink:0}[_nghost-%COMP%]     .format-toolbar .format-btn:active{transform:scale(.95)!important}[_nghost-%COMP%]     .format-toolbar .format-btn.active{background:white!important;color:#6366f1!important;border-color:#fff!important;box-shadow:0 0 0 3px #ffffff4d!important}[_nghost-%COMP%]     .format-toolbar .toolbar-group{flex-shrink:0}[_nghost-%COMP%]     .format-toolbar .toolbar-size-group{flex-shrink:0}[_nghost-%COMP%]     .format-toolbar .toolbar-color-group{flex-shrink:0}[_nghost-%COMP%]     .format-toolbar .toolbar-size-select{flex-shrink:0}[_nghost-%COMP%]     .format-toolbar .toolbar-size-select:hover{background:rgba(255,255,255,.3);border-color:#ffffff80}[_nghost-%COMP%]     .format-toolbar .toolbar-size-select option{background:#1f2937;color:#fff}[_nghost-%COMP%]     .format-toolbar .toolbar-color-picker{flex-shrink:0;transition:all .2s}[_nghost-%COMP%]     .format-toolbar .toolbar-color-picker:hover{transform:scale(1.1);border-color:#fff}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(10px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeInScale{0%{opacity:0;transform:translateY(10px) scale(.9)}to{opacity:1;transform:translateY(0) scale(1)}}[_nghost-%COMP%]     .format-btn.align-btn svg{width:16px;height:16px;display:block}[_nghost-%COMP%]     .format-btn.align-btn svg line{stroke:currentColor;stroke-width:1.5;stroke-linecap:round}[_nghost-%COMP%]     .format-btn.align-btn:hover svg{filter:drop-shadow(0 2px 4px rgba(255,255,255,.3))}[_nghost-%COMP%]     [contenteditable=true] a{color:#6366f1;text-decoration:underline;pointer-events:auto!important;cursor:pointer!important}[_nghost-%COMP%]     [contenteditable=true] img{max-width:100%;height:auto;border-radius:4px;margin:10px 0}[_nghost-%COMP%]     [contenteditable=true] ul, [_nghost-%COMP%]     [contenteditable=true] ol{margin:10px 0;padding-left:30px}[_nghost-%COMP%]     [contenteditable=true] li{margin:5px 0}[_nghost-%COMP%]     .pb-droppable-section, [_nghost-%COMP%]     .pb-droppable-container, [_nghost-%COMP%]     .pb-column{transition:all .2s ease;pointer-events:auto!important;border:2px dashed transparent!important}[_nghost-%COMP%]     .pb-droppable-section>*, [_nghost-%COMP%]     .pb-droppable-container>*, [_nghost-%COMP%]     .pb-column>*{pointer-events:auto!important}[_nghost-%COMP%]     .pb-droppable-section:hover:not(:has(.pb-element-wrapper)), [_nghost-%COMP%]     .pb-droppable-container:hover:not(:has(.pb-element-wrapper)), [_nghost-%COMP%]     .pb-column:hover:not(:has(.pb-element-wrapper)){border-color:#6366f14d!important;background:rgba(99,102,241,.02)!important}[_nghost-%COMP%]     .pb-droppable-section.pb-drop-active, [_nghost-%COMP%]     .pb-droppable-container.pb-drop-active, [_nghost-%COMP%]     .pb-column.pb-drop-active{background:rgba(99,102,241,.08)!important;border-color:#6366f1!important;border-style:dashed!important;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-droppable-section .pb-drop-placeholder, [_nghost-%COMP%]     .pb-droppable-container .pb-drop-placeholder, [_nghost-%COMP%]     .pb-column .pb-drop-placeholder{transition:opacity .2s;pointer-events:none!important}[_nghost-%COMP%]     .pb-droppable-section:has(.pb-element-wrapper) .pb-drop-placeholder, [_nghost-%COMP%]     .pb-droppable-container:has(.pb-element-wrapper) .pb-drop-placeholder, [_nghost-%COMP%]     .pb-column:has(.pb-element-wrapper) .pb-drop-placeholder{display:none}[_nghost-%COMP%]     .pb-droppable-section{background:transparent;border-radius:8px;margin-bottom:0;position:relative;z-index:5}[_nghost-%COMP%]     .pb-droppable-section:hover{z-index:15}[_nghost-%COMP%]     .pb-droppable-section:has(.pb-element-wrapper){border-color:transparent!important}[_nghost-%COMP%]     .pb-droppable-container{background:transparent;border-radius:6px;margin-bottom:0;position:relative;z-index:8}[_nghost-%COMP%]     .pb-droppable-container:hover{z-index:18}[_nghost-%COMP%]     .pb-droppable-container:has(.pb-element-wrapper){border-color:transparent!important}[_nghost-%COMP%]     .pb-columns-wrapper{position:relative;margin-bottom:15px;pointer-events:auto!important}[_nghost-%COMP%]     .pb-columns-wrapper:hover .pb-column-controls{opacity:1!important}[_nghost-%COMP%]     .pb-columns-wrapper *{pointer-events:auto!important}[_nghost-%COMP%]     .pb-columns-container{display:flex;gap:20px;pointer-events:auto!important}@media (max-width: 768px){[_nghost-%COMP%]     .pb-columns-container{flex-direction:column}}[_nghost-%COMP%]     .pb-column{flex:1;background:transparent;border-radius:4px;min-height:100px;pointer-events:auto!important;position:relative;z-index:10}[_nghost-%COMP%]     .pb-column, [_nghost-%COMP%]     .pb-column *{pointer-events:auto!important}[_nghost-%COMP%]     .pb-column:has(.pb-element-wrapper){border-color:transparent!important;background:transparent!important}[_nghost-%COMP%]     .pb-column:hover{z-index:20}[_nghost-%COMP%]     .pb-column .pb-element-wrapper{margin-bottom:10px;pointer-events:auto!important}[_nghost-%COMP%]     .pb-column .pb-element-wrapper:last-child{margin-bottom:0}[_nghost-%COMP%]     .pb-column .pb-element-wrapper>*{pointer-events:auto!important}[_nghost-%COMP%]     .pb-column .pb-drop-placeholder{pointer-events:none!important}[_nghost-%COMP%]     .pb-column-controls button{transition:all .2s}[_nghost-%COMP%]     .pb-column-controls button:hover{transform:translateY(-2px);box-shadow:0 4px 6px #0000001a}[_nghost-%COMP%]     .pb-column-controls button:active{transform:translateY(0)}[_nghost-%COMP%]     .pb-droppable-section{box-shadow:0 1px 3px #0000001a}[_nghost-%COMP%]     .pb-droppable-section .pb-droppable-container{box-shadow:inset 0 1px 2px #0000000d}[_nghost-%COMP%]     .pb-droppable-section .pb-droppable-container .pb-columns-wrapper .pb-column{box-shadow:inset 0 1px 1px #00000008}[_nghost-%COMP%]     .pb-droppable-section>*, [_nghost-%COMP%]     .pb-droppable-container>*, [_nghost-%COMP%]     .pb-column>*{pointer-events:auto}[_nghost-%COMP%]     .pb-properties-panel{width:332px;background:#ffffff;border-left:1px solid #e5e7eb;display:flex;flex-direction:column;transform:translate(100%);transition:transform .3s ease;overflow:hidden}[_nghost-%COMP%]     .pb-properties-panel.active{transform:translate(0)}[_nghost-%COMP%]     .pb-properties-panel .pb-properties-header{padding:20px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center;background:#f9fafb}[_nghost-%COMP%]     .pb-properties-panel .pb-properties-header h3{margin:0;font-size:16px;font-weight:600;color:#1f2937}[_nghost-%COMP%]     .pb-properties-panel .pb-properties-header .pb-close-btn{background:none;border:none;font-size:24px;color:#6b7280;cursor:pointer;padding:0;width:30px;height:30px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s}[_nghost-%COMP%]     .pb-properties-panel .pb-properties-header .pb-close-btn:hover{background:#e5e7eb;color:#1f2937}[_nghost-%COMP%]     .pb-properties-panel .pb-properties-content{flex:1;overflow-y:auto;padding:20px}[_nghost-%COMP%]     .pb-properties-panel .pb-properties-content .pb-no-selection{text-align:center;color:#9ca3af;padding:40px 20px}[_nghost-%COMP%]     .pb-properties-panel .pb-properties-content .pb-no-selection p{margin:0}[_nghost-%COMP%]     .pb-property-section{margin-bottom:24px}[_nghost-%COMP%]     .pb-property-section:last-child{margin-bottom:0}[_nghost-%COMP%]     .pb-property-title{font-size:13px;font-weight:600;color:#374151;margin:0 0 12px;text-transform:uppercase;letter-spacing:.5px}[_nghost-%COMP%]     .pb-property-group{margin-bottom:16px}[_nghost-%COMP%]     .pb-property-group:last-child{margin-bottom:0}[_nghost-%COMP%]     .pb-property-group label{display:block;font-size:13px;color:#6b7280;margin-bottom:6px;font-weight:500}[_nghost-%COMP%]     .pb-property-group input[type=text], [_nghost-%COMP%]     .pb-property-group input[type=number], [_nghost-%COMP%]     .pb-property-group select, [_nghost-%COMP%]     .pb-property-group textarea{width:100%;padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;color:#1f2937;transition:all .2s;box-sizing:border-box}[_nghost-%COMP%]     .pb-property-group input[type=text]:focus, [_nghost-%COMP%]     .pb-property-group input[type=number]:focus, [_nghost-%COMP%]     .pb-property-group select:focus, [_nghost-%COMP%]     .pb-property-group textarea:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-property-group input[type=text]:hover, [_nghost-%COMP%]     .pb-property-group input[type=number]:hover, [_nghost-%COMP%]     .pb-property-group select:hover, [_nghost-%COMP%]     .pb-property-group textarea:hover{border-color:#9ca3af}[_nghost-%COMP%]     .pb-property-group textarea{resize:vertical;min-height:80px;font-family:inherit;line-height:1.5}[_nghost-%COMP%]     .pb-property-group input[type=color]{cursor:pointer}[_nghost-%COMP%]     .pb-property-group input[type=color]::-webkit-color-swatch-wrapper{padding:0}[_nghost-%COMP%]     .pb-property-group input[type=color]::-webkit-color-swatch{border:none;border-radius:4px}[_nghost-%COMP%]     .pb-property-group select{cursor:pointer;background-color:#fff;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");background-position:right 8px center;background-repeat:no-repeat;background-size:16px;padding-right:32px;appearance:none}[_nghost-%COMP%]     .pb-property-enhanced{background:#f9fafb;padding:12px;border-radius:8px;border:1px solid #e5e7eb}[_nghost-%COMP%]     .pb-size-controls{display:flex;align-items:center;gap:8px}[_nghost-%COMP%]     .pb-size-controls .pb-size-btn{width:32px;height:32px;border:1px solid #d1d5db;background:white;border-radius:6px;cursor:pointer;font-size:16px;font-weight:600;color:#6366f1;transition:all .2s;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .pb-size-controls .pb-size-btn:hover{background:#6366f1;color:#fff;border-color:#6366f1;transform:scale(1.05)}[_nghost-%COMP%]     .pb-size-controls .pb-size-btn:active{transform:scale(.95)}[_nghost-%COMP%]     .pb-size-controls .pb-slider{flex:1;height:6px;border-radius:3px;background:linear-gradient(to right,#e5e7eb 0%,#6366f1 100%);outline:none;appearance:none;cursor:pointer}[_nghost-%COMP%]     .pb-size-controls .pb-slider::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:#6366f1;cursor:pointer;box-shadow:0 2px 4px #0003;-webkit-transition:all .2s;transition:all .2s}[_nghost-%COMP%]     .pb-size-controls .pb-slider::-webkit-slider-thumb:hover{transform:scale(1.2);box-shadow:0 2px 8px #6366f166}[_nghost-%COMP%]     .pb-size-controls .pb-slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:#6366f1;cursor:pointer;border:none;box-shadow:0 2px 4px #0003}[_nghost-%COMP%]     .pb-size-controls .pb-slider::-moz-range-thumb:hover{transform:scale(1.2)}[_nghost-%COMP%]     .pb-size-controls .pb-size-value{width:60px;padding:6px 8px;border:1px solid #d1d5db;border-radius:6px;text-align:center;font-weight:600;font-size:13px}[_nghost-%COMP%]     .pb-size-controls .pb-size-value:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-size-controls .pb-unit{font-size:12px;color:#6b7280;font-weight:500;min-width:20px}[_nghost-%COMP%]     .pb-color-controls{display:flex;gap:8px;margin-bottom:8px}[_nghost-%COMP%]     .pb-color-controls .pb-color-picker{width:50px;height:40px;border:2px solid #d1d5db;border-radius:8px;cursor:pointer;padding:2px;transition:all .2s}[_nghost-%COMP%]     .pb-color-controls .pb-color-picker:hover{border-color:#6366f1;transform:scale(1.05)}[_nghost-%COMP%]     .pb-color-controls .pb-color-picker::-webkit-color-swatch-wrapper{padding:0}[_nghost-%COMP%]     .pb-color-controls .pb-color-picker::-webkit-color-swatch{border:none;border-radius:6px}[_nghost-%COMP%]     .pb-color-controls .pb-color-hex{flex:1;padding:8px 12px;border:1px solid #d1d5db;border-radius:8px;font-family:Courier New,monospace;font-size:13px;font-weight:600;text-transform:uppercase}[_nghost-%COMP%]     .pb-color-controls .pb-color-hex:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-color-presets{display:grid;grid-template-columns:repeat(8,1fr);gap:6px;margin-top:8px}[_nghost-%COMP%]     .pb-color-presets .pb-preset-color{width:100%;aspect-ratio:1;border:2px solid transparent;border-radius:6px;cursor:pointer;transition:all .2s;box-shadow:0 1px 3px #0000001a}[_nghost-%COMP%]     .pb-color-presets .pb-preset-color:hover{transform:scale(1.15);box-shadow:0 4px 8px #0003;border-color:#1f2937}[_nghost-%COMP%]     .pb-color-presets .pb-preset-color:active{transform:scale(1.05)}[_nghost-%COMP%]     .pb-button-group{display:flex;flex-wrap:wrap;gap:6px;background:white;padding:4px;border-radius:8px;border:1px solid #e5e7eb}[_nghost-%COMP%]     .pb-button-group.pb-icon-group{justify-content:space-between;flex-wrap:nowrap}[_nghost-%COMP%]     .pb-button-group .pb-style-btn, [_nghost-%COMP%]     .pb-button-group .pb-icon-btn{flex:0 1 auto;padding:8px 10px;border:1px solid transparent;background:transparent;border-radius:6px;cursor:pointer;font-size:12px;font-weight:500;color:#6b7280;transition:all .2s;white-space:nowrap}[_nghost-%COMP%]     .pb-button-group .pb-style-btn:hover, [_nghost-%COMP%]     .pb-button-group .pb-icon-btn:hover{background:#f3f4f6;color:#1f2937}[_nghost-%COMP%]     .pb-button-group .pb-style-btn.active, [_nghost-%COMP%]     .pb-button-group .pb-icon-btn.active{background:#6366f1;color:#fff;border-color:#6366f1;box-shadow:0 2px 4px #6366f14d}[_nghost-%COMP%]     .pb-button-group .pb-style-btn:active, [_nghost-%COMP%]     .pb-button-group .pb-icon-btn:active{transform:scale(.95)}[_nghost-%COMP%]     .pb-button-group .pb-icon-btn{font-size:18px;padding:8px;min-width:40px;flex:1;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .pb-button-group .pb-icon-btn i, [_nghost-%COMP%]     .pb-button-group .pb-icon-btn u, [_nghost-%COMP%]     .pb-button-group .pb-icon-btn s{font-style:normal;text-decoration:none;font-weight:600}[_nghost-%COMP%]     .pb-property-section h5{display:flex;align-items:center;gap:8px;margin-bottom:16px;font-size:14px;font-weight:600;color:#1f2937;padding-bottom:8px;border-bottom:2px solid #e5e7eb}[_nghost-%COMP%]     .pb-quick-toolbar{display:flex;align-items:center;justify-content:space-between;gap:8px;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 50%,#ec4899 100%);padding:10px 14px;border-radius:12px;margin-bottom:20px;box-shadow:0 8px 24px #6366f166,0 2px 8px #0000001a;position:relative;overflow:hidden}[_nghost-%COMP%]     .pb-quick-toolbar:before{content:\"\";position:absolute;top:-50%;left:-50%;width:200%;height:200%;background:linear-gradient(45deg,transparent 30%,rgba(255,255,255,.1) 50%,transparent 70%);animation:_ngcontent-%COMP%_shine 3s infinite}@keyframes _ngcontent-%COMP%_shine{0%,to{transform:translate(-100%) translateY(-100%) rotate(45deg)}50%{transform:translate(100%) translateY(100%) rotate(45deg)}}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-group{display:flex;gap:4px;position:relative;z-index:1}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-divider{width:2px;height:32px;background:linear-gradient(to bottom,transparent,rgba(255,255,255,.5),transparent);border-radius:2px;position:relative;z-index:1}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn{width:38px;height:38px;border:2px solid rgba(255,255,255,.3);background:rgba(255,255,255,.15);-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);color:#fff;border-radius:8px;cursor:pointer;font-size:15px;font-weight:700;transition:all .3s cubic-bezier(.4,0,.2,1);display:flex;align-items:center;justify-content:center;position:relative;z-index:1;box-shadow:0 2px 8px #0000001a}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn:before{content:\"\";position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,.2),rgba(255,255,255,0));border-radius:6px;opacity:0;transition:opacity .3s}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn:hover{background:rgba(255,255,255,.25);border-color:#ffffff80;transform:translateY(-3px) scale(1.05);box-shadow:0 6px 16px #0000004d}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn:hover:before{opacity:1}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn.active{background:white;color:#6366f1;border-color:#fff;box-shadow:0 4px 12px #ffffff80,0 0 0 4px #fff3;transform:scale(1.1)}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn.active:after{content:\"\";position:absolute;top:-2px;right:-2px;width:8px;height:8px;background:#10b981;border:2px solid white;border-radius:50%;box-shadow:0 2px 4px #0003}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn:active{transform:translateY(0) scale(.98)}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn.active{animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%,to{box-shadow:0 4px 12px #ffffff80,0 0 0 4px #fff3}50%{box-shadow:0 4px 12px #ffffff80,0 0 0 8px #ffffff1a}}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn[data-action=bold] span{text-shadow:0 2px 4px rgba(0,0,0,.2)}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn[data-action=italic] span{font-style:italic;text-shadow:0 2px 4px rgba(0,0,0,.2)}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn[data-action=underline] span{text-decoration:underline;text-underline-offset:2px;text-shadow:0 2px 4px rgba(0,0,0,.2)}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn[data-align] svg{width:16px;height:16px;display:block;transition:all .3s ease}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn[data-align] svg path{stroke:currentColor;stroke-width:1.5;stroke-linecap:round}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn[data-align]:hover svg{transform:scale(1.1)}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn[data-align].active svg{filter:drop-shadow(0 2px 4px rgba(99,102,241,.3))}[_nghost-%COMP%]     .pb-quick-toolbar .pb-toolbar-btn[data-size]{font-size:13px;font-weight:800}[_nghost-%COMP%]     .pb-size-presets{display:grid;grid-template-columns:repeat(7,1fr);gap:6px;margin-bottom:12px}[_nghost-%COMP%]     .pb-size-presets .pb-preset-size{padding:8px 4px;border:2px solid #e5e7eb;background:white;border-radius:6px;cursor:pointer;font-size:11px;font-weight:600;color:#6b7280;transition:all .2s}[_nghost-%COMP%]     .pb-size-presets .pb-preset-size:hover{border-color:#6366f1;color:#6366f1;transform:scale(1.05)}[_nghost-%COMP%]     .pb-size-presets .pb-preset-size.active{background:#6366f1;border-color:#6366f1;color:#fff;box-shadow:0 2px 6px #6366f166}[_nghost-%COMP%]     .pb-color-advanced{margin-bottom:12px}[_nghost-%COMP%]     .pb-color-advanced .pb-size-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-bottom:12px}[_nghost-%COMP%]     .pb-color-advanced .pb-size-grid .pb-size-item{display:flex;flex-direction:column;gap:6px}[_nghost-%COMP%]     .pb-color-advanced .pb-size-grid .pb-size-item .pb-small-label{font-size:12px;color:#6b7280;font-weight:500;text-transform:uppercase;letter-spacing:.5px}[_nghost-%COMP%]     .pb-color-advanced .pb-size-grid .pb-size-item .pb-input-with-unit{position:relative;display:flex;align-items:center;background:white;border:2px solid #e5e7eb;border-radius:8px;overflow:hidden;transition:all .2s}[_nghost-%COMP%]     .pb-color-advanced .pb-size-grid .pb-size-item .pb-input-with-unit:hover{border-color:#cbd5e1}[_nghost-%COMP%]     .pb-color-advanced .pb-size-grid .pb-size-item .pb-input-with-unit:focus-within{border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}[_nghost-%COMP%]     .pb-color-advanced .pb-size-grid .pb-size-item .pb-input-with-unit .pb-input-number{flex:1;padding:10px 12px;border:none;outline:none;font-size:14px;font-weight:600;color:#1f2937;background:transparent}[_nghost-%COMP%]     .pb-color-advanced .pb-size-grid .pb-size-item .pb-input-with-unit .pb-input-number::-webkit-inner-spin-button, [_nghost-%COMP%]     .pb-color-advanced .pb-size-grid .pb-size-item .pb-input-with-unit .pb-input-number::-webkit-outer-spin-button{opacity:1}[_nghost-%COMP%]     .pb-color-advanced .pb-size-grid .pb-size-item .pb-input-with-unit .pb-unit{padding:0 12px;font-size:12px;font-weight:600;color:#9ca3af;background:#f9fafb;border-left:1px solid #e5e7eb;height:100%;display:flex;align-items:center}[_nghost-%COMP%]     .pb-color-advanced .pb-checkbox-label{display:flex;align-items:center;gap:8px;cursor:pointer;-webkit-user-select:none;user-select:none;padding:8px;border-radius:6px;transition:background .2s}[_nghost-%COMP%]     .pb-color-advanced .pb-checkbox-label:hover{background:#f3f4f6}[_nghost-%COMP%]     .pb-color-advanced .pb-checkbox-label input[type=checkbox]{width:18px;height:18px;cursor:pointer;accent-color:#667eea}[_nghost-%COMP%]     .pb-color-advanced .pb-checkbox-label span{font-size:13px;font-weight:500;color:#4b5563}[_nghost-%COMP%]     .pb-color-advanced .pb-color-main{display:flex;gap:8px;margin-bottom:12px}[_nghost-%COMP%]     .pb-color-advanced .pb-color-main .pb-color-picker{width:60px;height:44px;border:2px solid #e5e7eb;border-radius:8px;cursor:pointer;padding:4px;transition:all .2s}[_nghost-%COMP%]     .pb-color-advanced .pb-color-main .pb-color-picker:hover{border-color:#6366f1;transform:scale(1.05)}[_nghost-%COMP%]     .pb-color-advanced .pb-color-main .pb-color-hex{flex:1;padding:10px 14px;border:2px solid #e5e7eb;border-radius:8px;font-family:Courier New,monospace;font-size:14px;font-weight:600;text-transform:uppercase;transition:all .2s}[_nghost-%COMP%]     .pb-color-advanced .pb-color-main .pb-color-hex:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 4px #6366f11a}[_nghost-%COMP%]     .pb-color-advanced .pb-color-main .pb-color-eye-dropper{width:44px;height:44px;border:2px solid #e5e7eb;background:white;border-radius:8px;cursor:pointer;font-size:18px;transition:all .2s}[_nghost-%COMP%]     .pb-color-advanced .pb-color-main .pb-color-eye-dropper:hover{border-color:#6366f1;background:#f0f0ff;transform:scale(1.05)}[_nghost-%COMP%]     .pb-color-advanced .pb-opacity-control .pb-small-label{display:flex;justify-content:space-between;font-size:11px;color:#6b7280;margin-bottom:6px;font-weight:500}[_nghost-%COMP%]     .pb-color-advanced .pb-opacity-control .pb-small-label .pb-opacity-value{color:#6366f1;font-weight:600}[_nghost-%COMP%]     .pb-color-advanced .pb-opacity-control .pb-opacity-slider{width:100%;height:6px;border-radius:3px;background:linear-gradient(to right,transparent 0%,currentColor 100%);outline:none;appearance:none;cursor:pointer}[_nghost-%COMP%]     .pb-color-advanced .pb-opacity-control .pb-opacity-slider::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:#6366f1;cursor:pointer;box-shadow:0 2px 6px #0000004d}[_nghost-%COMP%]     .pb-color-advanced .pb-opacity-control .pb-opacity-slider::-webkit-slider-thumb:hover{transform:scale(1.2)}[_nghost-%COMP%]     .pb-color-advanced .pb-opacity-control .pb-opacity-slider::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:#6366f1;cursor:pointer;border:none;box-shadow:0 2px 6px #0000004d}[_nghost-%COMP%]     .pb-font-selector{margin-bottom:12px}[_nghost-%COMP%]     .pb-font-selector .pb-font-family{width:100%;padding:10px 14px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s;background:white}[_nghost-%COMP%]     .pb-font-selector .pb-font-family:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 4px #6366f11a}[_nghost-%COMP%]     .pb-font-weights{display:grid;grid-template-columns:repeat(4,1fr);gap:6px}[_nghost-%COMP%]     .pb-font-weights .pb-weight-btn{padding:10px 8px;border:2px solid #e5e7eb;background:white;border-radius:8px;cursor:pointer;font-size:12px;color:#6b7280;transition:all .2s}[_nghost-%COMP%]     .pb-font-weights .pb-weight-btn:hover{border-color:#6366f1;color:#6366f1;transform:translateY(-2px)}[_nghost-%COMP%]     .pb-font-weights .pb-weight-btn.active{background:#6366f1;border-color:#6366f1;color:#fff;box-shadow:0 4px 8px #6366f14d}[_nghost-%COMP%]     .pb-spacing-controls{display:flex;flex-direction:column;gap:12px}[_nghost-%COMP%]     .pb-spacing-controls .pb-spacing-item .pb-small-label{display:block;font-size:11px;color:#6b7280;margin-bottom:6px;font-weight:500}[_nghost-%COMP%]     .pb-spacing-controls .pb-spacing-item .pb-input-with-buttons{display:flex;align-items:center;gap:6px;background:white;border:2px solid #e5e7eb;border-radius:8px;padding:4px}[_nghost-%COMP%]     .pb-spacing-controls .pb-spacing-item .pb-input-with-buttons .pb-adjust-btn{width:32px;height:32px;border:none;background:#f3f4f6;border-radius:6px;cursor:pointer;font-size:16px;font-weight:600;color:#6366f1;transition:all .2s}[_nghost-%COMP%]     .pb-spacing-controls .pb-spacing-item .pb-input-with-buttons .pb-adjust-btn:hover{background:#6366f1;color:#fff;transform:scale(1.05)}[_nghost-%COMP%]     .pb-spacing-controls .pb-spacing-item .pb-input-with-buttons .pb-adjust-btn:active{transform:scale(.95)}[_nghost-%COMP%]     .pb-spacing-controls .pb-spacing-item .pb-input-with-buttons .pb-spacing-input{flex:1;border:none;background:transparent;text-align:center;font-size:14px;font-weight:600;color:#1f2937;padding:4px}[_nghost-%COMP%]     .pb-spacing-controls .pb-spacing-item .pb-input-with-buttons .pb-spacing-input:focus{outline:none}[_nghost-%COMP%]     .pb-spacing-controls .pb-spacing-item .pb-input-with-buttons .pb-unit-small{font-size:11px;color:#6b7280;font-weight:500;min-width:20px}[_nghost-%COMP%]     .pb-effects-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-bottom:12px}[_nghost-%COMP%]     .pb-effects-grid .pb-effect-btn{padding:12px 8px;border:2px solid #e5e7eb;background:white;border-radius:8px;cursor:pointer;font-size:11px;font-weight:600;color:#6b7280;transition:all .2s}[_nghost-%COMP%]     .pb-effects-grid .pb-effect-btn:hover{border-color:#6366f1;color:#6366f1;transform:translateY(-2px);box-shadow:0 4px 8px #0000001a}[_nghost-%COMP%]     .pb-effects-grid .pb-effect-btn.active{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-color:transparent;color:#fff;box-shadow:0 6px 12px #667eea66}[_nghost-%COMP%]     .pb-shadow-controls{background:#f9fafb;padding:12px;border-radius:8px;border:1px solid #e5e7eb;margin-top:12px}[_nghost-%COMP%]     .pb-shadow-controls .pb-small-label{display:block;font-size:11px;color:#6b7280;margin-bottom:8px;font-weight:500}[_nghost-%COMP%]     .pb-shadow-controls .pb-shadow-inputs{display:grid;grid-template-columns:1fr 1fr 1fr 60px;gap:6px}[_nghost-%COMP%]     .pb-shadow-controls .pb-shadow-inputs .pb-shadow-input{padding:8px;border:1px solid #d1d5db;border-radius:6px;text-align:center;font-size:12px;font-weight:600}[_nghost-%COMP%]     .pb-shadow-controls .pb-shadow-inputs .pb-shadow-input:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-shadow-controls .pb-shadow-inputs .pb-shadow-color{height:100%;border:2px solid #d1d5db;border-radius:6px;cursor:pointer;padding:2px}[_nghost-%COMP%]     .pb-shadow-controls .pb-shadow-inputs .pb-shadow-color::-webkit-color-swatch-wrapper{padding:0}[_nghost-%COMP%]     .pb-shadow-controls .pb-shadow-inputs .pb-shadow-color::-webkit-color-swatch{border:none;border-radius:4px}[_nghost-%COMP%]     .pb-properties-content::-webkit-scrollbar{width:8px}[_nghost-%COMP%]     .pb-properties-content::-webkit-scrollbar-track{background:#f3f4f6}[_nghost-%COMP%]     .pb-properties-content::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:4px}[_nghost-%COMP%]     .pb-properties-content::-webkit-scrollbar-thumb:hover{background:#9ca3af}.preview-mode[_ngcontent-%COMP%]     .pb-sidebar{display:none!important}.preview-mode[_ngcontent-%COMP%]     .pb-properties-panel{display:none!important}.preview-mode[_ngcontent-%COMP%]     .pb-canvas-wrapper{margin-left:0!important}.preview-mode[_ngcontent-%COMP%]     .pb-element-controls{display:none!important}.preview-mode[_ngcontent-%COMP%]     .format-toolbar{display:none!important}.preview-mode[_ngcontent-%COMP%]     .pb-drop-placeholder{display:none!important}.preview-mode[_ngcontent-%COMP%]     .pb-empty-state{display:none!important}.preview-mode[_ngcontent-%COMP%]     .pb-section, .preview-mode[_ngcontent-%COMP%]     .pb-container, .preview-mode[_ngcontent-%COMP%]     .pb-column{border:none!important}.preview-mode[_ngcontent-%COMP%]     .pb-section:hover, .preview-mode[_ngcontent-%COMP%]     .pb-container:hover, .preview-mode[_ngcontent-%COMP%]     .pb-column:hover{border:none!important;background:none!important}.preview-mode[_ngcontent-%COMP%]     .pb-section, .preview-mode[_ngcontent-%COMP%]     .pb-container, .preview-mode[_ngcontent-%COMP%]     .pb-column{cursor:default!important}.preview-mode[_ngcontent-%COMP%]     .pb-element-wrapper.selected{outline:none!important}.preview-mode[_ngcontent-%COMP%]     .pb-widget{cursor:default!important}.preview-mode[_ngcontent-%COMP%]     .pb-canvas-header{display:flex!important;pointer-events:auto!important;z-index:1000!important}.preview-mode[_ngcontent-%COMP%]     .pb-canvas-header button, .preview-mode[_ngcontent-%COMP%]     .pb-canvas-header .pb-btn{pointer-events:auto!important;cursor:pointer!important}.preview-mode[_ngcontent-%COMP%]     .pb-canvas{pointer-events:none!important;-webkit-user-select:none!important;user-select:none!important}.preview-mode[_ngcontent-%COMP%]     [contenteditable]{cursor:default!important;-webkit-user-select:none!important;user-select:none!important}.preview-mode[_ngcontent-%COMP%]     .pb-element-wrapper, .preview-mode[_ngcontent-%COMP%]     .pb-section, .preview-mode[_ngcontent-%COMP%]     .pb-container, .preview-mode[_ngcontent-%COMP%]     .pb-column, .preview-mode[_ngcontent-%COMP%]     h1, .preview-mode[_ngcontent-%COMP%]     h2, .preview-mode[_ngcontent-%COMP%]     h3, .preview-mode[_ngcontent-%COMP%]     h4, .preview-mode[_ngcontent-%COMP%]     h5, .preview-mode[_ngcontent-%COMP%]     h6, .preview-mode[_ngcontent-%COMP%]     p, .preview-mode[_ngcontent-%COMP%]     span, .preview-mode[_ngcontent-%COMP%]     a, .preview-mode[_ngcontent-%COMP%]     button, .preview-mode[_ngcontent-%COMP%]     img, .preview-mode[_ngcontent-%COMP%]     video{pointer-events:none!important;-webkit-user-select:none!important;user-select:none!important}  .pb-sidebar{transition:all .3s ease;position:relative;z-index:100}  .pb-sidebar.collapsed{width:0!important;overflow:visible!important;padding:0!important;border-right:none!important;min-width:0!important}  .pb-sidebar.collapsed .pb-sidebar-content{display:none}  .pb-sidebar.collapsed .pb-search-container{display:none}  .pb-sidebar.collapsed .pb-sidebar-header{width:auto;padding:8px;position:fixed;left:0;top:50%;transform:translateY(-50%);z-index:999;background:#6366f1;border-radius:0 8px 8px 0;box-shadow:2px 2px 8px #00000026}  .pb-sidebar.collapsed .pb-sidebar-header h2{display:none}  .pb-sidebar.collapsed .pb-sidebar-header .pb-toggle-sidebar{background:#6366f1!important;color:#fff!important;padding:10px!important}  .pb-sidebar.collapsed .pb-sidebar-header .pb-toggle-sidebar:hover{background:#4f46e5!important}  .pb-sidebar-header{display:flex;align-items:center;justify-content:space-between;padding:12px 16px;border-bottom:1px solid #e5e7eb;flex-wrap:nowrap;gap:8px}  .pb-sidebar-header h2{margin:0;flex:1;font-size:16px;font-weight:600;color:#1f2937;min-width:0}  .pb-toggle-sidebar{background:transparent;border:none;cursor:pointer;padding:6px 8px;color:#6b7280;font-size:20px;display:flex!important;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease;flex-shrink:0;width:auto!important;height:auto!important;min-width:36px;min-height:36px;z-index:101!important}  .pb-toggle-sidebar:hover{background:#f3f4f6;color:#1f2937}  .pb-toggle-sidebar:active{transform:scale(.95)}  .pb-toggle-sidebar .icon{pointer-events:none;display:flex;align-items:center;justify-content:center}@media (max-width: 768px){  .pb-toggle-sidebar{padding:8px 10px!important;font-size:22px!important;min-width:40px!important;min-height:40px!important}  .pb-sidebar-header{padding:10px 12px}  .pb-sidebar-header h2{font-size:14px}  .pb-sidebar.collapsed .pb-sidebar-header{width:44px!important;padding:8px!important;left:0!important;top:50%!important;transform:translateY(-50%)!important}  .pb-sidebar.collapsed .pb-sidebar-header h2{display:none!important}  .pb-sidebar.collapsed .pb-sidebar-header .pb-toggle-sidebar{padding:8px!important;margin:0!important}}  .pb-sidebar.collapsed~.pb-canvas-wrapper{margin-left:0!important}  .pb-properties-panel{position:fixed;right:0;top:0;bottom:0;z-index:100;transition:transform .3s ease}  .pb-canvas-wrapper{transition:margin-right .3s ease;margin-right:0}  .page-builder-container:has(.pb-properties-panel.active) .pb-canvas-wrapper{margin-right:320px!important}  .pb-canvas{transition:all .3s ease;margin:0 auto;background:#ffffff;min-height:500px}  .pb-canvas.device-desktop{width:100%;max-width:100%}  .pb-canvas.device-tablet{width:768px;max-width:100%;border-left:1px solid #e5e7eb;border-right:1px solid #e5e7eb;box-shadow:0 0 20px #0000001a}  .pb-canvas.device-mobile{width:375px;max-width:100%;border-left:1px solid #e5e7eb;border-right:1px solid #e5e7eb;box-shadow:0 0 20px #0000001a}  .pb-prop-group label{font-weight:600;color:#1f2937;margin-bottom:8px;display:block}  .pb-prop-group label:has(+input),   .pb-prop-group label:has(+textarea){position:relative}  .pb-prop-group label:has(+input):before,   .pb-prop-group label:has(+textarea):before{content:\"\";display:block;width:100%;height:1px;background:linear-gradient(90deg,#6366f1 0%,transparent 100%);margin-bottom:12px;margin-top:20px}  .pb-prop-group label:contains(\"\\1f4cc\"),   .pb-prop-group label:contains(\"\\1f522\"),   .pb-prop-group label:contains(\"\\1f5bc\\fe0f\"),   .pb-prop-group label:contains(\"\\1f3a8\"){color:#6366f1;font-size:13px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;margin-top:24px;padding-top:16px;border-top:2px solid rgba(99,102,241,.2)}  .pb-device-btn{background:transparent;border:1px solid #d1d5db;padding:6px 12px;cursor:pointer;border-radius:4px;font-size:16px;transition:all .2s ease}  .pb-device-btn:hover{background:#f3f4f6;border-color:#9ca3af}  .pb-device-btn.active{background:#6366f1;border-color:#6366f1;color:#fff}  .pb-device-btn span{pointer-events:none}  .pb-canvas.device-tablet .pb-columns-container{flex-wrap:wrap}  .pb-canvas.device-tablet .pb-columns-container .pb-column{min-width:45%;flex:1 1 45%}  .pb-canvas.device-tablet .pb-droppable-container{max-width:100%!important;padding:15px!important}  .pb-canvas.device-tablet .pb-droppable-section{padding:30px 15px!important}  .pb-canvas.device-tablet h1{font-size:32px!important}  .pb-canvas.device-tablet h2{font-size:28px!important}  .pb-canvas.device-tablet h3{font-size:24px!important}  .pb-canvas.device-tablet h4{font-size:20px!important}  .pb-canvas.device-tablet h5{font-size:18px!important}  .pb-canvas.device-tablet h6{font-size:16px!important}  .pb-canvas.device-tablet p{font-size:15px!important}  .pb-canvas.device-tablet button{padding:10px 20px!important;font-size:15px!important}  .pb-canvas.device-tablet img{max-width:100%;height:auto}  .pb-canvas.device-mobile .pb-columns-container{flex-direction:column!important}  .pb-canvas.device-mobile .pb-columns-container .pb-column{width:100%!important;flex:1 1 100%!important;min-width:100%!important}  .pb-canvas.device-mobile .pb-droppable-container{max-width:100%!important;padding:10px!important}  .pb-canvas.device-mobile .pb-droppable-section{padding:20px 10px!important}  .pb-canvas.device-mobile h1{font-size:28px!important}  .pb-canvas.device-mobile h2{font-size:24px!important}  .pb-canvas.device-mobile h3{font-size:20px!important}  .pb-canvas.device-mobile h4{font-size:18px!important}  .pb-canvas.device-mobile h5{font-size:16px!important}  .pb-canvas.device-mobile h6{font-size:14px!important}  .pb-canvas.device-mobile p{font-size:14px!important;line-height:1.5!important}  .pb-canvas.device-mobile button{width:100%!important;padding:12px 16px!important;font-size:14px!important}  .pb-canvas.device-mobile .pb-element-wrapper{margin-bottom:15px!important}  .pb-canvas.device-mobile .pb-gallery,   .pb-canvas.device-mobile div[style*=grid-template-columns]{grid-template-columns:1fr!important;gap:10px!important}  .pb-canvas.device-mobile img{max-width:100%;height:auto}  .pb-canvas.device-mobile hr{margin:15px 0!important}  .pb-canvas.device-desktop .pb-columns-container{flex-direction:row}.pb-modal[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.pb-modal.hidden[_ngcontent-%COMP%]{display:none}.pb-modal-overlay[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;background-color:#00000080;cursor:pointer}.pb-modal-content[_ngcontent-%COMP%]{position:relative;background:white;border-radius:8px;box-shadow:0 4px 24px #00000026;max-width:800px;width:90%;max-height:80vh;overflow:hidden;z-index:10001;animation:_ngcontent-%COMP%_slideIn .3s ease-out}@keyframes _ngcontent-%COMP%_slideIn{0%{transform:translateY(-50px);opacity:0}to{transform:translateY(0);opacity:1}}[_nghost-%COMP%]     .pb-category-title{display:flex;align-items:center;justify-content:space-between;cursor:pointer;-webkit-user-select:none;user-select:none;padding:8px 12px;margin:0;background:rgba(99,102,241,.05);border-radius:6px;transition:background .2s ease}[_nghost-%COMP%]     .pb-category-title:hover{background:rgba(99,102,241,.1)}[_nghost-%COMP%]     .pb-category-title span{pointer-events:none}[_nghost-%COMP%]     .pb-category-toggle{background:none;border:none;color:#6366f1;cursor:pointer;padding:4px 8px;font-size:12px;transition:transform .3s ease;pointer-events:auto!important}[_nghost-%COMP%]     .pb-category-toggle:hover{background:rgba(99,102,241,.1);border-radius:4px}[_nghost-%COMP%]     .pb-category-toggle .toggle-icon{display:inline-block;transition:transform .3s ease}[_nghost-%COMP%]     .pb-category{margin-bottom:16px;transition:margin-bottom .3s ease}[_nghost-%COMP%]     .pb-category.collapsed{margin-bottom:0}[_nghost-%COMP%]     .pb-category.collapsed .pb-category-toggle .toggle-icon{transform:rotate(-90deg)}[_nghost-%COMP%]     .pb-category.collapsed .pb-widgets-grid{max-height:0;overflow:hidden;opacity:0;margin-top:0;padding:0;transition:all .3s ease}[_nghost-%COMP%]     .pb-category:not(.collapsed) .pb-widgets-grid{max-height:1000px;opacity:1;transition:all .3s ease}[_nghost-%COMP%]     .pb-widget[data-advanced-component=true]{background:#fff;border:1px solid #e5e7eb;border-radius:8px;padding:16px 12px;text-align:center;cursor:grab;transition:all .2s ease;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .pb-widget[data-advanced-component=true]:hover{border-color:#6366f1;box-shadow:0 4px 6px -1px #0000001a,0 2px 4px -1px #0000000f;transform:translateY(-2px)}[_nghost-%COMP%]     .pb-widget[data-advanced-component=true]:active{cursor:grabbing}[_nghost-%COMP%]     .pb-widget[data-advanced-component=true] .pb-widget-icon{display:block;font-size:24px;margin-bottom:8px}[_nghost-%COMP%]     .pb-widget[data-advanced-component=true] .pb-widget-label{display:block;font-size:12px;color:#1f2937;font-weight:500}[_nghost-%COMP%]     .divisor-padrao{width:158px;height:25px;margin:0 auto;background:url('data:image/svg+xml,<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 158 25\"><path fill=\"%233b89b5\" d=\"M0 12.5 L158 12.5\"/></svg>');background-repeat:no-repeat;background-position:center;background-size:contain}[_nghost-%COMP%]     .divisor-noticias{width:158px;height:25px;margin:9px auto 0;background-image:url(/assets/images/corpo-diretivo-divider.svg);background-repeat:no-repeat;background-position:center;background-size:contain}[_nghost-%COMP%]     .divisor-diretoria{width:158px;height:25px;margin:9px auto 0;background-image:url(/assets/images/corpo-diretivo-divider.svg);background-repeat:no-repeat;background-position:center;background-size:contain;transform:rotate(180deg)}[_nghost-%COMP%]     .pb-search-container{padding:12px 20px;background:#fff;border-bottom:1px solid #e5e7eb;position:relative}[_nghost-%COMP%]     .pb-search-container .pb-search-input{width:100%;padding:10px 36px 10px 12px;border:1px solid #e5e7eb;border-radius:8px;font-size:14px;transition:all .2s ease;background:#f9fafb}[_nghost-%COMP%]     .pb-search-container .pb-search-input:focus{outline:none;border-color:#6366f1;background:#fff;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-search-container .pb-search-input::placeholder{color:#9ca3af}[_nghost-%COMP%]     .pb-search-container .pb-search-clear{position:absolute;right:28px;top:50%;transform:translateY(-50%);background:none;border:none;color:#9ca3af;font-size:20px;cursor:pointer;padding:4px 8px;border-radius:4px;transition:all .2s ease}[_nghost-%COMP%]     .pb-search-container .pb-search-clear:hover{color:#6b7280;background:#f3f4f6}[_nghost-%COMP%]     .pb-canvas-controls{display:flex;align-items:center;gap:16px}[_nghost-%COMP%]     .pb-element-counter{display:flex;align-items:center;gap:6px;padding:6px 12px;background:#f3f4f6;border-radius:6px;font-size:13px;font-weight:500;color:#1f2937}[_nghost-%COMP%]     .pb-element-counter .counter-icon{font-size:16px}[_nghost-%COMP%]     .pb-element-counter .counter-value{min-width:20px;text-align:center;color:#6366f1;font-weight:600}[_nghost-%COMP%]     .pb-zoom-controls{display:flex;align-items:center;gap:4px;background:#f3f4f6;padding:4px;border-radius:6px}[_nghost-%COMP%]     .pb-zoom-controls .pb-btn-icon{padding:6px 10px;min-width:32px}[_nghost-%COMP%]     .pb-zoom-controls .pb-zoom-level{min-width:50px;text-align:center;font-size:12px;font-weight:600;color:#1f2937;padding:0 8px}[_nghost-%COMP%]     .pb-canvas{transform-origin:top center;transition:transform .2s ease}[_nghost-%COMP%]     .pb-canvas.zoom-50{transform:scale(.5)}[_nghost-%COMP%]     .pb-canvas.zoom-75{transform:scale(.75)}[_nghost-%COMP%]     .pb-canvas.zoom-100{transform:scale(1)}[_nghost-%COMP%]     .pb-canvas.zoom-125{transform:scale(1.25)}[_nghost-%COMP%]     .pb-canvas.zoom-150{transform:scale(1.5)}[_nghost-%COMP%]     .pb-canvas.zoom-200{transform:scale(2)}[_nghost-%COMP%]     .pb-widget.search-hidden{display:none!important}[_nghost-%COMP%]     .pb-widget.search-highlighted{animation:_ngcontent-%COMP%_highlightPulse .5s ease}[_nghost-%COMP%]     .pb-category.search-empty .pb-category-title{opacity:.5}[_nghost-%COMP%]     .pb-category.search-empty .pb-widgets-grid{min-height:40px;display:flex;align-items:center;justify-content:center;color:#9ca3af;font-size:12px;font-style:italic}[_nghost-%COMP%]     .pb-category.search-empty .pb-widgets-grid:empty:after{content:\"Nenhum elemento encontrado\"}@keyframes _ngcontent-%COMP%_highlightPulse{0%,to{transform:scale(1);box-shadow:0 0 #6366f100}50%{transform:scale(1.05);box-shadow:0 0 0 4px #6366f14d}}[_nghost-%COMP%]     .pb-canvas-header{box-shadow:0 2px 4px #0000000d;z-index:10;position:relative}[_nghost-%COMP%]     #clearAllBtn:hover{background:#fee2e2;border-color:#fca5a5;color:#dc2626}[_nghost-%COMP%]     .pb-empty-state{animation:_ngcontent-%COMP%_fadeInUp .5s ease}[_nghost-%COMP%]     .pb-empty-state .pb-empty-icon{animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}@keyframes _ngcontent-%COMP%_fadeInUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-10px)}}[_nghost-%COMP%]     .pb-widget.dragging-active{opacity:.5;transform:rotate(2deg)}[_nghost-%COMP%]     .pb-element.drag-over-top{border-top:3px solid #6366f1;margin-top:10px}[_nghost-%COMP%]     .pb-element.drag-over-bottom{border-bottom:3px solid #6366f1;margin-bottom:10px}  .pb-image-modal{position:fixed;inset:0;z-index:10000;display:flex;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_fadeIn .3s ease}  .pb-image-modal-overlay{position:absolute;inset:0;background:rgba(0,0,0,.6);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px)}  .pb-image-modal-content{position:relative;background:white;border-radius:16px;width:90%;max-width:900px;max-height:85vh;display:flex;flex-direction:column;box-shadow:0 20px 60px #0000004d;animation:_ngcontent-%COMP%_slideUp .3s ease;overflow:hidden}  .pb-image-modal-header{display:flex;align-items:center;justify-content:space-between;padding:20px 24px;border-bottom:1px solid #e5e7eb;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%)}  .pb-image-modal-header h3{margin:0;font-size:20px;font-weight:600;color:#fff;display:flex;align-items:center;gap:8px}  .pb-image-modal-header .pb-image-modal-close{background:rgba(255,255,255,.18);border:none;width:36px;height:36px;border-radius:10px;color:#fff;font-size:18px;cursor:pointer;transition:background .2s,transform .12s;display:flex;align-items:center;justify-content:center;margin:0;padding:0;order:2}  .pb-image-modal-header .pb-image-modal-close:hover{background:rgba(255,255,255,.28);transform:scale(1.05)}  .pb-image-modal-tabs{display:flex;gap:4px;padding:16px 24px 0;background:#f9fafb;border-bottom:1px solid #e5e7eb}  .pb-image-tab{flex:1;padding:12px 16px;background:transparent;border:none;border-radius:8px 8px 0 0;font-size:14px;font-weight:500;color:#6b7280;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:6px}  .pb-image-tab:hover{background:rgba(102,126,234,.1);color:#667eea}  .pb-image-tab.active{background:white;color:#667eea;box-shadow:0 -2px 8px #0000000d}  .pb-image-modal-body{flex:1;overflow-y:auto;padding:24px;background:white}  .pb-image-tab-content{display:none}  .pb-image-tab-content.active{display:block}  .pb-image-upload-area{display:flex;flex-direction:column;gap:20px}  .pb-image-dropzone{border:2px dashed #cbd5e1;border-radius:12px;padding:60px 20px;text-align:center;cursor:pointer;transition:all .3s;background:#f8fafc;display:flex;flex-direction:column;align-items:center;gap:12px}  .pb-image-dropzone:hover{border-color:#667eea;background:#f0f4ff}  .pb-image-dropzone.dragover{border-color:#667eea;background:linear-gradient(135deg,rgba(102,126,234,.1) 0%,rgba(118,75,162,.1) 100%);transform:scale(1.02)}  .pb-image-dropzone .pb-dropzone-icon{font-size:64px;opacity:.5}  .pb-image-dropzone .pb-dropzone-text{margin:0;font-size:16px;font-weight:500;color:#374151}  .pb-image-dropzone .pb-dropzone-formats{margin:0;font-size:13px;color:#9ca3af}  .pb-image-preview-container{display:flex;flex-direction:column;gap:16px}  .pb-image-preview-container #imagePreview{width:100%;max-height:300px;object-fit:contain;border-radius:8px;border:1px solid #e5e7eb;background:#f9fafb}  .pb-image-preview-container .pb-crop-canvas-wrapper{position:relative;width:100%;max-height:400px;overflow:hidden;background:#f3f4f6;border-radius:8px;border:1px solid #e5e7eb;display:flex;justify-content:center;align-items:center}  .pb-image-preview-container .pb-crop-canvas-wrapper #cropCanvas{display:block;max-width:100%;max-height:400px;cursor:crosshair;-webkit-user-select:none;user-select:none}  .pb-image-crop-tools{display:flex;gap:8px;flex-wrap:wrap}  .pb-image-crop-tools .pb-crop-btn{flex:1;min-width:100px;padding:10px 16px;background:white;border:2px solid #e5e7eb;border-radius:8px;font-size:13px;font-weight:500;cursor:pointer;transition:all .2s;display:flex;align-items:center;justify-content:center;gap:4px}  .pb-image-crop-tools .pb-crop-btn:hover{border-color:#667eea;color:#667eea;background:#f0f4ff}  .pb-image-crop-tools .pb-crop-btn.active{border-color:#667eea;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}  .pb-image-resize-tools{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:12px;padding:16px;background:#f9fafb;border-radius:8px;border:1px solid #e5e7eb}  .pb-image-resize-tools label{display:flex;align-items:center;gap:8px;font-size:14px;color:#374151;font-weight:500}  .pb-image-resize-tools label input[type=number]{flex:1;padding:8px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;transition:all .2s}  .pb-image-resize-tools label input[type=number]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}  .pb-image-resize-tools label input[type=checkbox]{width:18px;height:18px;cursor:pointer;accent-color:#667eea}  .pb-image-library-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(200px,1fr));gap:16px}  .pb-image-library-grid .pb-library-empty{grid-column:1/-1;text-align:center;padding:60px 20px;color:#9ca3af;font-size:15px}  .pb-library-item{border:2px solid #e5e7eb;border-radius:12px;overflow:hidden;transition:all .3s;background:white;cursor:pointer}  .pb-library-item:hover{border-color:#667eea;box-shadow:0 8px 24px #667eea26;transform:translateY(-4px)}  .pb-library-item img{width:100%;height:150px;object-fit:cover;background:#f3f4f6}  .pb-library-item .pb-library-item-info{padding:12px;display:flex;flex-direction:column;gap:4px;background:#f9fafb}  .pb-library-item .pb-library-item-info .pb-library-item-name{font-size:13px;font-weight:500;color:#374151;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}  .pb-library-item .pb-library-item-info .pb-library-item-size{font-size:12px;color:#9ca3af}  .pb-library-item .pb-library-item-actions{padding:8px 12px;display:flex;gap:8px;border-top:1px solid #e5e7eb}  .pb-library-item .pb-library-item-actions button{flex:1;padding:6px 12px;border:none;border-radius:6px;font-size:12px;font-weight:500;cursor:pointer;transition:all .2s}  .pb-library-item .pb-library-item-actions .pb-library-select-btn{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}  .pb-library-item .pb-library-item-actions .pb-library-select-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea4d}  .pb-library-item .pb-library-item-actions .pb-library-copy-btn{background:linear-gradient(135deg,#64748b 0%,#475569 100%);color:#fff;flex:0 0 auto;padding:6px 12px;font-size:16px;transition:all .2s ease;cursor:pointer}  .pb-library-item .pb-library-item-actions .pb-library-copy-btn:hover{transform:translateY(-1px);box-shadow:0 4px 12px #64748b4d;background:linear-gradient(135deg,#475569 0%,#334155 100%)}  .pb-library-item .pb-library-item-actions .pb-library-copy-btn:active{transform:translateY(0)}  .pb-library-item .pb-library-item-actions .pb-library-delete-btn{background:#fee2e2;color:#dc2626;flex:0 0 auto;padding:6px 10px}  .pb-library-item .pb-library-item-actions .pb-library-delete-btn:hover{background:#fecaca}  .pb-image-url-form{display:flex;flex-direction:column;gap:16px}  .pb-image-url-form label{font-size:14px;font-weight:500;color:#374151}  .pb-image-url-form input[type=url]{padding:12px 16px;border:2px solid #e5e7eb;border-radius:8px;font-size:14px;transition:all .2s}  .pb-image-url-form input[type=url]:focus{outline:none;border-color:#667eea;box-shadow:0 0 0 3px #667eea1a}  .pb-image-url-form .pb-btn-primary{align-self:flex-start;padding:10px 24px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}  .pb-image-url-form .pb-btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}  .pb-image-url-form .pb-btn-primary:active{transform:translateY(0)}  .pb-image-url-form .pb-url-preview{margin-top:8px}  .pb-image-url-form .pb-url-preview img{width:100%;max-height:300px;object-fit:contain;border-radius:8px;border:1px solid #e5e7eb}  .pb-image-modal-footer{display:flex;gap:12px;padding:16px 24px;border-top:1px solid #e5e7eb;background:#f9fafb;justify-content:flex-end}  .pb-image-modal-footer button{padding:10px 24px;border:none;border-radius:8px;font-size:14px;font-weight:500;cursor:pointer;transition:all .2s}  .pb-image-modal-footer button.pb-btn-secondary{background:white;color:#6b7280;border:2px solid #e5e7eb}  .pb-image-modal-footer button.pb-btn-secondary:hover{background:#f3f4f6;border-color:#d1d5db}  .pb-image-modal-footer button.pb-btn-primary{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff}  .pb-image-modal-footer button.pb-btn-primary:hover{transform:translateY(-1px);box-shadow:0 4px 12px #667eea66}  .pb-image-resize-handles{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;opacity:0;transition:opacity .2s}  .pb-image-resize-handles .pb-resize-handle{position:absolute;background:#667eea;border:2px solid white;pointer-events:all;z-index:1000;box-shadow:0 2px 8px #00000026;transition:all .2s}  .pb-image-resize-handles .pb-resize-handle:hover{background:#764ba2;box-shadow:0 4px 12px #667eea66}  .pb-image-resize-handles .pb-resize-handle:active{transform:scale(.95)}  .pb-image-resize-handles .pb-resize-se,   .pb-image-resize-handles .pb-resize-sw,   .pb-image-resize-handles .pb-resize-ne,   .pb-image-resize-handles .pb-resize-nw{width:12px;height:12px;border-radius:50%}  .pb-image-resize-handles .pb-resize-se:hover,   .pb-image-resize-handles .pb-resize-sw:hover,   .pb-image-resize-handles .pb-resize-ne:hover,   .pb-image-resize-handles .pb-resize-nw:hover{transform:scale(1.3)}  .pb-image-resize-handles .pb-resize-se{bottom:-6px;right:-6px;cursor:nwse-resize}  .pb-image-resize-handles .pb-resize-nw{top:-6px;left:-6px;cursor:nwse-resize}  .pb-image-resize-handles .pb-resize-ne{top:-6px;right:-6px;cursor:nesw-resize}  .pb-image-resize-handles .pb-resize-sw{bottom:-6px;left:-6px;cursor:nesw-resize}  .pb-image-resize-handles .pb-resize-n,   .pb-image-resize-handles .pb-resize-s{width:30px;height:6px;border-radius:3px;left:50%;transform:translate(-50%)}  .pb-image-resize-handles .pb-resize-n:hover,   .pb-image-resize-handles .pb-resize-s:hover{height:8px;transform:translate(-50%)}  .pb-image-resize-handles .pb-resize-n{top:-3px;cursor:ns-resize}  .pb-image-resize-handles .pb-resize-s{bottom:-3px;cursor:ns-resize}  .pb-image-resize-handles .pb-resize-e,   .pb-image-resize-handles .pb-resize-w{width:6px;height:30px;border-radius:3px;top:50%;transform:translateY(-50%)}  .pb-image-resize-handles .pb-resize-e:hover,   .pb-image-resize-handles .pb-resize-w:hover{width:8px;transform:translateY(-50%)}  .pb-image-resize-handles .pb-resize-e{right:-3px;cursor:ew-resize}  .pb-image-resize-handles .pb-resize-w{left:-3px;cursor:ew-resize}  .pb-element-image:hover .pb-image-resize-handles{opacity:1}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(30px)}to{opacity:1;transform:translateY(0)}}  .pb-notifications-container{position:fixed;top:80px;right:20px;z-index:100000;display:flex;flex-direction:column;gap:12px;pointer-events:none}  .pb-notification{display:flex;align-items:center;gap:12px;padding:16px 20px;background:white;border-radius:12px;box-shadow:0 8px 32px #0000001f,0 2px 8px #00000014;min-width:320px;max-width:450px;pointer-events:all;opacity:0;transform:translate(400px);transition:all .3s cubic-bezier(.68,-.55,.265,1.55);border-left:4px solid}  .pb-notification.pb-notification-show{opacity:1;transform:translate(0)}  .pb-notification.pb-notification-hide{opacity:0;transform:translate(400px) scale(.8)}  .pb-notification .pb-notification-icon{width:32px;height:32px;border-radius:50%;display:flex;align-items:center;justify-content:center;font-size:18px;font-weight:700;flex-shrink:0}  .pb-notification .pb-notification-message{flex:1;font-size:14px;line-height:1.5;color:#1f2937;font-weight:500}  .pb-notification .pb-notification-close{width:24px;height:24px;border:none;background:transparent;color:#9ca3af;font-size:24px;line-height:1;cursor:pointer;display:flex;align-items:center;justify-content:center;border-radius:6px;transition:all .2s;flex-shrink:0}  .pb-notification .pb-notification-close:hover{background:#f3f4f6;color:#6b7280}  .pb-notification.pb-notification-success{border-left-color:#10b981}  .pb-notification.pb-notification-success .pb-notification-icon{background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:#fff}  .pb-notification.pb-notification-error{border-left-color:#ef4444}  .pb-notification.pb-notification-error .pb-notification-icon{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%);color:#fff}  .pb-notification.pb-notification-warning{border-left-color:#f59e0b}  .pb-notification.pb-notification-warning .pb-notification-icon{background:linear-gradient(135deg,#f59e0b 0%,#d97706 100%);color:#fff}  .pb-notification.pb-notification-info{border-left-color:#3b82f6}  .pb-notification.pb-notification-info .pb-notification-icon{background:linear-gradient(135deg,#3b82f6 0%,#2563eb 100%);color:#fff}  .pb-element-dragging{opacity:.5;transform:scale(.95);cursor:grabbing!important}  .pb-drag-placeholder{height:60px;background:linear-gradient(135deg,rgba(102,126,234,.1) 0%,rgba(118,75,162,.1) 100%);border:2px dashed #667eea;border-radius:8px;margin:8px 0;display:flex;align-items:center;justify-content:center;color:#667eea;font-weight:600;font-size:14px}  .pb-drag-placeholder:before{content:\"\\2193  Solte aqui\"}  .pb-element-drag-over{outline:3px solid #667eea!important;outline-offset:4px;background:rgba(102,126,234,.05)}  .pb-confirm-overlay{position:fixed;top:0;left:0;width:100%;height:100%;background:rgba(0,0,0,.6);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);display:flex;align-items:center;justify-content:center;z-index:100000;opacity:0;transition:opacity .3s ease}  .pb-confirm-overlay.pb-confirm-show{opacity:1}  .pb-confirm-modal{background:white;border-radius:16px;box-shadow:0 20px 60px #0000004d;max-width:480px;width:90%;overflow:hidden;opacity:0;transform:scale(.9) translateY(-20px);transition:all .3s cubic-bezier(.34,1.56,.64,1)}  .pb-confirm-modal.pb-confirm-show{opacity:1;transform:scale(1) translateY(0)}  .pb-confirm-modal .pb-confirm-header{padding:24px 24px 16px;border-bottom:1px solid #e5e7eb}  .pb-confirm-modal .pb-confirm-header h3{margin:0;font-size:20px;font-weight:700;color:#1f2937}  .pb-confirm-modal .pb-confirm-body{padding:24px;display:flex;align-items:flex-start;gap:16px}  .pb-confirm-modal .pb-confirm-body .pb-confirm-icon{font-size:36px;line-height:1;flex-shrink:0}  .pb-confirm-modal .pb-confirm-body p{margin:0;font-size:15px;line-height:1.6;color:#4b5563;flex:1}  .pb-confirm-modal .pb-confirm-footer{padding:16px 24px 24px;display:flex;gap:12px;justify-content:flex-end}  .pb-confirm-modal .pb-confirm-btn{padding:12px 24px;border-radius:10px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s;border:none;outline:none;min-width:100px}  .pb-confirm-modal .pb-confirm-btn:active{transform:scale(.95)}  .pb-confirm-modal .pb-confirm-btn.pb-confirm-cancel{background:#f3f4f6;color:#4b5563;border:2px solid #e5e7eb}  .pb-confirm-modal .pb-confirm-btn.pb-confirm-cancel:hover{background:#e5e7eb;border-color:#d1d5db}  .pb-confirm-modal .pb-confirm-btn.pb-confirm-ok{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;box-shadow:0 4px 12px #667eea66}  .pb-confirm-modal .pb-confirm-btn.pb-confirm-ok:hover{box-shadow:0 6px 16px #667eea80;transform:translateY(-1px)}  .mvv-section{padding:80px 8.333%;background:linear-gradient(to bottom,rgba(242,244,247,.96),rgba(242,244,247,.96));position:relative;overflow:hidden;border-radius:0}  .mvv-section .mvv-background-mask{position:absolute;top:0;left:0;width:100%;height:100%;background-size:220%;background-position:40% center;background-repeat:no-repeat;z-index:0}  .mvv-section .mvv-overlay{position:absolute;inset:0;background:linear-gradient(to bottom,rgba(242,244,247,.96),rgba(242,244,247,.96));z-index:1}  .mvv-section .mvv-container{display:grid;grid-template-columns:repeat(3,1fr);gap:40px;max-width:1200px;margin:0 auto;position:relative;z-index:2}  .mvv-section .mvv-card{text-align:center;transition:transform .3s ease}  .mvv-section .mvv-card:hover{transform:translateY(-5px)}  .mvv-section .mvv-card [contenteditable=true]{transition:all .2s ease}  .mvv-section .mvv-card [contenteditable=true]:hover{opacity:.8}  .mvv-section .mvv-card [contenteditable=true]:focus{background-color:#6366f11a!important;border-radius:4px;padding:4px 8px!important;outline:2px solid rgba(99,102,241,.3)}  .mvv-section .mvv-title{font-family:Raleway,sans-serif;font-size:36px;margin:0 0 20px;line-height:normal}  .mvv-section .mvv-title span{font-weight:500}  .mvv-section .mvv-divider{width:36px;height:2px;background:#3b89b5;margin:20px auto}  .mvv-section .mvv-text{font-family:Raleway,sans-serif;font-weight:400;font-size:16px;line-height:1.5;color:#1f5e85;margin:0}@media (max-width: 1200px){  .mvv-section .mvv-container{grid-template-columns:1fr;gap:60px}}  .seja-membro-section{position:relative;height:400px;background:#3b89b5;display:flex;align-items:center;justify-content:space-around;padding:0 8.333%;overflow:hidden}  .seja-membro-section .seja-membro-background-mask{position:absolute;top:0;left:0;width:100%;height:100%;background-size:220%;background-position:40% center;background-repeat:no-repeat;z-index:0}  .seja-membro-section .seja-membro-overlay{position:absolute;inset:0;z-index:1}  .seja-membro-section .seja-membro-content{position:relative;z-index:2;display:flex;align-items:center;justify-content:space-between;width:100%;max-width:1200px;margin:0 auto}  .seja-membro-section .seja-membro-logo{width:325px;height:240px;display:flex;align-items:center;justify-content:center}  .seja-membro-section .seja-membro-logo img{width:100%;height:100%;object-fit:contain;transition:opacity .3s ease}  .seja-membro-section .seja-membro-logo img:hover{opacity:.8}  .seja-membro-section .seja-membro-text{text-align:left}  .seja-membro-section .seja-membro-title{font-family:Raleway,sans-serif;font-weight:700;font-size:36px;color:#f2f4f7;margin:0 0 12px;transition:all .2s ease}  .seja-membro-section .seja-membro-title[contenteditable=true]:hover{opacity:.9}  .seja-membro-section .seja-membro-title[contenteditable=true]:focus{background-color:#fff3!important;border-radius:4px;padding:4px 8px!important;outline:2px solid rgba(255,255,255,.4)}  .seja-membro-section .seja-membro-subtitle{font-family:Raleway,sans-serif;font-weight:500;font-size:24px;color:#f2f4f7;margin:0 0 30px;transition:all .2s ease}  .seja-membro-section .seja-membro-subtitle[contenteditable=true]:hover{opacity:.9}  .seja-membro-section .seja-membro-subtitle[contenteditable=true]:focus{background-color:#fff3!important;border-radius:4px;padding:4px 8px!important;outline:2px solid rgba(255,255,255,.4)}  .seja-membro-section .btn-associar-membro,   .seja-membro-section a[data-prop=textoBotao]{font-family:Raleway,sans-serif;font-weight:500;font-size:20px;color:#fff;background:transparent;border:1px solid #f2f4f7;padding:15px 38px;border-radius:8px;cursor:pointer;transition:all .3s ease;letter-spacing:-.4px;line-height:16px;text-decoration:none;display:inline-block}  .seja-membro-section .btn-associar-membro:hover,   .seja-membro-section a[data-prop=textoBotao]:hover{background:#f2f4f7;color:#3b89b5;transform:translateY(-2px);box-shadow:0 4px 12px #0003}@media (max-width: 768px){  .seja-membro-section .seja-membro-content{flex-direction:column;text-align:center;gap:30px}  .seja-membro-section .seja-membro-content .seja-membro-text{text-align:center}  .seja-membro-section .seja-membro-content .seja-membro-logo{width:250px;height:180px}}[_nghost-%COMP%]     .pb-advanced-config-button{position:fixed;bottom:32px;right:32px;width:64px;height:64px;background:linear-gradient(135deg,#6366f1 0%,#8b5cf6 100%);border:none;border-radius:50%;cursor:pointer;display:flex;align-items:center;justify-content:center;font-size:56px;transition:all .3s cubic-bezier(.4,0,.2,1);box-shadow:0 8px 24px #6366f159;z-index:9999;-webkit-user-select:none;user-select:none;outline:none}[_nghost-%COMP%]     .pb-advanced-config-button .pb-config-icon{display:flex;align-items:center;justify-content:center;width:100%;height:100%;transition:transform .3s cubic-bezier(.4,0,.2,1)}[_nghost-%COMP%]     .pb-advanced-config-button:hover{background:linear-gradient(135deg,#4f46e5 0%,#7c3aed 100%);transform:scale(1.12);box-shadow:0 12px 32px #6366f180}[_nghost-%COMP%]     .pb-advanced-config-button:active{transform:scale(.98)}[_nghost-%COMP%]     .pb-advanced-config-button:before{content:attr(title);position:absolute;bottom:100%;right:0;margin-bottom:16px;padding:10px 14px;background:rgba(31,41,55,.95);color:#fff;font-size:12px;font-weight:600;border-radius:6px;white-space:nowrap;pointer-events:none;opacity:0;visibility:hidden;transition:all .3s cubic-bezier(.4,0,.2,1);-webkit-backdrop-filter:blur(4px);backdrop-filter:blur(4px);z-index:10000}[_nghost-%COMP%]     .pb-advanced-config-button:hover:before{opacity:1;visibility:visible}[_nghost-%COMP%]     .pb-advanced-configuration{display:none}[_nghost-%COMP%]     .pb-advanced-config-content{display:none}[_nghost-%COMP%]     .pb-pages-manager-btn{display:none}[_nghost-%COMP%]     .pb-advanced-config-btn{display:none;transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden;box-shadow:0 4px 12px #6366f133}[_nghost-%COMP%]     .pb-advanced-config-btn:before{content:\"\";position:absolute;top:0;left:-100%;width:100%;height:100%;background:linear-gradient(90deg,transparent,rgba(255,255,255,.2),transparent);transition:left .5s ease}[_nghost-%COMP%]     .pb-advanced-config-btn:hover{background:linear-gradient(135deg,#4f46e5 0%,#7c3aed 50%,#db2777 100%);transform:translateY(-2px);box-shadow:0 8px 20px #6366f159}[_nghost-%COMP%]     .pb-advanced-config-btn:hover:before{left:100%}[_nghost-%COMP%]     .pb-advanced-config-btn:hover .btn-arrow{transform:translate(3px)}[_nghost-%COMP%]     .pb-advanced-config-btn:hover .btn-icon-gear{animation:_ngcontent-%COMP%_spin .6s linear infinite}[_nghost-%COMP%]     .pb-advanced-config-btn:active{transform:translateY(0);box-shadow:0 2px 8px #6366f133}[_nghost-%COMP%]     .pb-advanced-config-btn .btn-icon-gear{font-size:18px;display:flex;align-items:center;justify-content:center;width:28px;height:28px;background:rgba(255,255,255,.15);border-radius:6px;transition:all .3s ease;flex-shrink:0}[_nghost-%COMP%]     .pb-advanced-config-btn .btn-label{flex:1;text-align:left;margin-left:8px;font-weight:600;letter-spacing:.3px}[_nghost-%COMP%]     .pb-advanced-config-btn .btn-arrow{font-size:16px;transition:all .3s cubic-bezier(.4,0,.2,1);opacity:.8;margin-left:8px}[_nghost-%COMP%]     .pb-advanced-config-btn{display:flex;align-items:center;gap:10px;width:100%;padding:10px 12px;background:linear-gradient(135deg,#6366f1 0%,#4f46e5 100%);color:#fff;border:none;border-radius:6px;cursor:pointer;font-size:12px;font-weight:600;transition:all .2s ease}[_nghost-%COMP%]     .pb-advanced-config-btn:hover{background:linear-gradient(135deg,#4f46e5 0%,#4338ca 100%);transform:translateY(-1px);box-shadow:0 4px 12px #6366f14d}[_nghost-%COMP%]     .pb-advanced-config-btn:active{transform:translateY(0)}[_nghost-%COMP%]     .pb-advanced-config-btn .btn-icon{font-size:16px}[_nghost-%COMP%]     .pb-advanced-config-btn .btn-label{flex:1;text-align:left}[_nghost-%COMP%]     #pagesManagerModal.pb-modal{display:none;position:fixed;inset:0;z-index:10000;align-items:center;justify-content:center}[_nghost-%COMP%]     #pagesManagerModal.pb-modal[style*=\"display: flex\"]{display:flex!important}[_nghost-%COMP%]     #pagesManagerModal.pb-modal .pb-modal-overlay{position:absolute;inset:0;background:rgba(0,0,0,.5);cursor:pointer}[_nghost-%COMP%]     #pagesManagerModal.pb-modal .pb-pages-modal-content{position:relative;z-index:1;background:white;border-radius:12px;box-shadow:0 20px 60px #0000004d;width:90%;max-width:900px;max-height:80vh;display:flex;flex-direction:column;animation:_ngcontent-%COMP%_slideUp .3s ease-out}[_nghost-%COMP%]     #pagesManagerModal.pb-modal .pb-pages-modal-content .pb-modal-header{padding:24px;border-bottom:1px solid #e5e7eb;display:flex;justify-content:space-between;align-items:center}[_nghost-%COMP%]     #pagesManagerModal.pb-modal .pb-pages-modal-content .pb-modal-header h2{margin:0;font-size:20px;font-weight:700;color:#1f2937}[_nghost-%COMP%]     #pagesManagerModal.pb-modal .pb-pages-modal-content .pb-modal-header .pb-modal-close{background:none;border:none;font-size:28px;cursor:pointer;color:#6b7280;padding:0;width:32px;height:32px;display:flex;align-items:center;justify-content:center;border-radius:4px;transition:all .2s ease}[_nghost-%COMP%]     #pagesManagerModal.pb-modal .pb-pages-modal-content .pb-modal-header .pb-modal-close:hover{background:#f3f4f6;color:#1f2937}[_nghost-%COMP%]     #pagesManagerModal.pb-modal .pb-pages-modal-content .pb-pages-modal-body{flex:1;overflow-y:auto;padding:24px}[_nghost-%COMP%]     .pb-pages-tabs{display:flex;gap:8px;margin-bottom:24px;border-bottom:2px solid #e5e7eb}[_nghost-%COMP%]     .pb-pages-tab{background:none;border:none;padding:12px 16px;font-size:14px;font-weight:600;color:#6b7280;cursor:pointer;border-bottom:3px solid transparent;transition:all .2s ease;margin-bottom:-2px}[_nghost-%COMP%]     .pb-pages-tab:hover{color:#1f2937;background:#f9fafb}[_nghost-%COMP%]     .pb-pages-tab.pb-pages-tab-active{color:#6366f1;border-bottom-color:#6366f1}[_nghost-%COMP%]     .pb-pages-tab-content{display:none}[_nghost-%COMP%]     .pb-pages-tab-content.pb-pages-tab-active{display:block;animation:_ngcontent-%COMP%_fadeIn .2s ease-out}[_nghost-%COMP%]     .pb-pages-list{display:flex;flex-direction:column;gap:12px}[_nghost-%COMP%]     .pb-pages-item{display:flex;justify-content:space-between;align-items:flex-start;padding:16px;border:1px solid #e5e7eb;border-radius:8px;background:#f9fafb;transition:all .2s ease}[_nghost-%COMP%]     .pb-pages-item:hover{background:#f3f4f6;border-color:#d1d5db;box-shadow:0 2px 8px #0000000d}[_nghost-%COMP%]     .pb-pages-item .pb-pages-item-info{flex:1}[_nghost-%COMP%]     .pb-pages-item .pb-pages-item-info .pb-pages-item-title{margin:0 0 4px;font-size:16px;font-weight:600;color:#1f2937}[_nghost-%COMP%]     .pb-pages-item .pb-pages-item-info .pb-pages-item-link{margin:0 0 4px;font-size:12px;color:#6b7280;font-family:Courier New,monospace}[_nghost-%COMP%]     .pb-pages-item .pb-pages-item-info .pb-pages-item-desc{margin:0;font-size:13px;color:#6b7280;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical}[_nghost-%COMP%]     .pb-pages-item .pb-pages-item-info .pb-pages-badge{display:inline-block;margin-top:8px;padding:2px 8px;background:#dbeafe;color:#1e40af;font-size:11px;font-weight:600;border-radius:3px}[_nghost-%COMP%]     .pb-pages-item .pb-pages-item-actions{display:flex;gap:8px;margin-left:16px}[_nghost-%COMP%]     .pb-pages-action-btn{background:white;border:1px solid #d1d5db;padding:6px 10px;border-radius:4px;cursor:pointer;font-size:12px;transition:all .2s ease;white-space:nowrap}[_nghost-%COMP%]     .pb-pages-action-btn:hover{background:#f3f4f6;border-color:#9ca3af;transform:translateY(-1px)}[_nghost-%COMP%]     .pb-pages-action-btn:active{transform:translateY(0)}[_nghost-%COMP%]     .pb-pages-empty, [_nghost-%COMP%]     .pb-pages-error, [_nghost-%COMP%]     .pb-pages-loading{text-align:center;padding:40px 20px;color:#6b7280;font-size:14px}[_nghost-%COMP%]     .pb-pages-loading{display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .pb-pages-loading:after{content:\"\";display:inline-block;width:16px;height:16px;margin-left:8px;border:2px solid #e5e7eb;border-top-color:#6366f1;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}[_nghost-%COMP%]     .pb-pages-error{color:#dc2626}[_nghost-%COMP%]     .pb-pages-form{display:flex;flex-direction:column;gap:20px}[_nghost-%COMP%]     .pb-form-group label{font-size:13px;font-weight:600;color:#1f2937}[_nghost-%COMP%]     .pb-form-group input[type=text], [_nghost-%COMP%]     .pb-form-group input[type=email], [_nghost-%COMP%]     .pb-form-group textarea{padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;font-family:inherit;transition:all .2s ease}[_nghost-%COMP%]     .pb-form-group input[type=text]:focus, [_nghost-%COMP%]     .pb-form-group input[type=email]:focus, [_nghost-%COMP%]     .pb-form-group textarea:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-form-group input[type=text]:disabled, [_nghost-%COMP%]     .pb-form-group input[type=email]:disabled, [_nghost-%COMP%]     .pb-form-group textarea:disabled{background:#f3f4f6;color:#9ca3af;cursor:not-allowed}[_nghost-%COMP%]     .pb-form-group textarea{resize:vertical;min-height:80px;font-family:Courier New,monospace}[_nghost-%COMP%]     .pb-form-group input[type=checkbox]{width:18px;height:18px;cursor:pointer;accent-color:#6366f1}[_nghost-%COMP%]     .pb-pages-input{padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;font-family:inherit;transition:all .2s ease;background:white}[_nghost-%COMP%]     .pb-pages-input:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-pages-input:disabled{background:#f3f4f6;color:#9ca3af;cursor:not-allowed}[_nghost-%COMP%]     .pb-form-actions{display:flex;gap:12px;margin-top:12px;justify-content:flex-end}[_nghost-%COMP%]     .pb-form-actions .pb-btn{padding:10px 16px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;background:white;color:#1f2937}[_nghost-%COMP%]     .pb-form-actions .pb-btn:hover{background:#f3f4f6;border-color:#9ca3af}[_nghost-%COMP%]     .pb-form-actions .pb-btn:active{transform:translateY(0)}[_nghost-%COMP%]     .pb-form-actions .pb-btn.pb-btn-primary{background:linear-gradient(135deg,#6366f1 0%,#4f46e5 100%);color:#fff;border-color:#6366f1}[_nghost-%COMP%]     .pb-form-actions .pb-btn.pb-btn-primary:hover{background:linear-gradient(135deg,#4f46e5 0%,#4338ca 100%);border-color:#4f46e5;transform:translateY(-1px);box-shadow:0 4px 12px #6366f14d}@keyframes _ngcontent-%COMP%_slideDown{0%{opacity:0;max-height:0;overflow:hidden}to{opacity:1;max-height:1000px}}@keyframes _ngcontent-%COMP%_slideUp{0%{opacity:0;transform:translateY(20px)}to{opacity:1;transform:translateY(0)}}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0}to{opacity:1}}[_nghost-%COMP%]     #pagesPanel{position:fixed;right:-420px;top:0;height:100%;width:400px;background:#ffffff;border-left:1px solid #e5e7eb;box-shadow:-2px 0 8px #0000001a;display:flex;flex-direction:column;z-index:999;transition:right .3s cubic-bezier(.4,0,.2,1)}[_nghost-%COMP%]     #pagesPanel.active{right:0}[_nghost-%COMP%]     .pb-pages-panel-header{display:flex;align-items:center;justify-content:space-between;padding:16px 20px;border-bottom:2px solid #f3f4f6;background:linear-gradient(135deg,#ffffff 0%,#f9fafb 100%);flex-shrink:0}[_nghost-%COMP%]     .pb-pages-panel-header h3{margin:0;font-size:16px;font-weight:700;color:#1f2937}[_nghost-%COMP%]     .pb-pages-panel-header button{background:none;border:none;font-size:20px;color:#9ca3af;cursor:pointer;padding:4px 8px;border-radius:4px;transition:all .2s ease}[_nghost-%COMP%]     .pb-pages-panel-header button:hover{background:rgba(99,102,241,.1);color:#1f2937}[_nghost-%COMP%]     .pb-pages-tabs-nav{display:flex;gap:0;padding:0;background:#f9fafb;border-bottom:2px solid #e5e7eb;flex-shrink:0}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn{flex:1;display:flex;align-items:center;justify-content:center;gap:8px;padding:12px 16px;border:none;background:transparent;color:#6b7280;font-size:13px;font-weight:600;cursor:pointer;transition:all .3s ease;position:relative;text-transform:uppercase;letter-spacing:.5px}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn .tab-label{display:none}@media (min-width: 320px){[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn .tab-label{display:inline}}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn:hover{background:rgba(99,102,241,.05);color:#4f46e5}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn.active{background:white;color:#6366f1;border-bottom:3px solid #6366f1}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn.active:after{content:\"\";position:absolute;bottom:-2px;left:0;right:0;height:3px;background:linear-gradient(90deg,#6366f1 0%,transparent 100%)}[_nghost-%COMP%]     .pb-pages-panel-content{flex:1;overflow-y:auto;overflow-x:hidden;padding:16px;display:flex;flex-direction:column;gap:0}[_nghost-%COMP%]     .pb-pages-panel-content::-webkit-scrollbar{width:8px}[_nghost-%COMP%]     .pb-pages-panel-content::-webkit-scrollbar-track{background:transparent}[_nghost-%COMP%]     .pb-pages-panel-content::-webkit-scrollbar-thumb{background:#d1d5db;border-radius:4px}[_nghost-%COMP%]     .pb-pages-panel-content::-webkit-scrollbar-thumb:hover{background:#9ca3af}[_nghost-%COMP%]     .pb-pages-tab{display:flex;flex-direction:column;gap:12px}[_nghost-%COMP%]     .pb-edit-status{display:flex;align-items:center;gap:12px;padding:12px;background:linear-gradient(135deg,rgba(34,197,94,.1) 0%,rgba(34,197,94,.05) 100%);border-left:4px solid #22c55e;border-radius:6px;margin-bottom:8px}[_nghost-%COMP%]     .pb-edit-status .status-badge{display:inline-flex;align-items:center;gap:6px;padding:4px 12px;background:#22c55e;color:#fff;border-radius:20px;font-size:12px;font-weight:600;text-transform:uppercase;letter-spacing:.5px}[_nghost-%COMP%]     .pb-edit-status .status-badge.status-editing{animation:_ngcontent-%COMP%_pulse 2s cubic-bezier(.4,0,.6,1) infinite}[_nghost-%COMP%]     .pb-edit-status .status-info{font-size:12px;color:#16a34a;font-weight:500}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}[_nghost-%COMP%]     .pb-form-section{display:flex;flex-direction:column;gap:12px;padding:12px;background:rgba(99,102,241,.03);border-radius:8px;border-left:3px solid #6366f1}[_nghost-%COMP%]     .pb-form-section .pb-form-section-title{display:flex;align-items:center;gap:10px;margin:0;padding:0;font-size:13px;font-weight:700;color:#1f2937;text-transform:uppercase;letter-spacing:.5px;border:none}[_nghost-%COMP%]     .pb-form-section .pb-form-section-title .step-number{display:inline-flex;align-items:center;justify-content:center;width:24px;height:24px;background:#6366f1;color:#fff;border-radius:50%;font-size:12px;font-weight:700}[_nghost-%COMP%]     .pb-form-actions{border-left-color:#10b981;background:rgba(16,185,129,.03);padding:16px;gap:8px}[_nghost-%COMP%]     .pb-section-description{margin:0;padding:0 0 4px;font-size:12px;color:#6b7280;font-style:italic}[_nghost-%COMP%]     .pb-pages-section-title{margin:0;padding-bottom:8px;font-size:14px;font-weight:700;color:#1f2937;text-transform:uppercase;letter-spacing:.5px;border-bottom:2px solid rgba(99,102,241,.15)}[_nghost-%COMP%]     .pb-form-row{display:flex;gap:12px}[_nghost-%COMP%]     .pb-form-row .pb-form-group{flex:1}[_nghost-%COMP%]     .pb-form-row .pb-form-group:first-child{flex:2}[_nghost-%COMP%]     .pb-form-group{display:flex;flex-direction:column;gap:6px}[_nghost-%COMP%]     .pb-form-group label{display:flex;align-items:center;gap:6px;font-size:12px;font-weight:600;color:#374151}[_nghost-%COMP%]     .pb-form-group label .label-icon{font-size:14px}[_nghost-%COMP%]     .pb-form-group label .label-required{color:#ef4444;font-weight:700}[_nghost-%COMP%]     .pb-form-group input, [_nghost-%COMP%]     .pb-form-group select, [_nghost-%COMP%]     .pb-form-group textarea{padding:9px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:13px;font-family:inherit;background:white;transition:all .2s ease}[_nghost-%COMP%]     .pb-form-group input:focus, [_nghost-%COMP%]     .pb-form-group select:focus, [_nghost-%COMP%]     .pb-form-group textarea:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-form-group input:hover:not(:focus), [_nghost-%COMP%]     .pb-form-group select:hover:not(:focus), [_nghost-%COMP%]     .pb-form-group textarea:hover:not(:focus){border-color:#9ca3af}[_nghost-%COMP%]     .pb-form-group select{cursor:pointer;appearance:none;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3E%3Cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3E%3C/svg%3E\");background-position:right 8px center;background-repeat:no-repeat;background-size:16px;padding-right:32px}[_nghost-%COMP%]     .pb-form-group textarea{resize:vertical;min-height:60px}[_nghost-%COMP%]     .pb-form-group .form-help{display:block;font-size:11px;color:#9ca3af;margin-top:2px;font-style:italic}[_nghost-%COMP%]     .pb-form-checkbox{display:flex;align-items:center;gap:8px;padding:10px 12px;background:linear-gradient(135deg,#f0f9ff 0%,#f3f4f6 100%);border:1px solid #dbeafe;border-radius:6px;cursor:pointer;-webkit-user-select:none;user-select:none;transition:all .2s ease}[_nghost-%COMP%]     .pb-form-checkbox:hover{background:linear-gradient(135deg,#e0f2fe 0%,#ecf1f5 100%);border-color:#bfdbfe}[_nghost-%COMP%]     .pb-form-checkbox input[type=checkbox]{width:16px;height:16px;cursor:pointer;accent-color:#6366f1}[_nghost-%COMP%]     .pb-form-checkbox .checkbox-label{display:flex;align-items:center;gap:6px;font-size:13px;font-weight:500;color:#374151}[_nghost-%COMP%]     .pb-form-checkbox .checkbox-label .checkbox-icon{font-size:14px}[_nghost-%COMP%]     .pb-divider{height:1px;background:#e5e7eb;margin:12px 0}[_nghost-%COMP%]     .pb-divider-thick{height:8px;background:#f3f4f6;margin:12px -16px}[_nghost-%COMP%]     .pb-btn{display:inline-flex;align-items:center;justify-content:center;gap:8px;padding:10px 16px;border:none;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;transition:all .3s ease;font-family:inherit;position:relative;overflow:hidden}[_nghost-%COMP%]     .pb-btn .btn-icon{font-size:16px}[_nghost-%COMP%]     .pb-btn .btn-text{flex:1}[_nghost-%COMP%]     .pb-btn:hover{transform:translateY(-2px);box-shadow:0 4px 12px #00000026}[_nghost-%COMP%]     .pb-btn:active{transform:translateY(0)}[_nghost-%COMP%]     .pb-btn:disabled{opacity:.5;cursor:not-allowed;transform:none}[_nghost-%COMP%]     .pb-btn-primary{background:linear-gradient(135deg,#6366f1 0%,#4f46e5 100%);color:#fff}[_nghost-%COMP%]     .pb-btn-primary:hover:not(:disabled){background:linear-gradient(135deg,#4f46e5 0%,#4338ca 100%);box-shadow:0 4px 12px #6366f166}[_nghost-%COMP%]     .pb-btn-success{background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:#fff}[_nghost-%COMP%]     .pb-btn-success:hover:not(:disabled){background:linear-gradient(135deg,#059669 0%,#047857 100%);box-shadow:0 4px 12px #10b98166}[_nghost-%COMP%]     .pb-btn-danger{background:linear-gradient(135deg,#ef4444 0%,#dc2626 100%);color:#fff}[_nghost-%COMP%]     .pb-btn-danger:hover:not(:disabled){background:linear-gradient(135deg,#dc2626 0%,#b91c1c 100%);box-shadow:0 4px 12px #ef444466}[_nghost-%COMP%]     .pb-btn-block{width:100%}[_nghost-%COMP%]     .pb-btn-small{padding:6px 12px;font-size:12px;border-radius:4px;background:linear-gradient(135deg,#6366f1 0%,#4f46e5 100%);color:#fff}[_nghost-%COMP%]     .pb-btn-small:hover:not(:disabled){background:linear-gradient(135deg,#4f46e5 0%,#4338ca 100%);box-shadow:0 2px 8px #6366f14d}[_nghost-%COMP%]     .pb-btn-lg{padding:12px 20px;font-size:14px}[_nghost-%COMP%]     .pb-btn-sm{padding:8px 12px;font-size:12px}[_nghost-%COMP%]     .pb-pages-list{display:flex;flex-direction:column;gap:10px}[_nghost-%COMP%]     .pb-pages-list .pb-pages-loading{display:flex;align-items:center;justify-content:center;gap:8px;padding:20px;text-align:center;color:#9ca3af;font-size:13px}[_nghost-%COMP%]     .pb-pages-list .pb-pages-loading .loading-spinner{font-size:18px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}[_nghost-%COMP%]     .pb-pages-empty{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;padding:40px 20px;text-align:center;background:linear-gradient(135deg,rgba(99,102,241,.05) 0%,rgba(79,70,229,.02) 100%);border:2px dashed rgba(99,102,241,.2);border-radius:12px;color:#6b7280}[_nghost-%COMP%]     .pb-pages-empty .pb-empty-illustration{font-size:48px;opacity:.6}[_nghost-%COMP%]     .pb-pages-empty h5{margin:0;font-size:14px;font-weight:700;color:#1f2937}[_nghost-%COMP%]     .pb-pages-empty p{margin:0;font-size:12px;color:#9ca3af}[_nghost-%COMP%]     .pb-pages-empty .pb-btn{margin-top:8px}[_nghost-%COMP%]     .pb-page-item{display:flex;justify-content:space-between;gap:12px;padding:12px;border:1px solid #e5e7eb;border-radius:6px;background:#f9fafb;transition:all .2s ease}[_nghost-%COMP%]     .pb-page-item:hover{background:white;border-color:#d1d5db;box-shadow:0 2px 8px #0000000d}[_nghost-%COMP%]     .pb-page-item:hover .pb-page-actions button{opacity:1;visibility:visible}[_nghost-%COMP%]     .pb-page-info{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}[_nghost-%COMP%]     .pb-page-title{margin:0;font-size:13px;font-weight:600;color:#1f2937;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]     .pb-page-desc{margin:0;font-size:11px;color:#6b7280;display:-webkit-box;line-clamp:1;-webkit-line-clamp:1;-webkit-box-orient:vertical;overflow:hidden}[_nghost-%COMP%]     .pb-page-link{margin:0;font-size:11px;color:#7c3aed;font-family:monospace;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}[_nghost-%COMP%]     .pb-page-menu-badge, [_nghost-%COMP%]     .pb-page-tipo-badge{font-size:10px;display:inline-block;padding:2px 6px;border-radius:3px;margin-top:4px;width:-moz-fit-content;width:fit-content}[_nghost-%COMP%]     .pb-page-menu-badge{background:#fef3c7;color:#92400e}[_nghost-%COMP%]     .pb-page-tipo-badge{background:#dbeafe;color:#0c4a6e}[_nghost-%COMP%]     .pb-page-actions{display:flex;gap:6px;align-items:center}[_nghost-%COMP%]     .pb-page-action-btn{display:inline-flex;align-items:center;justify-content:center;width:32px;height:32px;padding:0;border:none;border-radius:6px;background:transparent;color:#6b7280;cursor:pointer;font-size:16px;transition:all .2s ease;position:relative;opacity:.7}[_nghost-%COMP%]     .pb-page-action-btn .action-icon{display:flex;align-items:center;justify-content:center;width:100%;height:100%;font-size:16px}[_nghost-%COMP%]     .pb-page-action-btn:hover{opacity:1;background:rgba(99,102,241,.1);transform:scale(1.05)}[_nghost-%COMP%]     .pb-page-action-btn:hover:before{content:attr(title);position:absolute;bottom:100%;left:50%;transform:translate(-50%);margin-bottom:6px;padding:4px 8px;background:#1f2937;color:#fff;font-size:11px;font-weight:500;border-radius:4px;white-space:nowrap;z-index:1000;pointer-events:none;box-shadow:0 2px 8px #00000026}[_nghost-%COMP%]     .pb-page-action-btn:hover:after{content:\"\";position:absolute;bottom:100%;left:50%;transform:translate(-50%);margin-bottom:-2px;border:4px solid transparent;border-top-color:#1f2937;z-index:1000;pointer-events:none}[_nghost-%COMP%]     .pb-page-action-btn.pb-page-edit-btn:hover{color:#7c3aed;background:rgba(124,58,237,.1)}[_nghost-%COMP%]     .pb-page-action-btn.pb-page-delete-btn:hover{color:#ef4444;background:rgba(239,68,68,.1)}[_nghost-%COMP%]     .pb-pages-section-container{display:flex;flex-direction:column;gap:12px;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid #e5e7eb}[_nghost-%COMP%]     .pb-pages-section-container:last-child{border-bottom:none;margin-bottom:0;padding-bottom:0}[_nghost-%COMP%]     .pb-pages-section-container .pb-section-title{margin:0 0 8px;font-size:11px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:#6b7280}@media (max-width: 768px){[_nghost-%COMP%]     #pagesPanel{width:100%;right:-100%}[_nghost-%COMP%]     #pagesPanel.active{right:0}[_nghost-%COMP%]     .pb-pages-panel-content{padding:12px}[_nghost-%COMP%]     .pb-form-row{flex-direction:column}[_nghost-%COMP%]     .pb-form-row .pb-form-group{flex:1!important}[_nghost-%COMP%]     .pb-divider-thick{margin:12px -12px}}[_nghost-%COMP%]     .pb-pages-panel-header{padding:20px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border-bottom:none;display:flex;align-items:center;justify-content:space-between;gap:16px}[_nghost-%COMP%]     .pb-pages-panel-header .pb-pages-header-content{display:flex;align-items:center;gap:12px;flex:1}[_nghost-%COMP%]     .pb-pages-panel-header .pb-pages-header-icon{font-size:28px;animation:_ngcontent-%COMP%_float 3s ease-in-out infinite}[_nghost-%COMP%]     .pb-pages-panel-header .pb-pages-header-text .pb-pages-title{margin:0;font-size:18px;font-weight:700;letter-spacing:-.5px}[_nghost-%COMP%]     .pb-pages-panel-header .pb-pages-header-text .pb-pages-subtitle{margin:4px 0 0;font-size:12px;opacity:.9}[_nghost-%COMP%]     .pb-pages-panel-header .pb-close-panel-btn{background:rgba(255,255,255,.2);border:none;color:#fff;width:36px;height:36px;border-radius:8px;cursor:pointer;font-size:18px;transition:all .2s ease;display:flex;align-items:center;justify-content:center}[_nghost-%COMP%]     .pb-pages-panel-header .pb-close-panel-btn:hover{background:rgba(255,255,255,.3);transform:rotate(90deg)}[_nghost-%COMP%]     .pb-pages-status-bar{padding:12px 20px;background:#f8f9fa;border-bottom:1px solid #e9ecef;font-size:12px;display:flex;gap:16px}[_nghost-%COMP%]     .pb-pages-status-bar .pb-status-item{display:flex;align-items:center;gap:6px}[_nghost-%COMP%]     .pb-pages-status-bar .pb-status-item .status-label{color:#6c757d;font-weight:600}[_nghost-%COMP%]     .pb-pages-status-bar .pb-status-item .status-value{color:#495057}[_nghost-%COMP%]     .pb-pages-tabs-nav{display:flex;background:#f8f9fa;border-bottom:1px solid #e9ecef;padding:0 8px;gap:4px}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn{flex:1;padding:14px 16px;background:transparent;border:none;border-radius:8px 8px 0 0;cursor:pointer;display:flex;align-items:center;justify-content:center;gap:8px;color:#6c757d;font-weight:600;font-size:13px;transition:all .3s ease;position:relative;text-decoration:none}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn .tab-icon{font-size:16px}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn .tab-indicator{position:absolute;bottom:-1px;left:0;right:0;height:3px;background:linear-gradient(90deg,#667eea 0%,#764ba2 100%);border-radius:2px 2px 0 0;opacity:0;transition:opacity .3s ease}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn:hover{background:rgba(102,126,234,.08);color:#667eea}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn.active{background:white;color:#667eea;box-shadow:0 2px 8px #667eea26}[_nghost-%COMP%]     .pb-pages-tabs-nav .pb-pages-tab-btn.active .tab-indicator{opacity:1}[_nghost-%COMP%]     .pb-form-card{background:white;border-radius:12px;margin-bottom:16px;border:1px solid #e9ecef;overflow:hidden;transition:all .3s ease;box-shadow:0 1px 3px #0000000d}[_nghost-%COMP%]     .pb-form-card:hover{border-color:#667eea;box-shadow:0 4px 12px #667eea26}[_nghost-%COMP%]     .pb-form-card .pb-form-card-header{padding:16px;background:linear-gradient(135deg,#f7f9fc 0%,#f0f4f8 100%);border-bottom:1px solid #e9ecef;display:flex;gap:12px;align-items:flex-start}[_nghost-%COMP%]     .pb-form-card .pb-form-card-header .pb-form-step-badge{width:36px;height:36px;background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:#fff;border-radius:50%;display:flex;align-items:center;justify-content:center;font-weight:700;flex-shrink:0;font-size:16px;box-shadow:0 2px 8px #667eea4d}[_nghost-%COMP%]     .pb-form-card .pb-form-card-header h4{margin:0;font-size:15px;font-weight:700;color:#1f2937}[_nghost-%COMP%]     .pb-form-card .pb-form-card-header p{margin:4px 0 0;font-size:12px;color:#6c757d}[_nghost-%COMP%]     .pb-form-card .pb-form-card-body{padding:16px}[_nghost-%COMP%]     .pb-form-card.pb-form-card-action{background:linear-gradient(135deg,#f0fdf4 0%,#f0fef9 100%);border:1px solid #d1e7dd}[_nghost-%COMP%]     .pb-form-card.pb-form-card-action .pb-form-card-header{background:linear-gradient(135deg,#f0fdf4 0%,#ecfdf5 100%)}[_nghost-%COMP%]     .pb-form-card.pb-form-card-action .pb-form-card-header .pb-form-step-badge{background:linear-gradient(135deg,#10b981 0%,#059669 100%)}[_nghost-%COMP%]     .pb-form-label{display:flex;align-items:center;gap:6px;font-weight:600;color:#1f2937;font-size:13px;margin-bottom:8px}[_nghost-%COMP%]     .pb-form-label .label-icon{font-size:16px}[_nghost-%COMP%]     .pb-form-label .label-required{color:#ef4444;font-weight:700;font-size:14px}[_nghost-%COMP%]     .pb-form-input{width:100%;padding:12px;border:1.5px solid #e5e7eb;border-radius:8px;font-size:13px;font-family:inherit;transition:all .2s ease;background:#fafbfc}[_nghost-%COMP%]     .pb-form-input:focus{outline:none;border-color:#667eea;background:white;box-shadow:0 0 0 3px #667eea1a}[_nghost-%COMP%]     .pb-form-input:disabled{background:#f3f4f6;color:#9ca3af;cursor:not-allowed}[_nghost-%COMP%]     .pb-form-select{appearance:none;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='12' height='12' viewBox='0 0 12 12'%3E%3Cpath fill='%23667eea' d='M6 9L1 4h10z'/%3E%3C/svg%3E\");background-repeat:no-repeat;background-position:right 10px center;padding-right:32px}[_nghost-%COMP%]     .pb-form-textarea{resize:vertical;min-height:80px}[_nghost-%COMP%]     .pb-form-checkbox-enhanced{display:flex;align-items:flex-start;gap:12px;padding:12px;background:#fafbfc;border-radius:8px;cursor:pointer;transition:all .2s ease}[_nghost-%COMP%]     .pb-form-checkbox-enhanced:hover{background:#f0f4f8}[_nghost-%COMP%]     .pb-form-checkbox-enhanced input[type=checkbox]{appearance:none;width:20px;height:20px;border:2px solid #e5e7eb;border-radius:4px;cursor:pointer;transition:all .2s ease;flex-shrink:0;margin-top:2px}[_nghost-%COMP%]     .pb-form-checkbox-enhanced input[type=checkbox]:checked{background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);border-color:transparent;background-image:url(\"data:image/svg+xml,%3Csvg viewBox='0 0 16 16' fill='white' xmlns='http://www.w3.org/2000/svg'%3E%3Cpath d='M13.78 4.22a.75.75 0 010 1.06l-7.25 7.25a.75.75 0 11-1.06-1.06l7.25-7.25a.75.75 0 011.06 0z'/%3E%3C/svg%3E\");background-size:cover}[_nghost-%COMP%]     .pb-form-checkbox-enhanced .checkbox-label-text{display:flex;flex-direction:column;gap:4px;flex:1}[_nghost-%COMP%]     .pb-form-checkbox-enhanced .checkbox-label-text .checkbox-icon{font-size:16px}[_nghost-%COMP%]     .pb-form-checkbox-enhanced .checkbox-label-text .checkbox-main{font-weight:600;color:#1f2937;font-size:13px}[_nghost-%COMP%]     .pb-form-checkbox-enhanced .checkbox-label-text .checkbox-sub{font-size:12px;color:#6c757d}[_nghost-%COMP%]     .pb-btn-animated{position:relative;overflow:hidden}[_nghost-%COMP%]     .pb-btn-animated:before{content:\"\";position:absolute;top:0;left:-100%;width:100%;height:100%;background:rgba(255,255,255,.2);transition:left .3s ease}[_nghost-%COMP%]     .pb-btn-animated:hover:before{left:100%}[_nghost-%COMP%]     .pb-btn-animated .btn-text{position:relative;z-index:1}[_nghost-%COMP%]     .pb-btn.pb-btn-lg{padding:14px 20px;font-size:14px;font-weight:600;border-radius:8px}[_nghost-%COMP%]     .pb-btn.pb-btn-lg .btn-icon{font-size:16px}[_nghost-%COMP%]     .pb-btn.pb-btn-lg .btn-subtext{display:block;font-size:11px;opacity:.8;margin-top:4px}[_nghost-%COMP%]     .pb-form-helper-box{display:flex;align-items:center;gap:8px;padding:12px;background:linear-gradient(135deg,#fef3c7 0%,#fef9e7 100%);border:1px solid #fcd34d;border-radius:8px;margin-top:12px;font-size:12px;color:#78350f}[_nghost-%COMP%]     .pb-form-helper-box .helper-icon{font-size:16px;flex-shrink:0}[_nghost-%COMP%]     .pb-form-helper-box .helper-text{flex:1}[_nghost-%COMP%]     .pb-form-helper-box .helper-text kbd{background:rgba(0,0,0,.1);padding:2px 6px;border-radius:3px;font-family:monospace;font-size:11px}[_nghost-%COMP%]     .pb-pages-search-box{padding:16px;border-bottom:1px solid #e9ecef}[_nghost-%COMP%]     .pb-pages-search-box .pb-pages-search{width:100%;padding:10px 14px;border:1.5px solid #e5e7eb;border-radius:8px;font-size:13px;background:#fafbfc;transition:all .2s ease}[_nghost-%COMP%]     .pb-pages-search-box .pb-pages-search:focus{outline:none;border-color:#667eea;background:white;box-shadow:0 0 0 3px #667eea1a}[_nghost-%COMP%]     .pb-pages-search-box .pb-pages-search::placeholder{color:#9ca3af}[_nghost-%COMP%]     .pb-pages-list-container{display:flex;flex-direction:column;gap:12px;padding:16px}[_nghost-%COMP%]     .pb-loading-spinner{width:20px;height:20px;border:3px solid #e5e7eb;border-top-color:#667eea;border-radius:50%;animation:_ngcontent-%COMP%_spin .8s linear infinite}[_nghost-%COMP%]     .pb-empty-state-premium{text-align:center;padding:40px 20px}[_nghost-%COMP%]     .pb-empty-state-premium .pb-empty-icon{font-size:48px;display:block;margin-bottom:16px;animation:_ngcontent-%COMP%_float 2s ease-in-out infinite}[_nghost-%COMP%]     .pb-empty-state-premium h5{margin:0 0 8px;font-size:16px;font-weight:700;color:#1f2937}[_nghost-%COMP%]     .pb-empty-state-premium p{margin:0 0 16px;font-size:13px;color:#6c757d}[_nghost-%COMP%]     .pb-pages-panel-footer{padding:12px 16px;background:linear-gradient(135deg,#f0f4f8 0%,#f8f9fa 100%);border-top:1px solid #e9ecef;font-size:12px;color:#6c757d}[_nghost-%COMP%]     .pb-pages-panel-footer .pb-footer-info{display:flex;align-items:center;gap:8px;text-align:center}[_nghost-%COMP%]     .pb-pages-panel-footer .pb-footer-info .footer-icon{font-size:14px}[_nghost-%COMP%]     .pb-pages-panel-content{display:flex;flex-direction:column;gap:0}[_nghost-%COMP%]     .pb-pages-panel-content .pb-pages-tab{display:none;flex-direction:column;gap:0}[_nghost-%COMP%]     .pb-pages-panel-content .pb-pages-tab.active{display:flex}@keyframes _ngcontent-%COMP%_float{0%,to{transform:translateY(0)}50%{transform:translateY(-8px)}}@keyframes _ngcontent-%COMP%_spin{to{transform:rotate(360deg)}}@media (max-width: 768px){[_nghost-%COMP%]     .pb-pages-panel-header{flex-direction:column;text-align:center}[_nghost-%COMP%]     .pb-pages-panel-header .pb-pages-header-content{justify-content:center}[_nghost-%COMP%]     .pb-form-card-header{flex-direction:column;text-align:center}[_nghost-%COMP%]     .pb-form-card-header .pb-form-step-badge{margin:0 auto}[_nghost-%COMP%]     .pb-form-row{flex-direction:column}[_nghost-%COMP%]     .pb-form-row .pb-form-group{width:100%}}[_nghost-%COMP%]     .pb-create-section .pb-form-group{margin-bottom:12px}[_nghost-%COMP%]     .pb-create-section .pb-form-group label{font-size:12px;font-weight:600;color:#374151;margin-bottom:6px;display:block}[_nghost-%COMP%]     .pb-create-section .pb-form-group input[type=text], [_nghost-%COMP%]     .pb-create-section .pb-form-group select{width:100%;padding:10px 12px;border:1px solid #d1d5db;border-radius:6px;font-size:14px;transition:all .2s ease;background:white}[_nghost-%COMP%]     .pb-create-section .pb-form-group input[type=text]:focus, [_nghost-%COMP%]     .pb-create-section .pb-form-group select:focus{outline:none;border-color:#6366f1;box-shadow:0 0 0 3px #6366f11a}[_nghost-%COMP%]     .pb-create-section .pb-form-group input[type=text]:hover, [_nghost-%COMP%]     .pb-create-section .pb-form-group select:hover{border-color:#9ca3af}[_nghost-%COMP%]     .pb-create-section .pb-form-group select{cursor:pointer;background-image:url(\"data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e\");background-position:right 8px center;background-repeat:no-repeat;background-size:16px;padding-right:32px;appearance:none}[_nghost-%COMP%]     .pb-create-section .pb-checkbox-group{display:flex;align-items:center;gap:8px;padding:8px;background:#f9fafb;border-radius:6px}[_nghost-%COMP%]     .pb-create-section .pb-checkbox-group input[type=checkbox]{width:18px;height:18px;cursor:pointer;accent-color:#6366f1}[_nghost-%COMP%]     .pb-create-section .pb-checkbox-group label{margin:0;font-size:13px;font-weight:500;color:#374151;cursor:pointer;-webkit-user-select:none;user-select:none}[_nghost-%COMP%]     .pb-create-section .pb-action-buttons{display:flex;gap:8px;margin-top:16px}[_nghost-%COMP%]     .pb-create-section .pb-action-buttons button{flex:1;padding:10px 16px;border:none;border-radius:6px;font-size:13px;font-weight:600;cursor:pointer;transition:all .2s ease}[_nghost-%COMP%]     .pb-create-section .pb-action-buttons #loadModelBtn{background:linear-gradient(135deg,#6366f1 0%,#4f46e5 100%);color:#fff}[_nghost-%COMP%]     .pb-create-section .pb-action-buttons #loadModelBtn:hover{background:linear-gradient(135deg,#4f46e5 0%,#4338ca 100%);transform:translateY(-1px);box-shadow:0 4px 12px #6366f14d}[_nghost-%COMP%]     .pb-create-section .pb-action-buttons #loadModelBtn:active{transform:translateY(0)}[_nghost-%COMP%]     .pb-list-section #pagesList{display:flex;flex-direction:column;gap:10px}[_nghost-%COMP%]     .pb-list-section #pagesList.pb-pages-empty{padding:40px 20px;text-align:center;color:#9ca3af;font-size:14px}[_nghost-%COMP%]     .pb-list-section #pagesList.pb-pages-loading{padding:20px;text-align:center}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-pages-section{display:flex;flex-direction:column;gap:12px;margin-bottom:16px;padding-bottom:16px;border-bottom:1px solid #e5e7eb}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-pages-section:last-child{border-bottom:none}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-pages-section .pb-section-title{margin:0 0 8px;font-size:12px;font-weight:700;text-transform:uppercase;letter-spacing:.5px;color:#6b7280;padding:0 4px}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item{display:flex;justify-content:space-between;align-items:flex-start;padding:12px;border:1px solid #e5e7eb;border-radius:6px;background:#f9fafb;transition:all .2s ease;gap:8px}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item:hover{background:#f3f4f6;border-color:#d1d5db;box-shadow:0 2px 8px #0000000d}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item:hover .pb-page-actions button{opacity:1}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-info{flex:1;min-width:0;display:flex;flex-direction:column;gap:4px}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-info .pb-page-title{margin:0;font-size:14px;font-weight:600;color:#1f2937;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-info .pb-page-desc{margin:0;font-size:12px;color:#6b7280;line-height:1.3;overflow:hidden;text-overflow:ellipsis;white-space:normal;display:-webkit-box;line-clamp:2;-webkit-line-clamp:2;-webkit-box-orient:vertical}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-info .pb-page-link{margin:0;font-size:11px;color:#7c3aed;font-family:Courier New,monospace;white-space:nowrap;overflow:hidden;text-overflow:ellipsis}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-info .pb-page-menu-badge{font-size:10px;display:inline-block;background:#fef3c7;color:#92400e;padding:2px 6px;border-radius:3px;width:-moz-fit-content;width:fit-content;margin-top:2px;margin-right:4px}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-info .pb-page-tipo-badge{font-size:10px;display:inline-block;background:#fce7f3;color:#be185d;padding:2px 6px;border-radius:3px;width:-moz-fit-content;width:fit-content;margin-top:2px}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-actions{display:flex;gap:6px;flex-shrink:0}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-actions button{background:white;border:1px solid #d1d5db;padding:6px 10px;border-radius:4px;cursor:pointer;font-size:12px;font-weight:500;color:#374151;transition:all .2s ease;white-space:nowrap;opacity:.8}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-actions button:hover{border-color:#9ca3af;transform:translateY(-1px)}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-actions button:active{transform:translateY(0)}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-actions button.pb-page-edit-btn{background:#dbeafe;border-color:#93c5fd;color:#1e40af}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-actions button.pb-page-edit-btn:hover{background:#bfdbfe;border-color:#60a5fa}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-actions button.pb-page-delete-btn{background:#fee2e2;border-color:#fecaca;color:#dc2626}[_nghost-%COMP%]     .pb-list-section #pagesList .pb-page-item .pb-page-actions button.pb-page-delete-btn:hover{background:#fecaca;border-color:#fca5a5}.pb-pages-divider[_ngcontent-%COMP%]{height:1px;background:linear-gradient(90deg,transparent,#e5e7eb,transparent);margin:0 -20px}.pb-pages-panel-footer[_ngcontent-%COMP%]{padding:16px 20px;border-top:1px solid #e5e7eb;background:#f9fafb}.pb-pages-panel-footer[_ngcontent-%COMP%]   #savePagesBtn[_ngcontent-%COMP%]{width:100%;padding:12px 16px;background:linear-gradient(135deg,#10b981 0%,#059669 100%);color:#fff;border:none;border-radius:6px;font-size:14px;font-weight:600;cursor:pointer;transition:all .2s ease;display:flex;align-items:center;justify-content:center;gap:8px}.pb-pages-panel-footer[_ngcontent-%COMP%]   #savePagesBtn[_ngcontent-%COMP%]:hover{background:linear-gradient(135deg,#059669 0%,#047857 100%);transform:translateY(-1px);box-shadow:0 4px 12px #10b9814d}.pb-pages-panel-footer[_ngcontent-%COMP%]   #savePagesBtn[_ngcontent-%COMP%]:active{transform:translateY(0)}.pb-pages-panel-footer[_ngcontent-%COMP%]   #savePagesBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], .pb-pages-panel-footer[_ngcontent-%COMP%]   #savePagesBtn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:16px}#togglePagesPanelBtn[_ngcontent-%COMP%]{background:white;border:1px solid #e5e7eb;padding:8px 12px;border-radius:6px;cursor:pointer;font-size:13px;font-weight:600;color:#374151;transition:all .2s ease;display:flex;align-items:center;gap:6px}#togglePagesPanelBtn[_ngcontent-%COMP%]:hover{background:#f9fafb;border-color:#d1d5db;color:#1f2937}#togglePagesPanelBtn[_ngcontent-%COMP%]:active{transform:scale(.98)}#togglePagesPanelBtn[_ngcontent-%COMP%]   i[_ngcontent-%COMP%], #togglePagesPanelBtn[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-size:16px}.pb-pages-panel-overlay[_ngcontent-%COMP%]{position:fixed;inset:0;background:rgba(0,0,0,0);opacity:0;pointer-events:none;transition:opacity .3s ease;z-index:998}@media (max-width: 768px){.pb-pages-panel-overlay[_ngcontent-%COMP%]{background:rgba(0,0,0,.5)}.pb-pages-panel-overlay.active[_ngcontent-%COMP%]{opacity:1;pointer-events:auto}}@keyframes _ngcontent-%COMP%_slideInRight{0%{opacity:0;transform:translate(20px)}to{opacity:1;transform:translate(0)}}@keyframes _ngcontent-%COMP%_slideOutRight{0%{opacity:1;transform:translate(0)}to{opacity:0;transform:translate(20px)}}.pb-pages-panel-content[_ngcontent-%COMP%]   .pb-pages-section[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideInRight .3s ease-out}.pb-pages-loading[_ngcontent-%COMP%]:after{content:\"\";display:inline-block;width:16px;height:16px;margin-left:8px;border:2px solid #e5e7eb;border-top-color:#6366f1;border-radius:50%;animation:_ngcontent-%COMP%_spin .6s linear infinite}.pb-form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid{border-color:#ef4444}.pb-form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:invalid:focus{box-shadow:0 0 0 3px #ef44441a}.pb-form-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:valid{border-color:#10b981}.pb-preset-size[_ngcontent-%COMP%]:hover{transform:translateY(-2px);box-shadow:0 4px 12px #6366f126}.pb-preset-size[_ngcontent-%COMP%]:active{transform:translateY(0)}.pb-preset-radius[_ngcontent-%COMP%]:hover{transform:scale(1.05)}.pb-preset-radius[_ngcontent-%COMP%]:active{transform:scale(.95)}.pb-input[_ngcontent-%COMP%]{transition:all .3s ease}.pb-input[_ngcontent-%COMP%]:hover{border-color:#d1d5db;background-color:#fafbfc}.pb-input[_ngcontent-%COMP%]:focus{border-color:#6366f1!important;box-shadow:0 0 0 3px #6366f11a!important;background-color:#fafbfc}.pb-slider[_ngcontent-%COMP%]{appearance:none;height:6px;border-radius:3px;outline:none;transition:all .2s ease}.pb-slider[_ngcontent-%COMP%]:hover{height:8px}.pb-slider[_ngcontent-%COMP%]::-webkit-slider-runnable-track{background:linear-gradient(to right,#e5e7eb 0%,#6366f1 50%,#e5e7eb 100%);height:6px;border-radius:3px}.pb-slider[_ngcontent-%COMP%]::-moz-range-track{background:linear-gradient(to right,#e5e7eb 0%,#6366f1 50%,#e5e7eb 100%);height:6px;border-radius:3px;border:none}.pb-slider[_ngcontent-%COMP%]::-webkit-slider-thumb{appearance:none;width:18px;height:18px;border-radius:50%;background:linear-gradient(135deg,#6366f1 0%,#4f46e5 100%);cursor:pointer;box-shadow:0 2px 8px #6366f166;-webkit-transition:all .2s ease;transition:all .2s ease;border:2px solid white}.pb-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:hover{transform:scale(1.2);box-shadow:0 4px 12px #6366f199}.pb-slider[_ngcontent-%COMP%]::-webkit-slider-thumb:active{transform:scale(1.1)}.pb-slider[_ngcontent-%COMP%]::-moz-range-thumb{width:18px;height:18px;border-radius:50%;background:linear-gradient(135deg,#6366f1 0%,#4f46e5 100%);cursor:pointer;box-shadow:0 2px 8px #6366f166;-moz-transition:all .2s ease;transition:all .2s ease;border:2px solid white}.pb-slider[_ngcontent-%COMP%]::-moz-range-thumb:hover{transform:scale(1.2);box-shadow:0 4px 12px #6366f199}.pb-slider[_ngcontent-%COMP%]::-moz-range-thumb:active{transform:scale(1.1)}.pb-checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{accent-color:#6366f1;cursor:pointer;transition:all .2s ease}.pb-checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:hover{transform:scale(1.1)}.pb-checkbox-label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked{background:linear-gradient(135deg,#6366f1 0%,#4f46e5 100%)}.pb-align-btn[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.pb-align-btn[_ngcontent-%COMP%]:hover:not(.active){box-shadow:0 4px 12px #00000014}.pb-align-btn.active[_ngcontent-%COMP%]{box-shadow:0 4px 12px #6366f14d}.pb-align-btn[_ngcontent-%COMP%]:before{content:\"\";position:absolute;top:0;left:-100%;width:100%;height:100%;background:rgba(255,255,255,.2);transition:left .3s ease}.pb-align-btn[_ngcontent-%COMP%]:hover:before{left:100%}.pb-target-btn[_ngcontent-%COMP%]{transition:all .3s cubic-bezier(.4,0,.2,1);position:relative;overflow:hidden}.pb-target-btn[_ngcontent-%COMP%]:hover:not(.active){box-shadow:0 4px 12px #00000014}.pb-target-btn.active[_ngcontent-%COMP%]{box-shadow:0 4px 12px #6366f14d}label[_ngcontent-%COMP%]{font-family:inherit;transition:color .2s ease}label[_ngcontent-%COMP%]:hover{color:#1f2937}.pb-small-label[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#374151;text-transform:uppercase;letter-spacing:.5px;transition:color .2s ease}.pb-small-label[_ngcontent-%COMP%]:hover{color:#1f2937}.pb-unit[_ngcontent-%COMP%]{font-size:12px;font-weight:600;color:#9ca3af;text-transform:uppercase;letter-spacing:.5px}.pb-slider-value[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_slideIn .3s ease}@keyframes _ngcontent-%COMP%_slideIn{0%{opacity:0;transform:translateY(-4px)}to{opacity:1;transform:translateY(0)}}@media (max-width: 768px){#pagesPanel[_ngcontent-%COMP%]{width:100%;right:-100%}#pagesPanel.active[_ngcontent-%COMP%]{right:0}.pb-pages-panel-content[_ngcontent-%COMP%]{padding:12px}.pb-form-row[_ngcontent-%COMP%]{flex-direction:column}.pb-form-row[_ngcontent-%COMP%]   .pb-form-group[_ngcontent-%COMP%]{flex:1!important}.pb-divider-thick[_ngcontent-%COMP%]{margin:12px -12px}}"]})}}return S})();const Ae=[{path:"",component:xe}];let ze=(()=>{class S{static forRoot(e){const t=[{provide:oe.R,useValue:e.apiBaseUrl}];return e.authAdapterProvider&&t.push(e.authAdapterProvider),e.authAdapter&&t.push({provide:oe.N,useValue:e.authAdapter}),{ngModule:S,providers:t}}static{this.\u0275fac=function(t){return new(t||S)}}static{this.\u0275mod=l.$C({type:S})}static{this.\u0275inj=l.G2t({imports:[de.MD,X.YN,me.q1,Ce.iI.forChild(Ae)]})}}return S})();var Le=R(9220),ye=R(7448),Ie=R(1741);function ve(S){return()=>{}}const Te={provide:l.hnV,useFactory:ve,deps:[ce.S],multi:!0};var De=R(3600),Be=R(8829),Ne=R(7722)}}]);